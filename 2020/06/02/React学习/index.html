<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/icon.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icon.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon.jpg">
  <link rel="mask-icon" href="/images/icon.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.pisho.me","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="å­¦å®Œ Vue å†æ¥çœ‹çœ‹ Reactï¼Œä¸¤è€…è™½ç„¶ä¸å¤ªä¸€æ ·ï¼Œä½†æ˜¯æ€æƒ³ã€å®ç°ä¸Šè¿˜æ˜¯æœ‰ä¸€å®šçš„ç›¸åŒç‚¹çš„ã€‚ï¼ˆjsxå¥½åƒä¸èƒ½è¢«æ­£ç¡®é«˜äº®ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="Reactå­¦ä¹ ">
<meta property="og:url" content="http://www.pisho.me/2020/06/02/React%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Pisho&#39;Blogs">
<meta property="og:description" content="å­¦å®Œ Vue å†æ¥çœ‹çœ‹ Reactï¼Œä¸¤è€…è™½ç„¶ä¸å¤ªä¸€æ ·ï¼Œä½†æ˜¯æ€æƒ³ã€å®ç°ä¸Šè¿˜æ˜¯æœ‰ä¸€å®šçš„ç›¸åŒç‚¹çš„ã€‚ï¼ˆjsxå¥½åƒä¸èƒ½è¢«æ­£ç¡®é«˜äº®ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-06-02T03:52:41.000Z">
<meta property="article:modified_time" content="2020-12-23T14:41:22.966Z">
<meta property="article:author" content="Pisho">
<meta property="article:tag" content="å­¦ä¹ å‰ç«¯">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.pisho.me/2020/06/02/React%E5%AD%A6%E4%B9%A0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Reactå­¦ä¹  | Pisho'Blogs</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Pisho'Blogs</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Daily Notes</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="heartbeat fa-fw"></i>å…¬ç›Š 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.pisho.me/2020/06/02/React%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon.jpg">
      <meta itemprop="name" content="Pisho">
      <meta itemprop="description" content="æœ¬ç«™çœ‹è¿æ°”è®¿é—®è¿›æ¥,ä¸»è¦æ˜¯æœ¬äººçš„ä¸€äº›å­¦ä¹ ç¬”è®°,ä¸€èˆ¬æ²¡æœ‰ä»€ä¹ˆå¹²è´§ã€‚ä¸è¿‡è¿˜æ˜¯å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©ä½ å­¦ä¹ åˆ°ä»€ä¹ˆã€‚ç”±äºåŸŸååˆ°æœŸï¼Œæ‰€ä»¥æ¢æˆäº† MOE äºŒæ¬¡å…ƒåŸŸåã€‚ğŸ˜„">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pisho'Blogs">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Reactå­¦ä¹ 
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-06-02 11:52:41" itemprop="dateCreated datePublished" datetime="2020-06-02T11:52:41+08:00">2020-06-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-12-23 22:41:22" itemprop="dateModified" datetime="2020-12-23T22:41:22+08:00">2020-12-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">å­¦ä¹ </span></a>
                </span>
            </span>

          
            <div class="post-description">å­¦å®Œ Vue å†æ¥çœ‹çœ‹ Reactï¼Œä¸¤è€…è™½ç„¶ä¸å¤ªä¸€æ ·ï¼Œä½†æ˜¯æ€æƒ³ã€å®ç°ä¸Šè¿˜æ˜¯æœ‰ä¸€å®šçš„ç›¸åŒç‚¹çš„ã€‚ï¼ˆjsxå¥½åƒä¸èƒ½è¢«æ­£ç¡®é«˜äº®ã€‚</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="React-å­¦ä¹ "><a href="#React-å­¦ä¹ " class="headerlink" title="React å­¦ä¹ "></a>React å­¦ä¹ </h1><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> serviceWorker <span class="keyword">from</span> <span class="string">&#x27;./serviceWorker&#x27;</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// If you want your app to work offline and load faster, you can change</span></span><br><span class="line"><span class="comment">// unregister() to register() below. Note this comes with some pitfalls.</span></span><br><span class="line"><span class="comment">// Learn more about service workers: https://bit.ly/CRA-PWA</span></span><br><span class="line">serviceWorker.unregister();</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//App.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">&#x27;./logo.svg&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;App&quot;</span>&gt;</span><br><span class="line">      &lt;header className=<span class="string">&quot;App-header&quot;</span>&gt;</span><br><span class="line">        &lt;img src=&#123;logo&#125; className=<span class="string">&quot;App-logo&quot;</span> alt=<span class="string">&quot;logo&quot;</span> /&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">          Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;a</span><br><span class="line">          className=<span class="string">&quot;App-link&quot;</span></span><br><span class="line">          href=<span class="string">&quot;https://reactjs.org&quot;</span></span><br><span class="line">          target=<span class="string">&quot;_blank&quot;</span></span><br><span class="line">          rel=<span class="string">&quot;noopener noreferrer&quot;</span></span><br><span class="line">        &gt;</span><br><span class="line">          Learn React</span><br><span class="line">        &lt;/a&gt;</span><br><span class="line">      &lt;/header&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ˜¯ React åˆå§‹åŒ–åçš„æ¨¡æ¿ã€‚</p>
<p><code>npm start</code> åæ˜¯ä¸€ä¸ª React Logo çš„åŠ¨ç”»é¡µé¢ã€‚</p>
<p>é¦–å…ˆï¼Œè¿™ä¸ªé¡µé¢æ²¡æœ‰è·¯ç”±ï¼Œåªæ˜¯ä¸€ä¸ªç®€å•é¡µé¢è€Œå·²ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆ url éƒ½ä¼šæŒ‡å‘è¿™ä¸ªé»˜è®¤é¡µé¢ã€‚</p>
<p>æ•´ä¸ªé¡¹ç›®çš„å…¥å£æ˜¯ <code>index.js</code> ï¼Œ<code>App.js</code> åªæ˜¯ä¸€ä¸ªç»„ä»¶è€Œå·²ï¼Œé€šè¿‡ <code>import App from &#39;./App&#39;;</code> å¼•å…¥ï¼Œè¿™é‡Œçš„ <code>.js</code> åç¼€æ˜¯çœç•¥æ‰çš„ã€‚</p>
<p>ä»å…¥å£æ–‡ä»¶æ¥çœ‹ï¼Œå…¥å£å‡½æ•°æ˜¯ <code>ReactDOM.render()</code> ï¼Œå‡½æ•°çš„ä½œç”¨å°±æ˜¯å°†å‡½æ•°å†…çš„ä»£ç æ¸²æŸ“é¡µé¢ï¼Œ<code>&lt;React.StrictMode&gt;</code> æ ‡ç­¾è¡¨ç¤ºè¿™é‡Œé¢æ˜¯ç”¨çš„ä¸¥æ ¼æ¨¡å¼ï¼Œç„¶åæ˜¯ä¸»ç»„ä»¶ <code>App</code> çš„æ ‡ç­¾ã€‚</p>
<p>ReactDOM.render(template,targetDOM) æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæ˜¯åˆ›å»ºçš„æ¨¡æ¿ï¼Œå¤šä¸ª dom å…ƒç´ å¤–å±‚éœ€ä½¿ç”¨ä¸€ä¸ªæ ‡ç­¾è¿›è¡ŒåŒ…è£¹ï¼Œå¦‚ &lt;div&gt;ï¼›</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ’å…¥è¯¥æ¨¡æ¿çš„ç›®æ ‡ä½ç½®ã€‚</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå‡½æ•°å…¶å®å¹¶ä¸æ˜¯åªèƒ½è¿è¡Œä¸€æ¬¡ï¼Œè€Œæ˜¯å¯ä»¥è¿è¡Œå¤šæ¬¡ï¼Œä¹Ÿå°±å¯ä»¥é€šè¿‡è¿™ç§å½¢å¼æ’å…¥å¤šä¸ªç»„ä»¶ã€‚</p>
<blockquote>
<p>ä½†æ˜¯æ­£å¸¸æ¥è¯´ï¼Œæ›´å¸Œæœ›èƒ½å¤Ÿä½¿ç”¨ç»„ä»¶çš„æ–¹å¼è¿›è¡Œè°ƒç”¨åŠæ¸²æŸ“ã€‚å•ç‹¬æ¸²æŸ“ä¸€ä¸ªç»„ä»¶å¯èƒ½ä¼šå¸¦æ¥å¤šä½™çš„æ¶ˆè€—ã€‚</p>
</blockquote>
<p>ç„¶åçœ‹ <code>App.js</code> ï¼Œé¦–å…ˆå®ƒä½¿ç”¨äº†ä¸€ä¸ªå‡½æ•°å¼çš„ç¼–ç¨‹ï¼Œå°†é¡µé¢ä»£ç å†™åœ¨ JavaScript å‡½æ•°é‡Œé¢ï¼Œè¿”å›è¿™ä¸ªé¡µé¢å¯¹è±¡ï¼Œå†é€šè¿‡ <code>export default</code> å°†è¿™ä¸ªå‡½æ•°å¯¼å‡ºï¼Œè¿™æ ·ä¸€ä¸ªå•æ–‡ä»¶ç»„ä»¶å°±å†™å¥½äº†ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›å­ç»„ä»¶åœ¨è¿™ä¸ªç»„ä»¶é‡Œé¢ï¼Œä½†æ˜¯å¹¶ä¸å¯¼å‡ºï¼Œä½œä¸ºä¸€ä¸ªç§æœ‰æ–¹æ³•ã€‚</p>
<p><code>App.js</code> é‡Œé¢çš„ CSS å°±ä¸è¯´äº†ï¼Œå°±æ˜¯ç®€å•çš„åŠ¨ç”»è€Œå·²ï¼Œæ‰äº†è§£åˆ°çš„å°±åªæœ‰ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/prefers-reduced-motion"><code>prefers-reduced-motion</code></a> äº†ï¼Œè¿™ä¸ªæ˜¯ç”¨æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å¼€å¯äº†åŠ¨ç”»å‡å¼±åŠŸèƒ½ã€‚</p>
<h2 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h2><p>åœ¨ä¸Šé¢çš„ <code>App.js</code> ä¸­ï¼Œç»„ä»¶çš„ä»£ç æ˜¯é€šè¿‡å‡½æ•°è¿”å›å¯¹è±¡çš„æ–¹å¼ä½¿ç”¨çš„ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§å½¢å¼ï¼Œå°±æ˜¯ JSXã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹æ³•å¯ä»¥å°†ä¸€äº›å¤ç”¨æ€§é«˜çš„ HTML ä»£ç å˜æˆ JavaScript å¯¹è±¡ã€‚åœ¨ä½¿ç”¨ä¸­è°ƒç”¨å¯¹è±¡å³å¯ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;user.avatarUrl&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ JSX ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>&#123;&#125;</code> æ’å…¥ JavaScript è¡¨è¾¾å¼ã€‚</p>
<p>ä½ å¯ä»¥å®‰å…¨åœ°åœ¨ JSX å½“ä¸­æ’å…¥ç”¨æˆ·è¾“å…¥å†…å®¹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> title = response.potentiallyMaliciousInput;<span class="comment">// è¿™ä¸ªå˜é‡æœ‰ç‚¹ç¦»è°±ï¼Œå®é™…ä¸Šå°±æ˜¯è¯´æ˜¯æ¶æ„ä»£ç ï¼Œå¹¶ä¸æ˜¯è¯´æ˜¯ä¸€ä¸ªä» response å¯¹è±¡ä¸Šè·å–çš„å±æ€§ï¼Œæ„æ€å°±æ˜¯ç”¨æˆ·ä¸Šä¼ åè·å–åˆ°çš„ç”¨æˆ·è¾“å…¥çš„æ¶æ„ä»£ç ã€‚</span></span><br><span class="line"><span class="comment">// ç›´æ¥ä½¿ç”¨æ˜¯å®‰å…¨çš„ï¼š</span></span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>
<p>React DOM åœ¨æ¸²æŸ“æ‰€æœ‰è¾“å…¥å†…å®¹ä¹‹å‰ï¼Œé»˜è®¤ä¼šè¿›è¡Œ<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/7381974/which-characters-need-to-be-escaped-on-html">è½¬ä¹‰</a>ã€‚å®ƒå¯ä»¥ç¡®ä¿åœ¨ä½ çš„åº”ç”¨ä¸­ï¼Œæ°¸è¿œä¸ä¼šæ³¨å…¥é‚£äº›å¹¶éè‡ªå·±æ˜ç¡®ç¼–å†™çš„å†…å®¹ã€‚æ‰€æœ‰çš„å†…å®¹åœ¨æ¸²æŸ“ä¹‹å‰éƒ½è¢«è½¬æ¢æˆäº†å­—ç¬¦ä¸²ã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆåœ°é˜²æ­¢ <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Cross-site_scripting">XSSï¼ˆcross-site-scripting, è·¨ç«™è„šæœ¬ï¼‰</a>æ”»å‡»ã€‚</p>
<p>Babel ä¼šæŠŠ JSX è½¬è¯‘æˆä¸€ä¸ªåä¸º <code>React.createElement()</code> å‡½æ•°è°ƒç”¨ã€‚</p>
<p>ä»¥ä¸‹ä¸¤ç§ç¤ºä¾‹ä»£ç å®Œå…¨ç­‰æ•ˆï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = (</span><br><span class="line">  &lt;h1 className=<span class="string">&quot;greeting&quot;</span>&gt; &#123;<span class="comment">/*æ˜¯ç”¨çš„ className æ³¨æ„é©¼å³°å†™æ³•ã€‚ä¸æ˜¯ classã€‚*/</span>&#125;</span><br><span class="line">    Hello, world!</span><br><span class="line">  &lt;/h1&gt;</span><br><span class="line">);</span><br><span class="line"><span class="keyword">const</span> element = React.createElement(</span><br><span class="line">  <span class="string">&#x27;h1&#x27;</span>,</span><br><span class="line">  &#123;<span class="attr">className</span>: <span class="string">&#x27;greeting&#x27;</span>&#125;,</span><br><span class="line">  <span class="string">&#x27;Hello, world!&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><code>React.createElement()</code> ä¼šé¢„å…ˆæ‰§è¡Œä¸€äº›æ£€æŸ¥ï¼Œä»¥å¸®åŠ©ä½ ç¼–å†™æ— é”™ä»£ç ï¼Œä½†å®é™…ä¸Šå®ƒåˆ›å»ºäº†ä¸€ä¸ªè¿™æ ·çš„å¯¹è±¡ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„ï¼šè¿™æ˜¯ç®€åŒ–è¿‡çš„ç»“æ„</span></span><br><span class="line"><span class="keyword">const</span> element = &#123;</span><br><span class="line">  type: <span class="string">&#x27;h1&#x27;</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    className: <span class="string">&#x27;greeting&#x27;</span>,</span><br><span class="line">    children: <span class="string">&#x27;Hello, world!&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h2><p>å®šä¹‰ç»„ä»¶æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ç¼–å†™ JavaScript å‡½æ•°ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ React ç»„ä»¶ï¼Œå› ä¸ºå®ƒæ¥æ”¶å”¯ä¸€å¸¦æœ‰æ•°æ®çš„ â€œpropsâ€ï¼ˆä»£è¡¨å±æ€§ï¼‰å¯¹è±¡ä¸å¹¶è¿”å›ä¸€ä¸ª React å…ƒç´ ã€‚è¿™ç±»ç»„ä»¶è¢«ç§°ä¸ºâ€œå‡½æ•°ç»„ä»¶â€ï¼Œå› ä¸ºå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ JavaScript å‡½æ•°ã€‚</p>
<h3 id="è‡ªå®šä¹‰ç»„ä»¶"><a href="#è‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="è‡ªå®šä¹‰ç»„ä»¶"></a>è‡ªå®šä¹‰ç»„ä»¶</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;Sara&quot;</span> /&gt;</span></span>;</span><br></pre></td></tr></table></figure>
<p>å½“ React å…ƒç´ ä¸ºç”¨æˆ·è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå°† JSX æ‰€æ¥æ”¶çš„å±æ€§ï¼ˆattributesï¼‰ä»¥åŠå­ç»„ä»¶ï¼ˆchildrenï¼‰è½¬æ¢ä¸ºå•ä¸ªå¯¹è±¡ä¼ é€’ç»™ç»„ä»¶ï¼Œè¿™ä¸ªå¯¹è±¡è¢«ç§°ä¹‹ä¸º â€œpropsâ€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç ä¼šåœ¨é¡µé¢ä¸Šæ¸²æŸ“ â€œHello, Saraâ€ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;Sara&quot;</span> /&gt;</span></span>;</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  element,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ç»„ä»¶åº”è¯¥å°½å¯èƒ½çš„å°æˆ–è€…åªåŒ…å«ä¸€ä¸ªå…ƒç´ ã€‚</p>
<h3 id="Props-åªè¯»"><a href="#Props-åªè¯»" class="headerlink" title="Props åªè¯»"></a>Props åªè¯»</h3><p>ç»„ä»¶æ— è®ºæ˜¯ä½¿ç”¨<a target="_blank" rel="noopener" href="https://react.docschina.org/docs/components-and-props.html#function-and-class-components">å‡½æ•°å£°æ˜è¿˜æ˜¯é€šè¿‡ class å£°æ˜</a>ï¼Œéƒ½å†³ä¸èƒ½ä¿®æ”¹è‡ªèº«çš„ propsã€‚æ¥çœ‹ä¸‹è¿™ä¸ª <code>sum</code> å‡½æ•°ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·çš„å‡½æ•°è¢«ç§°ä¸º<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Pure_function">â€œçº¯å‡½æ•°â€</a>ï¼Œå› ä¸ºè¯¥å‡½æ•°ä¸ä¼šå°è¯•æ›´æ”¹å…¥å‚ï¼Œä¸”å¤šæ¬¡è°ƒç”¨ä¸‹ç›¸åŒçš„å…¥å‚å§‹ç»ˆè¿”å›ç›¸åŒçš„ç»“æœã€‚</p>
<p>ç›¸åï¼Œä¸‹é¢è¿™ä¸ªå‡½æ•°åˆ™ä¸æ˜¯çº¯å‡½æ•°ï¼Œå› ä¸ºå®ƒæ›´æ”¹äº†è‡ªå·±çš„å…¥å‚ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">withdraw</span>(<span class="params">account, amount</span>) </span>&#123;</span><br><span class="line">  account.total -= amount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>React éå¸¸çµæ´»ï¼Œä½†å®ƒä¹Ÿæœ‰ä¸€ä¸ªä¸¥æ ¼çš„è§„åˆ™ï¼š</p>
<p><strong>æ‰€æœ‰ React ç»„ä»¶éƒ½å¿…é¡»åƒçº¯å‡½æ•°ä¸€æ ·ä¿æŠ¤å®ƒä»¬çš„ props ä¸è¢«æ›´æ”¹ã€‚</strong></p>
<h3 id="å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶"><a href="#å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶" class="headerlink" title="å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶"></a>å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶</h3><p>çœ‹äº†ä¸å°‘å®ä¾‹ä»£ç ï¼Œæ„Ÿè§‰å‡½æ•°ç»„ä»¶é€šå¸¸ç”¨æ¥è¿”å›ä¸€äº›åŸºæœ¬ JSX å…ƒç´ ï¼Œé€šè¿‡ç±»ç»„ä»¶å»è¿›è¡Œè°ƒç”¨å’Œç»„åˆã€‚</p>
<h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><p>State ä¸ props ç±»ä¼¼ï¼Œä½†æ˜¯ state æ˜¯<strong>ç§æœ‰</strong>çš„ï¼Œå¹¶ä¸”å®Œå…¨å—æ§äºå½“å‰ç»„ä»¶ã€‚</p>
<p>ä¸Šé¢è¯´è¿‡ï¼Œç»„ä»¶æ˜¯ä¸€ä¸ª JavaScript å‡½æ•°ï¼Œå½“ç„¶ Class ç±»ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯éœ€è¦ç»§æ‰¿ <code>React.Component</code> ã€‚å‚è€ƒ <a target="_blank" rel="noopener" href="https://react.docschina.org/docs/react-component.html">https://react.docschina.org/docs/react-component.html</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello, world!&lt;/h1&gt;</span><br><span class="line">        &lt;h2&gt;It is &#123;<span class="built_in">this</span>.props.date.toLocaleTimeString()&#125;.&lt;/h2&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ Class ç±»ä¸­ä½¿ç”¨ <code>state</code> å°±éœ€è¦é€šè¿‡ Class çš„ <code>Constructor</code> æ„é€ å™¨æ¥å®ç°ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;<span class="attr">date</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;Hello, world!&lt;/h1&gt;</span><br><span class="line">        &lt;h2&gt;It is &#123;<span class="built_in">this</span>.state.date.toLocaleTimeString()&#125;.&lt;/h2&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¿™ä¸ª state ä¸èƒ½è¢«ç›´æ¥ä¿®æ”¹</strong>ï¼Œç›´æ¥ä¿®æ”¹å¹¶ä¸ä¼šé‡æ–°æ¸²æŸ“å…ƒç´ ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Wrong</span></span><br><span class="line"><span class="built_in">this</span>.state.comment = <span class="string">&#x27;Hello&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>è€Œæ˜¯åº”è¯¥ä½¿ç”¨ <code>setState()</code>:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Correct</span></span><br><span class="line"><span class="built_in">this</span>.setState(&#123;<span class="attr">comment</span>: <span class="string">&#x27;Hello&#x27;</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>åªæœ‰ <code>Constructor</code> é‡Œé¢èƒ½èµ‹å€¼ã€‚</p>
<p>å¦‚æœ <code>setState</code> éœ€è¦å‚ä¸è®¡ç®—ï¼Œéœ€è¦ä½¿ç”¨å‡½æ•°ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Correct</span></span><br><span class="line"><span class="built_in">this</span>.setState(<span class="function">(<span class="params">state, props</span>) =&gt;</span> (&#123;</span><br><span class="line">  counter: state.counter + props.increment</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<p>å…³äº state å¯ä»¥å‚è€ƒä¸€ä¸‹ <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a883552c67de">https://www.jianshu.com/p/a883552c67de</a> äº†è§£æ›´å¤šç»†èŠ‚ã€‚</p>
<h3 id="æ•°æ®è‡ªé¡¶å‘ä¸‹"><a href="#æ•°æ®è‡ªé¡¶å‘ä¸‹" class="headerlink" title="æ•°æ®è‡ªé¡¶å‘ä¸‹"></a>æ•°æ®è‡ªé¡¶å‘ä¸‹</h3><p>çˆ¶ç»„ä»¶æˆ–å­ç»„ä»¶éƒ½ä¸èƒ½çŸ¥é“æŸä¸ªç»„ä»¶æ˜¯æœ‰çŠ¶æ€è¿˜æ˜¯æ— çŠ¶æ€ï¼Œå¹¶ä¸”å®ƒä»¬ä¸åº”è¯¥å…³å¿ƒæŸç»„ä»¶æ˜¯è¢«å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°è¿˜æ˜¯ä¸€ä¸ªç±»ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆçŠ¶æ€é€šå¸¸è¢«ç§°ä¸ºå±€éƒ¨æˆ–å°è£…ã€‚ é™¤äº†æ‹¥æœ‰å¹¶è®¾ç½®å®ƒçš„ç»„ä»¶å¤–ï¼Œå…¶å®ƒç»„ä»¶ä¸å¯è®¿é—®ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´æ•°æ®åœ¨æ”¹å˜ä¹‹ååªä¼šå½±å“æˆ–æ›´æ–°å½“å‰ç»„ä»¶å’Œä»–çš„å­ç»„ä»¶ã€‚å’Œ Vue çš„ç»„ä»¶æ›´æ–°é¡ºåºåº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚</p>
<blockquote>
<p><strong>æ¸²æŸ“è¿‡ç¨‹ï¼š</strong><br>çˆ¶ç»„ä»¶æŒ‚è½½å®Œæˆä¸€å®šæ˜¯ç­‰å­ç»„ä»¶éƒ½æŒ‚è½½å®Œæˆåï¼Œæ‰ç®—æ˜¯çˆ¶ç»„ä»¶æŒ‚è½½å®Œï¼Œæ‰€ä»¥çˆ¶ç»„ä»¶çš„ mounted åœ¨å­ç»„ä»¶ mouted ä¹‹å<br>çˆ¶ beforeCreate -&gt; çˆ¶ created -&gt; çˆ¶ beforeMount -&gt; å­ beforeCreate -&gt; å­ created -&gt; å­ beforeMount -&gt; å­ mounted -&gt; çˆ¶ mounted</p>
<p><strong>å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹ï¼š</strong></p>
<p>1. å½±å“åˆ°çˆ¶ç»„ä»¶ï¼š çˆ¶ beforeUpdate -&gt; å­ beforeUpdate-&gt;å­ updated -&gt; çˆ¶ updted<br>2. ä¸å½±å“çˆ¶ç»„ä»¶ï¼š å­ beforeUpdate -&gt; å­ updated</p>
<p><strong>çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹ï¼š</strong></p>
<p>1. å½±å“åˆ°å­ç»„ä»¶ï¼š çˆ¶ beforeUpdate -&gt; å­ beforeUpdate-&gt;å­ updated -&gt; çˆ¶ updted<br>2. ä¸å½±å“å­ç»„ä»¶ï¼š çˆ¶ beforeUpdate -&gt; çˆ¶ updated</p>
<p><strong>é”€æ¯è¿‡ç¨‹ï¼š</strong><br>çˆ¶ beforeDestroy -&gt; å­ beforeDestroy -&gt; å­ destroyed -&gt; çˆ¶ destroyed</p>
</blockquote>
<h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><p>å‚è€ƒ <a target="_blank" rel="noopener" href="https://www.runoob.com/react/react-component-life-cycle.html">https://www.runoob.com/react/react-component-life-cycle.html</a></p>
<p>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¯åˆ†æˆä¸‰ä¸ªçŠ¶æ€ï¼š</p>
<ul>
<li>Mountingï¼šå·²æ’å…¥çœŸå® DOM</li>
<li>Updatingï¼šæ­£åœ¨è¢«é‡æ–°æ¸²æŸ“</li>
<li>Unmountingï¼šå·²ç§»å‡ºçœŸå® DOM</li>
</ul>
<p>ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•æœ‰ï¼š</p>
<ul>
<li><strong>componentWillMount</strong> åœ¨æ¸²æŸ“å‰è°ƒç”¨,åœ¨å®¢æˆ·ç«¯ä¹Ÿåœ¨æœåŠ¡ç«¯ã€‚</li>
<li><strong>componentDidMount</strong> : åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“åè°ƒç”¨ï¼Œåªåœ¨å®¢æˆ·ç«¯ã€‚ä¹‹åç»„ä»¶å·²ç»ç”Ÿæˆäº†å¯¹åº”çš„ DOM ç»“æ„ï¼Œå¯ä»¥é€šè¿‡ this.getDOMNode()æ¥è¿›è¡Œè®¿é—®ã€‚ å¦‚æœä½ æƒ³å’Œå…¶ä»– JavaScript æ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨ setTimeout, setInterval æˆ–è€…å‘é€ AJAX è¯·æ±‚ç­‰æ“ä½œ(é˜²æ­¢å¼‚æ­¥æ“ä½œé˜»å¡ UI)ã€‚</li>
<li><strong>componentWillReceiveProps</strong> åœ¨ç»„ä»¶æ¥æ”¶åˆ°ä¸€ä¸ªæ–°çš„ prop (æ›´æ–°å)æ—¶è¢«è°ƒç”¨ã€‚è¿™ä¸ªæ–¹æ³•åœ¨åˆå§‹åŒ– render æ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
<li><strong>shouldComponentUpdate</strong> è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚åœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ props æˆ–è€… state æ—¶è¢«è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶æˆ–è€…ä½¿ç”¨ forceUpdate æ—¶ä¸è¢«è°ƒç”¨ã€‚<br>å¯ä»¥åœ¨ä½ ç¡®è®¤ä¸éœ€è¦æ›´æ–°ç»„ä»¶æ—¶ä½¿ç”¨ã€‚</li>
<li><strong>componentWillUpdate</strong>åœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ props æˆ–è€… state ä½†è¿˜æ²¡æœ‰ render æ—¶è¢«è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
<li><strong>componentDidUpdate</strong> åœ¨ç»„ä»¶å®Œæˆæ›´æ–°åç«‹å³è°ƒç”¨ã€‚åœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
<li><strong>componentWillUnmount</strong>åœ¨ç»„ä»¶ä» DOM ä¸­ç§»é™¤ä¹‹å‰ç«‹åˆ»è¢«è°ƒç”¨ã€‚</li>
</ul>
<h2 id="äº‹ä»¶å¤„ç†"><a href="#äº‹ä»¶å¤„ç†" class="headerlink" title="äº‹ä»¶å¤„ç†"></a>äº‹ä»¶å¤„ç†</h2><ul>
<li>React äº‹ä»¶çš„å‘½åé‡‡ç”¨å°é©¼å³°å¼ï¼ˆcamelCaseï¼‰ï¼Œè€Œä¸æ˜¯çº¯å°å†™ã€‚</li>
<li>ä½¿ç”¨ JSX è¯­æ³•æ—¶ä½ éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œä¼ ç»Ÿçš„ HTMLï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onclick=<span class="string">&quot;activateLasers()&quot;</span>&gt;</span><br><span class="line">  Activate Lasers</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure>
<p>åœ¨ React ä¸­ç•¥å¾®ä¸åŒï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;activateLasers&#125;&gt; Activate Lasers &lt;/button&gt;</span><br></pre></td></tr></table></figure>
<p>å½“ä½ ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes">ES6 class</a> è¯­æ³•å®šä¹‰ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œé€šå¸¸çš„åšæ³•æ˜¯å°†äº‹ä»¶å¤„ç†å‡½æ•°å£°æ˜ä¸º class ä¸­çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ <code>Toggle</code> ç»„ä»¶ä¼šæ¸²æŸ“ä¸€ä¸ªè®©ç”¨æˆ·åˆ‡æ¢å¼€å…³çŠ¶æ€çš„æŒ‰é’®ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Toggle</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;<span class="attr">isToggleOn</span>: <span class="literal">true</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ºäº†åœ¨å›è°ƒä¸­ä½¿ç”¨ `this`ï¼Œè¿™ä¸ªç»‘å®šæ˜¯å¿…ä¸å¯å°‘çš„ã€‚ç»‘å®šæ–¹æ³•åˆ° Toggle ç±»çš„ this ä¸Šã€‚</span></span><br><span class="line">      <span class="built_in">this</span>.handleClick = <span class="built_in">this</span>.handleClick.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.setState(<span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">          isToggleOn: !state.isToggleOn</span><br><span class="line">      &#125;));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button onClick=&#123;<span class="built_in">this</span>.handleClick&#125;&gt;        &#123;<span class="built_in">this</span>.state.isToggleOn ? <span class="string">&#x27;ON&#x27;</span> : <span class="string">&#x27;OFF&#x27;</span>&#125;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Toggle /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>å®˜æ–¹æ–‡æ¡£ä¸­è¿˜ä»‹ç»äº†å…¶ä»–ä¸¤ç§å®éªŒæ€§è¯­æ³•ï¼Œä¸è¿‡è¿˜æ˜¯é€šè¿‡ç»‘å®šåˆ°ç±»ä¸Šæ¯”è¾ƒå¥½ä¸€äº›ã€‚</p>
<h3 id="ä¼ å‚"><a href="#ä¼ å‚" class="headerlink" title="ä¼ å‚"></a>ä¼ å‚</h3><p>åœ¨å¾ªç¯ä¸­ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’é¢å¤–çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œè‹¥ <code>id</code> æ˜¯ä½ è¦åˆ é™¤é‚£ä¸€è¡Œçš„ IDï¼Œä»¥ä¸‹ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥å‘äº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’å‚æ•°ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="built_in">this</span>.deleteRow(id, e)&#125;&gt;Delete Row&lt;/button&gt;</span><br><span class="line">&lt;button onClick=&#123;<span class="built_in">this</span>.deleteRow.bind(<span class="built_in">this</span>, id)&#125;&gt;Delete Row&lt;/button&gt;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼Œåˆ†åˆ«é€šè¿‡<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">ç®­å¤´å‡½æ•°</a>å’Œ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind"><code>Function.prototype.bind</code></a> æ¥å®ç°ã€‚</p>
<p>åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒReact çš„<strong>äº‹ä»¶å¯¹è±¡ <code>e</code></strong> ä¼šè¢«ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ã€‚å¦‚æœé€šè¿‡ç®­å¤´å‡½æ•°çš„æ–¹å¼ï¼Œäº‹ä»¶å¯¹è±¡å¿…é¡»æ˜¾å¼çš„è¿›è¡Œä¼ é€’ï¼Œè€Œé€šè¿‡ <code>bind</code> çš„æ–¹å¼ï¼Œäº‹ä»¶å¯¹è±¡ä»¥åŠæ›´å¤šçš„å‚æ•°å°†ä¼šè¢«éšå¼çš„è¿›è¡Œä¼ é€’ã€‚</p>
<h2 id="æ¡ä»¶æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“" class="headerlink" title="æ¡ä»¶æ¸²æŸ“"></a>æ¡ä»¶æ¸²æŸ“</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">UserGreeting</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome back!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GuestGreeting</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Please sign up.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Greeting</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> isLoggedIn = props.isLoggedIn;</span><br><span class="line">  <span class="keyword">if</span> (isLoggedIn) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">UserGreeting</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">GuestGreeting</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="comment">// Try changing to isLoggedIn=&#123;true&#125;:</span></span><br><span class="line">  &lt;Greeting isLoggedIn=&#123;<span class="literal">false</span>&#125; /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œé€šè¿‡å‚æ•°ä¼ é€’åˆ° <code>Greeting</code> ç»„ä»¶ï¼Œé€šè¿‡ <code>if</code> è¯­å¥è¿”å›ä¸åŒçš„å­ç»„ä»¶ã€‚é€šè¿‡ä¸åŒçš„å­ç»„ä»¶å»å®ç°æ¡ä»¶æ¸²æŸ“ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginControl</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.handleLoginClick = <span class="built_in">this</span>.handleLoginClick.bind(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">this</span>.handleLogoutClick = <span class="built_in">this</span>.handleLogoutClick.bind(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;<span class="attr">isLoggedIn</span>: <span class="literal">false</span>&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æä¾›æ–¹æ³•ä¿®æ”¹ stateã€‚</span></span><br><span class="line">  <span class="function"><span class="title">handleLoginClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;<span class="attr">isLoggedIn</span>: <span class="literal">true</span>&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleLogoutClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;<span class="attr">isLoggedIn</span>: <span class="literal">false</span>&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> isLoggedIn = <span class="built_in">this</span>.state.isLoggedIn;</span><br><span class="line">    <span class="keyword">let</span> button;</span><br><span class="line">     <span class="comment">// å˜é‡æ ¹æ®ä¸åŒæƒ…å†µèµ‹å€¼ï¼Œç„¶åç›´æ¥ä½¿ç”¨ï¼Œé¿å…ä»£ç å†—ä½™ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (isLoggedIn) &#123;</span><br><span class="line">      button = <span class="xml"><span class="tag">&lt;<span class="name">LogoutButton</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleLogoutClick&#125;</span> /&gt;</span></span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      button = <span class="xml"><span class="tag">&lt;<span class="name">LoginButton</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleLoginClick&#125;</span> /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Greeting isLoggedIn=&#123;isLoggedIn&#125; /&gt;</span><br><span class="line">        &#123;button&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;LoginControl /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯<strong>æœ‰çŠ¶æ€ç»„ä»¶</strong>çš„è¯é€šè¿‡çŠ¶æ€ä¹Ÿæ˜¯å¯ä»¥å®ç°ã€‚é€šè¿‡å°†å…ƒç´ ä¿å­˜ä¸ºå˜é‡å»ä½¿ç”¨ï¼Œå‡å°‘ä»£ç çš„ç¹çã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Mailbox</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> unreadMessages = props.unreadMessages;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;Hello!&lt;/h1&gt;</span><br><span class="line">      &#123;unreadMessages.length &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        &lt;h2&gt;</span><br><span class="line">          You have &#123;unreadMessages.length&#125; unread messages.</span><br><span class="line">        &lt;/h2&gt;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> messages = [<span class="string">&#x27;React&#x27;</span>, <span class="string">&#x27;Re: React&#x27;</span>, <span class="string">&#x27;Re:Re: React&#x27;</span>];</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Mailbox unreadMessages=&#123;messages&#125; /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>&#123;&#125;</code> ä¸­ç¼–è¾‘ JavaScript è¡¨è¾¾å¼ï¼Œå¯ä»¥ä½¿ç”¨ &amp;&amp; || ä¸‰ç›®è¿ç®—ç¬¦ç­‰è¿ç®—ç¬¦ï¼Œç»“åˆ JSX å®Œæˆæ¡ä»¶æ¸²æŸ“ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> isLoggedIn = <span class="built_in">this</span>.state.isLoggedIn;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;isLoggedIn</span><br><span class="line">        ? <span class="xml"><span class="tag">&lt;<span class="name">LogoutButton</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleLogoutClick&#125;</span> /&gt;</span></span></span><br><span class="line">        : <span class="xml"><span class="tag">&lt;<span class="name">LoginButton</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleLoginClick&#125;</span> /&gt;</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å†™è™½ç„¶ä¹ŸæŒºå¥½çš„ï¼Œä½†æ˜¯å¯è¯»æ€§ä¸å¤ªè¡Œï¼Œä½†æ˜¯æ›´åŠ çš„ç®€æ´ã€‚</p>
<h3 id="é˜»æ­¢ç»„ä»¶æ¸²æŸ“"><a href="#é˜»æ­¢ç»„ä»¶æ¸²æŸ“" class="headerlink" title="é˜»æ­¢ç»„ä»¶æ¸²æŸ“"></a>é˜»æ­¢ç»„ä»¶æ¸²æŸ“</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">WarningBanner</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!props.warn) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;warning&quot;</span>&gt;</span><br><span class="line">      Warning!</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Page</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;<span class="attr">showWarning</span>: <span class="literal">true</span>&#125;;</span><br><span class="line">    <span class="built_in">this</span>.handleToggleClick = <span class="built_in">this</span>.handleToggleClick.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleToggleClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(<span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">      showWarning: !state.showWarning</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;WarningBanner warn=&#123;<span class="built_in">this</span>.state.showWarning&#125; /&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="built_in">this</span>.handleToggleClick&#125;&gt;</span><br><span class="line">          &#123;<span class="built_in">this</span>.state.showWarning ? <span class="string">&#x27;Hide&#x27;</span> : <span class="string">&#x27;Show&#x27;</span>&#125;</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Page /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªå®ä¾‹ä¸­ï¼Œé€šè¿‡å¯¹å‚æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè¿”å› <code>null</code>ï¼Œå³å¯é˜»æ­¢ç»„ä»¶æ¸²æŸ“ï¼Œ</p>
<blockquote>
<p>åœ¨ç»„ä»¶çš„ <code>render</code> æ–¹æ³•ä¸­è¿”å› <code>null</code> å¹¶ä¸ä¼šå½±å“ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¾‹å¦‚ï¼Œä¸Šé¢è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>componentDidUpdate</code> ä¾ç„¶ä¼šè¢«è°ƒç”¨ã€‚</p>
</blockquote>
<p>æ„æ€åº”è¯¥æ˜¯è¿”å› <code>null</code> åªæ˜¯ä¼šä¸æ¸²æŸ“è¿™ä¸ªç»„ä»¶è€Œå·²ï¼Œä¾ç„¶ä¼šå®Œæ•´èµ°å®Œæ•´ä¸ª Mountingã€Updatingã€Unmounting çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h2 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> listItems = numbers.map(<span class="function">(<span class="params">number</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;number&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>);</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŠŠæ•´ä¸ª <code>listItems</code> æ’å…¥åˆ° <code>&lt;ul&gt;</code> å…ƒç´ ä¸­ï¼Œç„¶å<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/rendering-elements.html#rendering-an-element-into-the-dom">æ¸²æŸ“è¿› DOM</a>ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;ul&gt;&#123;listItems&#125;&lt;/ul&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>å°†è¿™ä¸ªæ–¹æ³•æ•´åˆè¿›ä¸€ä¸ªç»„ä»¶å†…ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ªç»„ä»¶å¿«é€Ÿç”Ÿæˆåˆ—è¡¨å½¢å¼ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NumberList</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> numbers = props.numbers;</span><br><span class="line">  <span class="keyword">const</span> listItems = numbers.map(<span class="function">(<span class="params">number</span>) =&gt;</span></span><br><span class="line">    &lt;li key=&#123;number.toString()&#125;&gt;</span><br><span class="line">      &#123;number&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ul&gt;&#123;listItems&#125;&lt;/ul&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;NumberList numbers=&#123;numbers&#125; /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>key æ˜¯ä¸€ä¸ªåˆ—è¡¨ä¸­å…ƒç´ çš„å”¯ä¸€æ ‡è¯†ï¼Œé€šè¿‡ key æ ‡è®°å¯ä»¥å¸®åŠ© react å¿«é€Ÿå®šä½å…ƒç´ ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚Vue ä¸­çš„ for å¾ªç¯ä¹Ÿæœ‰ç±»ä¼¼çš„è®¾è®¡ï¼Œåœ¨å¤§å‹åˆ—è¡¨ä¸­å¾ˆæœ‰æ•ˆã€‚</p>
<p>å¦‚æœåˆ—è¡¨ä¸­ä¸åŒ…å«å”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥ä½¿ç”¨ åˆ—è¡¨ç´¢å¼• Index æ¥æ ‡è¯†ã€‚ä½†æ˜¯æœ€å¥½ä¸è¦ï¼Œæ‰€ä»¥åç«¯è¿”å›æ•°æ®æ—¶é™„å¸¦ä¸€ä¸ªå”¯ä¸€æ ‡è¯†æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p>
<p>å…³äº key å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://medium.com/@robinpokorny/index-as-a-key-is-an-anti-pattern-e0349aece318">https://medium.com/@robinpokorny/index-as-a-key-is-an-anti-pattern-e0349aece318</a></p>
<p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/reconciliation.html#recursing-on-children">https://zh-hans.reactjs.org/docs/reconciliation.html#recursing-on-children</a></p>
<p>å…ƒç´ çš„ key åªæœ‰æ”¾åœ¨å°±è¿‘çš„æ•°ç»„ä¸Šä¸‹æ–‡ä¸­æ‰æœ‰æ„ä¹‰ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®çš„ä½¿ç”¨ key çš„æ–¹å¼</span></span><br><span class="line"><span class="comment">// é€šè¿‡å‡½æ•°å¼ç»„ä»¶è¿”å›æœ€å°åŸºæœ¬å…ƒç´ çš„ JSX</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ListItem</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ­£ç¡®ï¼è¿™é‡Œä¸éœ€è¦æŒ‡å®š keyï¼š</span></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;props.value&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NumberList</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> numbers = props.numbers;</span><br><span class="line">  <span class="keyword">const</span> listItems = numbers.map(<span class="function">(<span class="params">number</span>) =&gt;</span></span><br><span class="line">    <span class="comment">// æ­£ç¡®ï¼key åº”è¯¥åœ¨æ•°ç»„çš„ä¸Šä¸‹æ–‡ä¸­è¢«æŒ‡å®š</span></span><br><span class="line">    &lt;ListItem key=&#123;number.toString()&#125; value=&#123;number&#125; /&gt;</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &#123;listItems&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;NumberList numbers=&#123;numbers&#125; /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼šåœ¨ <code>map()</code> æ–¹æ³•ä¸­çš„å…ƒç´ éœ€è¦è®¾ç½® key å±æ€§ã€‚</p>
<p>JSX å…è®¸åœ¨å¤§æ‹¬å·ä¸­åµŒå…¥ä»»ä½•è¡¨è¾¾å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†…è” <code>map()</code> è¿”å›çš„ç»“æœï¼Œç›¸æ¯”ä¸Šé¢çš„å®ä¾‹å¯ä»¥èŠ‚çœå˜é‡çš„å†…å­˜ç©ºé—´ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NumberList</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> numbers = props.numbers;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &#123;numbers.map(<span class="function">(<span class="params">number</span>) =&gt;</span></span><br><span class="line">         &lt;ListItem key=&#123;number.toString()&#125;</span><br><span class="line">                   value=&#123;number&#125; /&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¡¨å•"><a href="#è¡¨å•" class="headerlink" title="è¡¨å•"></a>è¡¨å•</h2><h3 id="å—æ§ç»„ä»¶"><a href="#å—æ§ç»„ä»¶" class="headerlink" title="å—æ§ç»„ä»¶"></a>å—æ§ç»„ä»¶</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameForm</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;<span class="attr">value</span>: <span class="string">&#x27;&#x27;</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.handleChange = <span class="built_in">this</span>.handleChange.bind(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">this</span>.handleSubmit = <span class="built_in">this</span>.handleSubmit.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleChange</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;<span class="attr">value</span>: event.target.value&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleSubmit</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">    alert(<span class="string">&#x27;æäº¤çš„åå­—: &#x27;</span> + <span class="built_in">this</span>.state.value);</span><br><span class="line">    event.preventDefault();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;form onSubmit=&#123;<span class="built_in">this</span>.handleSubmit&#125;&gt;</span><br><span class="line">        &lt;label&gt;</span><br><span class="line">          åå­—:</span><br><span class="line">          &lt;input type=<span class="string">&quot;text&quot;</span> value=&#123;<span class="built_in">this</span>.state.value&#125; onChange=&#123;<span class="built_in">this</span>.handleChange&#125; /&gt;</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æäº¤&quot;</span> /&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¾ˆå¤šä¸œè¥¿éƒ½å¯ä»¥åšæˆç»„ä»¶ã€‚é€šè¿‡ä»¥ä¸Šä»£ç å°†è¡¨å•å†™æˆå…·æœ‰ state çš„ç»„ä»¶ï¼Œç»‘å®šåˆ°è¡¨å•çš„ <code>value</code> å€¼ï¼Œå°† <code>onChange</code> äº‹ä»¶ç»‘å®šä¸ºç»„ä»¶æ–¹æ³•ã€‚è¿™é‡Œé€šè¿‡ç»‘å®š <code>value</code> å’Œ <code>onChange</code> å®Œæˆäº†ä¸€ä¸ªåŒå‘ç»‘å®šï¼Œå’Œ <code>v-model</code> ç›¸ä¼¼ã€‚</p>
<p>è¿™é‡Œä½¿ç”¨äº† ES6 è®¡ç®—å±æ€§åç§°çš„è¯­æ³•æ›´æ–°ç»™å®šè¾“å…¥åç§°å¯¹åº”çš„ state å€¼ï¼š</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.setState(&#123;</span><br><span class="line">  [name]: value&#125;);</span><br></pre></td></tr></table></figure>
<p>ç­‰åŒ ES5:</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> partialState = &#123;&#125;;</span><br><span class="line">partialState[name] = value; <span class="comment">// è¿™é‡Œå¹¶ä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯å¯¹è±¡çš„é”®åï¼Œä¸Šé¢é‚£ä¸ªä¹Ÿæ˜¯ä¸€æ ·ã€‚</span></span><br><span class="line"><span class="built_in">this</span>.setState(partialState);</span><br></pre></td></tr></table></figure>
<h2 id="çŠ¶æ€æå‡"><a href="#çŠ¶æ€æå‡" class="headerlink" title="çŠ¶æ€æå‡"></a>çŠ¶æ€æå‡</h2><blockquote>
<p>é€šå¸¸ï¼Œå¤šä¸ªç»„ä»¶éœ€è¦åæ˜ ç›¸åŒçš„å˜åŒ–æ•°æ®ï¼Œè¿™æ—¶æˆ‘ä»¬å»ºè®®å°†å…±äº«çŠ¶æ€æå‡åˆ°æœ€è¿‘çš„å…±åŒçˆ¶ç»„ä»¶ä¸­å»ã€‚</p>
</blockquote>
<p>åœ¨ React ä¸­ï¼Œå°†å¤šä¸ªç»„ä»¶ä¸­éœ€è¦å…±äº«çš„ state å‘ä¸Šç§»åŠ¨åˆ°å®ƒä»¬çš„æœ€è¿‘å…±åŒçˆ¶ç»„ä»¶ä¸­ï¼Œä¾¿å¯å®ç°å…±äº« stateã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œçŠ¶æ€æå‡â€ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TemperatureInput</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.handleChange = <span class="built_in">this</span>.handleChange.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleChange</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.props.onTemperatureChange(e.target.value);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> temperature = <span class="built_in">this</span>.props.temperature;</span><br><span class="line">    <span class="keyword">const</span> scale = <span class="built_in">this</span>.props.scale;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;fieldset&gt;</span><br><span class="line">        &lt;legend&gt;Enter temperature <span class="keyword">in</span> &#123;scaleNames[scale]&#125;:&lt;/legend&gt;</span><br><span class="line">        &lt;input value=&#123;temperature&#125;</span><br><span class="line">               onChange=&#123;<span class="built_in">this</span>.handleChange&#125; /&gt;</span><br><span class="line">      &lt;/fieldset&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.handleCelsiusChange = <span class="built_in">this</span>.handleCelsiusChange.bind(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">this</span>.handleFahrenheitChange = <span class="built_in">this</span>.handleFahrenheitChange.bind(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;<span class="attr">temperature</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">scale</span>: <span class="string">&#x27;c&#x27;</span>&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleCelsiusChange</span>(<span class="params">temperature</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;<span class="attr">scale</span>: <span class="string">&#x27;c&#x27;</span>, temperature&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleFahrenheitChange</span>(<span class="params">temperature</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;<span class="attr">scale</span>: <span class="string">&#x27;f&#x27;</span>, temperature&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> scale = <span class="built_in">this</span>.state.scale;</span><br><span class="line">    <span class="keyword">const</span> temperature = <span class="built_in">this</span>.state.temperature;</span><br><span class="line">    <span class="keyword">const</span> celsius = scale === <span class="string">&#x27;f&#x27;</span> ? tryConvert(temperature, toCelsius) : temperature;</span><br><span class="line">    <span class="keyword">const</span> fahrenheit = scale === <span class="string">&#x27;c&#x27;</span> ? tryConvert(temperature, toFahrenheit) : temperature;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;TemperatureInput</span><br><span class="line">          scale=<span class="string">&quot;c&quot;</span></span><br><span class="line">          temperature=&#123;celsius&#125;</span><br><span class="line">          onTemperatureChange=&#123;<span class="built_in">this</span>.handleCelsiusChange&#125; /&gt;</span><br><span class="line">        &lt;TemperatureInput</span><br><span class="line">          scale=<span class="string">&quot;f&quot;</span></span><br><span class="line">          temperature=&#123;fahrenheit&#125;</span><br><span class="line">          onTemperatureChange=&#123;<span class="built_in">this</span>.handleFahrenheitChange&#125; /&gt;</span><br><span class="line">        &lt;BoilingVerdict</span><br><span class="line">          celsius=&#123;<span class="built_in">parseFloat</span>(celsius)&#125; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªçŠ¶æ€æå‡ç®—æ˜¯ä¸€ç§æ€æƒ³ï¼Œå¦‚æœæŸä¸€ç»„ä»¶éœ€è¦é‡å¤å¤šæ¬¡ä½¿ç”¨ï¼ŒåŒæ—¶æŸä¸€å±æ€§å…·æœ‰ä¸€å®šçš„å…±äº«æ€§ï¼Œå°±å¯ä»¥é€šè¿‡å°†å±æ€§æå‡åˆ°çˆ¶ç»„ä»¶å†…ï¼Œå°†ä¸¤ä¸ªå­ç»„ä»¶çš„å…±äº«å†…å®¹åŒæ­¥ã€‚</p>
<p>åœ¨ React åº”ç”¨ä¸­ï¼Œ<strong>ä»»ä½•å¯å˜æ•°æ®åº”å½“åªæœ‰ä¸€ä¸ªç›¸å¯¹åº”çš„å”¯ä¸€â€œæ•°æ®æºâ€ã€‚</strong>é€šå¸¸ï¼Œstate éƒ½æ˜¯é¦–å…ˆæ·»åŠ åˆ°éœ€è¦æ¸²æŸ“æ•°æ®çš„ç»„ä»¶ä¸­å»ã€‚ç„¶åï¼Œå¦‚æœå…¶ä»–ç»„ä»¶ä¹Ÿéœ€è¦è¿™ä¸ª stateï¼Œé‚£ä¹ˆä½ å¯ä»¥å°†å®ƒæå‡è‡³è¿™äº›ç»„ä»¶çš„æœ€è¿‘å…±åŒçˆ¶ç»„ä»¶ä¸­ã€‚ä½ åº”å½“ä¾é <a target="_blank" rel="noopener" href="https://react.docschina.org/docs/state-and-lifecycle.html#the-data-flows-down">è‡ªä¸Šè€Œä¸‹çš„æ•°æ®æµ</a>ï¼Œè€Œä¸æ˜¯å°è¯•åœ¨ä¸åŒç»„ä»¶é—´åŒæ­¥ stateã€‚</p>
<p>è™½ç„¶æå‡ state æ–¹å¼æ¯”åŒå‘ç»‘å®šæ–¹å¼éœ€è¦ç¼–å†™æ›´å¤šçš„â€œæ ·æ¿â€ä»£ç ï¼Œä½†å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼Œæ’æŸ¥å’Œéš”ç¦» bug æ‰€éœ€çš„å·¥ä½œé‡å°†ä¼šå˜å°‘ã€‚ç”±äºâ€œå­˜åœ¨â€äºç»„ä»¶ä¸­çš„ä»»ä½• stateï¼Œä»…æœ‰ç»„ä»¶è‡ªå·±èƒ½å¤Ÿä¿®æ”¹å®ƒï¼Œå› æ­¤ bug çš„æ’æŸ¥èŒƒå›´è¢«å¤§å¤§ç¼©å‡äº†ã€‚æ­¤å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰é€»è¾‘æ¥æ‹’ç»æˆ–è½¬æ¢ç”¨æˆ·çš„è¾“å…¥ã€‚</p>
<h2 id="ç»„åˆä¸ç»§æ‰¿"><a href="#ç»„åˆä¸ç»§æ‰¿" class="headerlink" title="ç»„åˆä¸ç»§æ‰¿"></a>ç»„åˆä¸ç»§æ‰¿</h2><h3 id="ç»„åˆ"><a href="#ç»„åˆ" class="headerlink" title="ç»„åˆ"></a>ç»„åˆ</h3><p>æœ‰äº›ç»„ä»¶æ— æ³•æå‰çŸ¥æ™“å®ƒä»¬å­ç»„ä»¶çš„å…·ä½“å†…å®¹ã€‚åœ¨ <code>Sidebar</code>ï¼ˆä¾§è¾¹æ ï¼‰å’Œ <code>Dialog</code>ï¼ˆå¯¹è¯æ¡†ï¼‰ç­‰å±•ç°é€šç”¨å®¹å™¨ï¼ˆboxï¼‰çš„ç»„ä»¶ä¸­ç‰¹åˆ«å®¹æ˜“é‡åˆ°è¿™ç§æƒ…å†µã€‚</p>
<p>æˆ‘ä»¬å»ºè®®è¿™äº›ç»„ä»¶ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„ <code>children</code> prop æ¥å°†ä»–ä»¬çš„å­ç»„ä»¶ä¼ é€’åˆ°æ¸²æŸ“ç»“æœä¸­ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyBorder</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;<span class="string">&#x27;FancyBorder FancyBorder-&#x27;</span> + props.color&#125;&gt;</span><br><span class="line">      &#123;props.children&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä½¿å¾—åˆ«çš„ç»„ä»¶å¯ä»¥é€šè¿‡ JSX åµŒå¥—ï¼Œå°†ä»»æ„ç»„ä»¶ä½œä¸ºå­ç»„ä»¶ä¼ é€’ç»™å®ƒä»¬ã€‚</p>
<p>å°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ä¸€ä¸ªç»„ä»¶ä¸­é¢„ç•™å‡ºå‡ ä¸ªâ€œæ´â€ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä½¿ç”¨ <code>children</code>ï¼Œè€Œæ˜¯è‡ªè¡Œçº¦å®šï¼šå°†æ‰€éœ€å†…å®¹ä¼ å…¥ propsï¼Œå¹¶ä½¿ç”¨ç›¸åº”çš„ propã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SplitPane</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;SplitPane&quot;</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;SplitPane-left&quot;</span>&gt;</span><br><span class="line">        &#123;props.left&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div className=<span class="string">&quot;SplitPane-right&quot;</span>&gt;</span><br><span class="line">        &#123;props.right&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;SplitPane</span><br><span class="line">      left=&#123;</span><br><span class="line">        &lt;Contacts /&gt;</span><br><span class="line">      &#125;</span><br><span class="line">      right=&#123;</span><br><span class="line">        &lt;Chat /&gt;</span><br><span class="line">      &#125; /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯´åˆ°åº•è¿˜æ˜¯ JSX è¿™ä¸ªæ ¼å¼å¤ªçµæ´»äº†ã€‚</p>
<blockquote>
<p>è¿™ç§æ–¹æ³•å¯èƒ½ä½¿ä½ æƒ³èµ·åˆ«çš„åº“ä¸­â€œæ§½â€ï¼ˆslotï¼‰çš„æ¦‚å¿µï¼Œä½†åœ¨ React ä¸­æ²¡æœ‰â€œæ§½â€è¿™ä¸€æ¦‚å¿µçš„é™åˆ¶ï¼Œä½ å¯ä»¥å°†ä»»ä½•ä¸œè¥¿ä½œä¸º props è¿›è¡Œä¼ é€’ã€‚</p>
<p>åˆ°å¤„éƒ½æœ‰ diss å‹å•†</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dialog</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;FancyBorder color=<span class="string">&quot;blue&quot;</span>&gt;</span><br><span class="line">      &lt;h1 className=<span class="string">&quot;Dialog-title&quot;</span>&gt;</span><br><span class="line">        &#123;props.title&#125;</span><br><span class="line">      &lt;/h1&gt;</span><br><span class="line">      &lt;p className=<span class="string">&quot;Dialog-message&quot;</span>&gt;</span><br><span class="line">        &#123;props.message&#125;</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">      &#123;props.children&#125;</span><br><span class="line">    &lt;/FancyBorder&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SignUpDialog</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.handleChange = <span class="built_in">this</span>.handleChange.bind(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">this</span>.handleSignUp = <span class="built_in">this</span>.handleSignUp.bind(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;<span class="attr">login</span>: <span class="string">&#x27;&#x27;</span>&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Dialog title=<span class="string">&quot;Mars Exploration Program&quot;</span></span><br><span class="line">              message=<span class="string">&quot;How should we refer to you?&quot;</span>&gt;</span><br><span class="line">        &lt;input value=&#123;<span class="built_in">this</span>.state.login&#125;</span><br><span class="line">               onChange=&#123;<span class="built_in">this</span>.handleChange&#125; /&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="built_in">this</span>.handleSignUp&#125;&gt;</span><br><span class="line">          Sign Me Up!</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/Dialog&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleChange</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;<span class="attr">login</span>: e.target.value&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleSignUp</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    alert(<span class="string">`Welcome aboard, <span class="subst">$&#123;<span class="built_in">this</span>.state.login&#125;</span>!`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>class ç»„ä»¶ä¹Ÿæ˜¯å¯ä»¥ç»„åˆçš„ã€‚ä¸Šé¢çš„ <code>Dialog</code> æ˜¯é‚£ä¸ªç»„ä»¶ï¼Œå¹¶ä¸å­˜åœ¨è¿™ä¸ªæ ‡ç­¾çš„ã€‚<code>FancyBorder</code> æ˜¯æœ€ä¸Šé¢çš„é‚£ä¸ªç»„ä»¶ã€‚</p>
<h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>åœ¨ Facebookï¼Œæˆ‘ä»¬åœ¨æˆç™¾ä¸Šåƒä¸ªç»„ä»¶ä¸­ä½¿ç”¨ Reactã€‚æˆ‘ä»¬å¹¶æ²¡æœ‰å‘ç°éœ€è¦ä½¿ç”¨ç»§æ‰¿æ¥æ„å»ºç»„ä»¶å±‚æ¬¡çš„æƒ…å†µã€‚</p>
<p>Props å’Œç»„åˆä¸ºä½ æä¾›äº†æ¸…æ™°è€Œå®‰å…¨åœ°å®šåˆ¶ç»„ä»¶å¤–è§‚å’Œè¡Œä¸ºçš„çµæ´»æ–¹å¼ã€‚æ³¨æ„ï¼šç»„ä»¶å¯ä»¥æ¥å—ä»»æ„ propsï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒReact å…ƒç´ ä»¥åŠå‡½æ•°ã€‚</p>
<p>å¦‚æœä½ æƒ³è¦åœ¨ç»„ä»¶é—´å¤ç”¨é UI çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å»ºè®®å°†å…¶æå–ä¸ºä¸€ä¸ªå•ç‹¬çš„ JavaScript æ¨¡å—ï¼Œå¦‚å‡½æ•°ã€å¯¹è±¡æˆ–è€…ç±»ã€‚ç»„ä»¶å¯ä»¥ç›´æ¥å¼•å…¥ï¼ˆimportï¼‰è€Œæ— éœ€é€šè¿‡ extend ç»§æ‰¿å®ƒä»¬ã€‚</p>
<h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>è¿™ä¹ˆç‰›çš®çš„æ¡†æ¶ä¸éœ€è¦ç»„ä»¶ç»§æ‰¿</p>
<h1 id="é«˜çº§ä¸€ç‚¹çš„-React-æ–‡æ¡£"><a href="#é«˜çº§ä¸€ç‚¹çš„-React-æ–‡æ¡£" class="headerlink" title="é«˜çº§ä¸€ç‚¹çš„ React æ–‡æ¡£"></a>é«˜çº§ä¸€ç‚¹çš„ React æ–‡æ¡£</h1><h2 id="æ— éšœç¢"><a href="#æ— éšœç¢" class="headerlink" title="æ— éšœç¢"></a>æ— éšœç¢</h2><p>è¿™é‡Œçš„æ— éšœç¢æ›´å¤šçš„è¿˜æ˜¯å¯¹ Aria çš„æ”¯æŒï¼Œå¹¶åœ¨ react ä¸­ä½¿ç”¨åŸç”Ÿçš„ HTML çš„å¸¦è¿å­—ç¬¦çš„å‘½åæ³•ã€‚</p>
<p>æœ‰æ—¶ï¼Œè¯­ä¹‰åŒ–çš„ HTML ä¼šè¢«ç ´åã€‚æ¯”å¦‚å½“åœ¨ JSX ä¸­ä½¿ç”¨ <code>&lt;div&gt;</code> å…ƒç´ æ¥å®ç° React ä»£ç åŠŸèƒ½çš„æ—¶å€™ï¼Œåˆæˆ–æ˜¯åœ¨ä½¿ç”¨åˆ—è¡¨ï¼ˆ<code>&lt;ol&gt;</code>ï¼Œ <code>&lt;ul&gt;</code> å’Œ <code>&lt;dl&gt;</code>ï¼‰å’Œ HTML <code>&lt;table&gt;</code> æ—¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://react.docschina.org/docs/fragments.html">React Fragments</a> æ¥ç»„åˆå„ä¸ªç»„ä»¶ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œ</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Fragment &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ListItem</span>(<span class="params">&#123; item &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Fragment&gt;</span><br><span class="line">      &lt;dt&gt;&#123;item.term&#125;&lt;/dt&gt;</span><br><span class="line">      &lt;dd&gt;&#123;item.description&#125;&lt;/dd&gt;</span><br><span class="line">    &lt;/Fragment&gt;  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Glossary</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;dl&gt;</span><br><span class="line">      &#123;props.items.map(<span class="function"><span class="params">item</span> =&gt;</span> (</span><br><span class="line">        &lt;ListItem item=&#123;item&#125; key=&#123;item.id&#125; /&gt;</span><br><span class="line">      ))&#125;</span><br><span class="line">    &lt;/dl&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ListItem</span>(<span class="params">&#123; item &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;dt&gt;&#123;item.term&#125;&lt;/dt&gt;</span><br><span class="line">      &lt;dd&gt;&#123;item.description&#125;&lt;/dd&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ <code>&lt;Fragment&gt;</code> æ ‡ç­¾å¹¶ä¸æ˜¯ä¸€ä¸ªå®ä½“æ ‡ç­¾ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªç©ºæ ‡ç­¾ï¼Œç”±äº JSX éœ€è¦è¿”å›çš„æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨ <code>&lt;div&gt;</code> æ¥åŒ…è£¹ä½è‡ªå·±çš„ç»„ä»¶ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™éœ€è¦è¿”å›å¤šä¸ªåŒçº§æ ‡ç­¾ï¼Œä½¿ç”¨ <code>&lt;div&gt;</code> ä¼šç ´åç»“æ„ï¼Œå°±éœ€è¦ä½¿ç”¨ <code>&lt;Fragment&gt;</code> æ ‡ç­¾æ¥åŒ…è£¹ã€‚ç®€å†™ä¸º <code>&lt;&gt;</code>ã€‚</p>
<h2 id="ä»£ç åˆ†éš”"><a href="#ä»£ç åˆ†éš”" class="headerlink" title="ä»£ç åˆ†éš”"></a>ä»£ç åˆ†éš”</h2><p>åœ¨ä½ çš„åº”ç”¨ä¸­å¼•å…¥ä»£ç åˆ†å‰²çš„æœ€ä½³æ–¹å¼æ˜¯é€šè¿‡åŠ¨æ€ <code>import()</code> è¯­æ³•ã€‚</p>
<p><strong>ä½¿ç”¨ä¹‹å‰ï¼š</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&#x27;./math&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">16</span>, <span class="number">26</span>));</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨ä¹‹åï¼š</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&quot;./math&quot;</span>).then(<span class="function"><span class="params">math</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(math.add(<span class="number">16</span>, <span class="number">26</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å½“ Webpack è§£æåˆ°è¯¥è¯­æ³•æ—¶ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œä»£ç åˆ†å‰²ã€‚å¦‚æœä½ ä½¿ç”¨ Create React Appï¼Œè¯¥åŠŸèƒ½å·²å¼€ç®±å³ç”¨ï¼Œä½ å¯ä»¥<a target="_blank" rel="noopener" href="https://facebook.github.io/create-react-app/docs/code-splitting">ç«‹åˆ»ä½¿ç”¨</a>è¯¥ç‰¹æ€§ã€‚<a target="_blank" rel="noopener" href="https://nextjs.org/docs/advanced-features/dynamic-import">Next.js</a> ä¹Ÿå·²æ”¯æŒè¯¥ç‰¹æ€§è€Œæ— éœ€è¿›è¡Œé…ç½®ã€‚</p>
<h3 id="React-lazy"><a href="#React-lazy" class="headerlink" title="React.lazy()"></a><code>React.lazy()</code></h3><p><code>React.lazy</code> å‡½æ•°èƒ½è®©ä½ åƒæ¸²æŸ“å¸¸è§„ç»„ä»¶ä¸€æ ·å¤„ç†åŠ¨æ€å¼•å…¥ï¼ˆçš„ç»„ä»¶ï¼‰ã€‚</p>
<p><strong>ä½¿ç”¨ä¹‹å‰ï¼š</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> OtherComponent <span class="keyword">from</span> <span class="string">&#x27;./OtherComponent&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨ä¹‹åï¼š</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OtherComponent = React.lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./OtherComponent&#x27;</span>));</span><br></pre></td></tr></table></figure>
<p>æ­¤ä»£ç å°†ä¼šåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œè‡ªåŠ¨å¯¼å…¥åŒ…å« <code>OtherComponent</code> ç»„ä»¶çš„åŒ…ã€‚</p>
<p><code>React.lazy</code> æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦åŠ¨æ€è°ƒç”¨ <code>import()</code>ã€‚å®ƒå¿…é¡»è¿”å›ä¸€ä¸ª <code>Promise</code>ï¼Œè¯¥ Promise éœ€è¦ resolve ä¸€ä¸ª <code>defalut</code> export çš„ React ç»„ä»¶ã€‚</p>
<p>ç„¶ååº”åœ¨ <code>Suspense</code> ç»„ä»¶ä¸­æ¸²æŸ“ lazy ç»„ä»¶ï¼Œå¦‚æ­¤ä½¿å¾—æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åœ¨ç­‰å¾…åŠ è½½ lazy ç»„ä»¶æ—¶åšä¼˜é›…é™çº§ï¼ˆå¦‚ loading æŒ‡ç¤ºå™¨ç­‰ï¼‰ã€‚</p>
<p><code>fallback</code> å±æ€§æ¥å—ä»»ä½•åœ¨ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­ä½ æƒ³å±•ç¤ºçš„ React å…ƒç´ ã€‚ä½ å¯ä»¥å°† <code>Suspense</code> ç»„ä»¶ç½®äºæ‡’åŠ è½½ç»„ä»¶ä¹‹ä¸Šçš„ä»»ä½•ä½ç½®ã€‚ä½ ç”šè‡³å¯ä»¥ç”¨ä¸€ä¸ª <code>Suspense</code> ç»„ä»¶åŒ…è£¹å¤šä¸ªæ‡’åŠ è½½ç»„ä»¶ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Suspense &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>; <span class="comment">// æ³¨æ„ Suspense æ˜¯å®˜æ–¹çš„ä¸€ä¸ªç»„ä»¶ã€‚æä¾› fallback å±æ€§ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> OtherComponent = React.lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./OtherComponent&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> AnotherComponent = React.lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./AnotherComponent&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Suspense fallback=&#123;<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;&gt;</span><br><span class="line">        &lt;section&gt;</span><br><span class="line">          &lt;OtherComponent /&gt;</span><br><span class="line">          &lt;AnotherComponent /&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">      &lt;/Suspense&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²"><a href="#åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²" class="headerlink" title="åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²"></a>åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²</h3><p>å†³å®šåœ¨å“ªå¼•å…¥ä»£ç åˆ†å‰²éœ€è¦ä¸€äº›æŠ€å·§ã€‚ä½ éœ€è¦ç¡®ä¿é€‰æ‹©çš„ä½ç½®èƒ½å¤Ÿå‡åŒ€åœ°åˆ†å‰²ä»£ç åŒ…è€Œä¸ä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>ä¸€ä¸ªä¸é”™çš„é€‰æ‹©æ˜¯ä»è·¯ç”±å¼€å§‹ã€‚å¤§å¤šæ•°ç½‘ç»œç”¨æˆ·ä¹ æƒ¯äºé¡µé¢ä¹‹é—´èƒ½æœ‰ä¸ªåŠ è½½åˆ‡æ¢è¿‡ç¨‹ã€‚ä½ ä¹Ÿå¯ä»¥é€‰æ‹©é‡æ–°æ¸²æŸ“æ•´ä¸ªé¡µé¢ï¼Œè¿™æ ·æ‚¨çš„ç”¨æˆ·å°±ä¸å¿…åœ¨æ¸²æŸ“çš„åŒæ—¶å†å’Œé¡µé¢ä¸Šçš„å…¶ä»–å…ƒç´ è¿›è¡Œäº¤äº’ã€‚</p>
<p>è¿™é‡Œæ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ <code>React.lazy</code> å’Œ <a target="_blank" rel="noopener" href="https://react-router.docschina.org/">React Router</a> è¿™ç±»çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ¥é…ç½®åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Suspense, lazy &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; BrowserRouter <span class="keyword">as</span> Router, Route, Switch &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Home = lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./routes/Home&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> About = lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./routes/About&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> App = <span class="function">() =&gt;</span> (</span><br><span class="line">  &lt;Router&gt;</span><br><span class="line">    &lt;Suspense fallback=&#123;<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;&gt;</span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &lt;Route exact path=<span class="string">&quot;/&quot;</span> component=&#123;Home&#125;/&gt;</span><br><span class="line">        &lt;Route path=<span class="string">&quot;/about&quot;</span> component=&#123;About&#125;/&gt;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">    &lt;/Suspense&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="å‘½åå¯¼å‡ºï¼ˆNamed-Exportsï¼‰"><a href="#å‘½åå¯¼å‡ºï¼ˆNamed-Exportsï¼‰" class="headerlink" title="å‘½åå¯¼å‡ºï¼ˆNamed Exportsï¼‰"></a>å‘½åå¯¼å‡ºï¼ˆNamed Exportsï¼‰</h3><p><code>React.lazy</code> ç›®å‰åªæ”¯æŒé»˜è®¤å¯¼å‡ºï¼ˆdefault exportsï¼‰ã€‚å¦‚æœä½ æƒ³è¢«å¼•å…¥çš„æ¨¡å—ä½¿ç”¨å‘½åå¯¼å‡ºï¼ˆnamed exportsï¼‰ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸­é—´æ¨¡å—ï¼Œæ¥é‡æ–°å¯¼å‡ºä¸ºé»˜è®¤æ¨¡å—ã€‚è¿™èƒ½ä¿è¯ tree shaking ä¸ä¼šå‡ºé”™ï¼Œå¹¶ä¸”ä¸å¿…å¼•å…¥ä¸éœ€è¦çš„ç»„ä»¶ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ManyComponents.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> MyComponent = <span class="comment">/* ... */</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> MyUnusedComponent = <span class="comment">/* ... */</span>;</span><br><span class="line"><span class="comment">// MyComponent.js è¿™ä¸ªå°±æ˜¯ä¸­é—´æ¨¡å—ï¼Œç”±äºä¸Šé¢çš„æ¨¡å—æ˜¯å‘½åå¯¼å‡ºï¼Œä¸èƒ½ç”¨äº lazy() å‡½æ•°ï¼Œé€šè¿‡ä¸­é—´æ¨¡å—å†å¯¼å‡ºå³å¯ã€‚</span></span><br><span class="line"><span class="keyword">export</span> &#123; MyComponent <span class="keyword">as</span> <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./ManyComponents.js&quot;</span>;</span><br><span class="line"><span class="comment">// MyApp.js</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; lazy &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> MyComponent = lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./MyComponent.js&quot;</span>));</span><br></pre></td></tr></table></figure>
<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><p>Context è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†å…±äº«é‚£äº›å¯¹äºä¸€ä¸ªç»„ä»¶æ ‘è€Œè¨€æ˜¯â€œå…¨å±€â€çš„æ•°æ®ï¼Œä¾‹å¦‚å½“å‰è®¤è¯çš„ç”¨æˆ·ã€ä¸»é¢˜æˆ–é¦–é€‰è¯­è¨€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ª â€œthemeâ€ å±æ€§æ‰‹åŠ¨è°ƒæ•´ä¸€ä¸ªæŒ‰é’®ç»„ä»¶çš„æ ·å¼ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Toolbar</span> <span class="attr">theme</span>=<span class="string">&quot;dark&quot;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Toolbar</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Toolbar ç»„ä»¶æ¥å—ä¸€ä¸ªé¢å¤–çš„â€œthemeâ€å±æ€§ï¼Œç„¶åä¼ é€’ç»™ ThemedButton ç»„ä»¶ã€‚</span></span><br><span class="line">    <span class="comment">// å¦‚æœåº”ç”¨ä¸­æ¯ä¸€ä¸ªå•ç‹¬çš„æŒ‰é’®éƒ½éœ€è¦çŸ¥é“ theme çš„å€¼ï¼Œè¿™ä¼šæ˜¯ä»¶å¾ˆéº»çƒ¦çš„äº‹ï¼Œ</span></span><br><span class="line">    <span class="comment">// å› ä¸ºå¿…é¡»å°†è¿™ä¸ªå€¼å±‚å±‚ä¼ é€’æ‰€æœ‰ç»„ä»¶ã€‚</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;ThemedButton theme=&#123;props.theme&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThemedButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">theme</span>=<span class="string">&#123;this.props.theme&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ context, æˆ‘ä»¬å¯ä»¥é¿å…é€šè¿‡ä¸­é—´å…ƒç´ ä¼ é€’ propsï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Context å¯ä»¥è®©æˆ‘ä»¬æ— é¡»æ˜ç¡®åœ°ä¼ éæ¯ä¸€ä¸ªç»„ä»¶ï¼Œå°±èƒ½å°†å€¼æ·±å…¥ä¼ é€’è¿›ç»„ä»¶æ ‘ã€‚</span></span><br><span class="line"><span class="comment">// ä¸ºå½“å‰çš„ theme åˆ›å»ºä¸€ä¸ª contextï¼ˆâ€œlightâ€ä¸ºé»˜è®¤å€¼ï¼‰ã€‚</span></span><br><span class="line"><span class="keyword">const</span> ThemeContext = React.createContext(<span class="string">&#x27;light&#x27;</span>);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ä¸€ä¸ª Provider æ¥å°†å½“å‰çš„ theme ä¼ é€’ç»™ä»¥ä¸‹çš„ç»„ä»¶æ ‘ã€‚</span></span><br><span class="line">    <span class="comment">// æ— è®ºå¤šæ·±ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è¯»å–è¿™ä¸ªå€¼ã€‚</span></span><br><span class="line">    <span class="comment">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°† â€œdarkâ€ ä½œä¸ºå½“å‰çš„å€¼ä¼ é€’ä¸‹å»ã€‚</span></span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">      &lt;ThemeContext.Provider value=<span class="string">&quot;dark&quot;</span>&gt;</span><br><span class="line">          &lt;Toolbar /&gt;</span><br><span class="line">      &lt;/ThemeContext.Provider&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­é—´çš„ç»„ä»¶å†ä¹Ÿä¸å¿…æŒ‡æ˜å¾€ä¸‹ä¼ é€’ theme äº†ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Toolbar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;ThemedButton /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThemedButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  	<span class="comment">// æŒ‡å®š contextType è¯»å–å½“å‰çš„ theme contextã€‚</span></span><br><span class="line">    <span class="comment">// React ä¼šå¾€ä¸Šæ‰¾åˆ°æœ€è¿‘çš„ theme Providerï¼Œç„¶åä½¿ç”¨å®ƒçš„å€¼ã€‚</span></span><br><span class="line">    <span class="comment">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“å‰çš„ theme å€¼ä¸º â€œdarkâ€ã€‚  static contextType = ThemeContext;</span></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">theme</span>=<span class="string">&#123;this.context&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿™ä»£ç æ€»è§‰å¾—é¡ºåºåäº†ã€‚åè¿‡æ¥çœ‹å°±çœ‹çš„å¥½äº›äº†ï¼ŒThemedButton é‡Œé¢ä½¿ç”¨ this.contextï¼Œå‘ä¸Šæ‰¾ Providerï¼Œè·¨è¿‡ Toolbar æ‰¾åˆ° App é‡Œé¢ï¼Œ</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç å¯èƒ½ä¸å¤ªå¥½ç†è§£ï¼Œå…³é”®ç‚¹åœ¨äº <code>React.createContext(&#39;light&#39;);</code> é¦–å…ˆï¼Œè¿™ä¸ª <code>Context</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸‹é¢çš„ <code>&lt;ThemeContext.Provider&gt;</code> æ ‡ç­¾æ˜¯ä¸€ä¸ª <code>Context</code> çš„ <code>Provider</code> ç”¨æ³•ã€‚</p>
<p>å½“ React æ¸²æŸ“ä¸€ä¸ªè®¢é˜…äº†è¿™ä¸ª Context å¯¹è±¡çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¼šä»ç»„ä»¶æ ‘ä¸­ç¦»è‡ªèº«æœ€è¿‘çš„é‚£ä¸ªåŒ¹é…çš„ <code>Provider</code> ä¸­è¯»å–åˆ°å½“å‰çš„ context å€¼ã€‚</p>
<p><strong>åªæœ‰</strong>å½“ç»„ä»¶æ‰€å¤„çš„æ ‘ä¸­æ²¡æœ‰åŒ¹é…åˆ° Provider æ—¶ï¼Œå…¶ <code>defaultValue</code> å‚æ•°æ‰ä¼šç”Ÿæ•ˆã€‚è¿™æœ‰åŠ©äºåœ¨ä¸ä½¿ç”¨ Provider åŒ…è£…ç»„ä»¶çš„æƒ…å†µä¸‹å¯¹ç»„ä»¶è¿›è¡Œæµ‹è¯•ã€‚æ³¨æ„ï¼šå°† <code>undefined</code> ä¼ é€’ç»™ Provider çš„ value æ—¶ï¼Œæ¶ˆè´¹ç»„ä»¶çš„ <code>defaultValue</code> ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<h3 id="Context-Provider"><a href="#Context-Provider" class="headerlink" title="Context.Provider"></a><code>Context.Provider</code></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyContext.Provider value=&#123;<span class="comment">/* æŸä¸ªå€¼ */</span>&#125;&gt;</span><br></pre></td></tr></table></figure>
<p>æ¯ä¸ª Context å¯¹è±¡éƒ½ä¼šè¿”å›ä¸€ä¸ª Provider React ç»„ä»¶ï¼Œå®ƒå…è®¸æ¶ˆè´¹ç»„ä»¶è®¢é˜… context çš„å˜åŒ–ã€‚</p>
<p>Provider æ¥æ”¶ä¸€ä¸ª <code>value</code> å±æ€§ï¼Œä¼ é€’ç»™æ¶ˆè´¹ç»„ä»¶ã€‚ä¸€ä¸ª Provider å¯ä»¥å’Œå¤šä¸ªæ¶ˆè´¹ç»„ä»¶æœ‰å¯¹åº”å…³ç³»ã€‚å¤šä¸ª Provider ä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œé‡Œå±‚çš„ä¼šè¦†ç›–å¤–å±‚çš„æ•°æ®ã€‚</p>
<p>å½“ Provider çš„ <code>value</code> å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒå†…éƒ¨çš„æ‰€æœ‰æ¶ˆè´¹ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚Provider åŠå…¶å†…éƒ¨ consumer ç»„ä»¶éƒ½ä¸å—åˆ¶äº <code>shouldComponentUpdate</code> å‡½æ•°ï¼Œå› æ­¤å½“ consumer ç»„ä»¶åœ¨å…¶ç¥–å…ˆç»„ä»¶é€€å‡ºæ›´æ–°çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ›´æ–°ã€‚</p>
<p>é€šè¿‡æ–°æ—§å€¼æ£€æµ‹æ¥ç¡®å®šå˜åŒ–ï¼Œä½¿ç”¨äº†ä¸ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is#Description"><code>Object.is</code></a> ç›¸åŒçš„ç®—æ³•ã€‚</p>
<blockquote>
<p>Context ä¸»è¦åº”ç”¨åœºæ™¯åœ¨äº<em>å¾ˆå¤š</em>ä¸åŒå±‚çº§çš„ç»„ä»¶éœ€è¦è®¿é—®åŒæ ·ä¸€äº›çš„æ•°æ®ã€‚è¯·è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¼šä½¿å¾—ç»„ä»¶çš„å¤ç”¨æ€§å˜å·®ã€‚</p>
<p><strong>å¦‚æœä½ åªæ˜¯æƒ³é¿å…å±‚å±‚ä¼ é€’ä¸€äº›å±æ€§ï¼Œ<a target="_blank" rel="noopener" href="https://react.docschina.org/docs/composition-vs-inheritance.html">ç»„ä»¶ç»„åˆï¼ˆcomponent compositionï¼‰</a>æœ‰æ—¶å€™æ˜¯ä¸€ä¸ªæ¯” context æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</strong></p>
</blockquote>
<h2 id="é”™è¯¯è¾¹ç•Œ"><a href="#é”™è¯¯è¾¹ç•Œ" class="headerlink" title="é”™è¯¯è¾¹ç•Œ"></a>é”™è¯¯è¾¹ç•Œ</h2><p>é”™è¯¯è¾¹ç•Œæ˜¯ä¸€ç§ React ç»„ä»¶ï¼Œè¿™ç§ç»„ä»¶<strong>å¯ä»¥æ•è·å¹¶æ‰“å°å‘ç”Ÿåœ¨å…¶å­ç»„ä»¶æ ‘ä»»ä½•ä½ç½®çš„ JavaScript é”™è¯¯ï¼Œå¹¶ä¸”ï¼Œå®ƒä¼šæ¸²æŸ“å‡ºå¤‡ç”¨ UI</strong>ï¼Œè€Œä¸æ˜¯æ¸²æŸ“é‚£äº›å´©æºƒäº†çš„å­ç»„ä»¶æ ‘ã€‚é”™è¯¯è¾¹ç•Œåœ¨æ¸²æŸ“æœŸé—´ã€ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œæ•´ä¸ªç»„ä»¶æ ‘çš„æ„é€ å‡½æ•°ä¸­æ•è·é”™è¯¯ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´é”™è¯¯è¾¹ç•Œæ—¨åœ¨æé«˜æ•´ä¸ªç½‘é¡µçš„å®¹é”™ç‡ï¼Œå³ä½¿å‡ºç°é”™è¯¯ä¹Ÿå¯ä»¥é‡‡å–å¤‡ç”¨çš„ç»„ä»¶ã€‚</p>
<blockquote>
<p>æ³¨æ„</p>
<p>é”™è¯¯è¾¹ç•Œ<strong>æ— æ³•</strong>æ•è·ä»¥ä¸‹åœºæ™¯ä¸­äº§ç”Ÿçš„é”™è¯¯ï¼š</p>
<ul>
<li>äº‹ä»¶å¤„ç†ï¼ˆ<a target="_blank" rel="noopener" href="https://react.docschina.org/docs/error-boundaries.html#how-about-event-handlers">äº†è§£æ›´å¤š</a>ï¼‰</li>
<li>å¼‚æ­¥ä»£ç ï¼ˆä¾‹å¦‚ <code>setTimeout</code> æˆ– <code>requestAnimationFrame</code> å›è°ƒå‡½æ•°ï¼‰</li>
<li>æœåŠ¡ç«¯æ¸²æŸ“</li>
<li>å®ƒè‡ªèº«æŠ›å‡ºæ¥çš„é”™è¯¯ï¼ˆå¹¶éå®ƒçš„å­ç»„ä»¶ï¼‰</li>
</ul>
</blockquote>
<p>å¦‚æœä¸€ä¸ª class ç»„ä»¶ä¸­å®šä¹‰äº† <a target="_blank" rel="noopener" href="https://react.docschina.org/docs/react-component.html#static-getderivedstatefromerror"><code>static getDerivedStateFromError()</code></a> æˆ– <a target="_blank" rel="noopener" href="https://react.docschina.org/docs/react-component.html#componentdidcatch"><code>componentDidCatch()</code></a> è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­çš„ä»»æ„ä¸€ä¸ªï¼ˆæˆ–ä¸¤ä¸ªï¼‰æ—¶ï¼Œé‚£ä¹ˆå®ƒå°±å˜æˆä¸€ä¸ªé”™è¯¯è¾¹ç•Œã€‚å½“æŠ›å‡ºé”™è¯¯åï¼Œè¯·ä½¿ç”¨ <code>static getDerivedStateFromError()</code> æ¸²æŸ“å¤‡ç”¨ UI ï¼Œä½¿ç”¨ <code>componentDidCatch()</code> æ‰“å°é”™è¯¯ä¿¡æ¯ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErrorBoundary</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123; <span class="attr">hasError</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">getDerivedStateFromError</span>(<span class="params">error</span>)</span> &#123;</span><br><span class="line">      <span class="comment">// æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI</span></span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">hasError</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">componentDidCatch</span>(<span class="params">error, errorInfo</span>)</span> &#123;</span><br><span class="line">      <span class="comment">// ä½ åŒæ ·å¯ä»¥å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨</span></span><br><span class="line">      logErrorToMyService(error, errorInfo);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.state.hasError) &#123;</span><br><span class="line">        <span class="comment">// ä½ å¯ä»¥è‡ªå®šä¹‰é™çº§åçš„ UI å¹¶æ¸²æŸ“</span></span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Something went wrong.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.props.children;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åä½ å¯ä»¥å°†å®ƒä½œä¸ºä¸€ä¸ªå¸¸è§„ç»„ä»¶å»ä½¿ç”¨ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ErrorBoundary</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">MyWidget</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ErrorBoundary</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>é”™è¯¯è¾¹ç•Œæ— æ³•æ•è·è‡ªå·±äº§ç”Ÿçš„é”™è¯¯</strong>ï¼Œæ‰€ä»¥åœ¨å¸¸è§„ç»„ä»¶ä¸­æ·»åŠ  <code>getDerivedStateFromError()</code> å’Œ <code>componentDidCatch()</code> æ˜¯æ— æ•ˆçš„ã€‚å¸¸ç”¨åšæ³•å°±æ˜¯åƒä¸Šé¢ä¸€æ ·å†™ä¸€ä¸ªé”™è¯¯è¾¹ç•Œç»„ä»¶å‡ºæ¥æ”¾åœ¨æ•´ä¸ªåº”ç”¨çš„é¡¶å±‚ã€‚</p>
<h2 id="Refs-è½¬å‘"><a href="#Refs-è½¬å‘" class="headerlink" title="Refs è½¬å‘"></a>Refs è½¬å‘</h2><p>åœ¨ Vue ä¸­ï¼Œ<code>ref</code> è¢«ç”¨æ¥ç»™å…ƒç´ æˆ–å­ç»„ä»¶æ³¨å†Œå¼•ç”¨ä¿¡æ¯ã€‚å¼•ç”¨ä¿¡æ¯å°†ä¼šæ³¨å†Œåœ¨çˆ¶ç»„ä»¶çš„ <code>$refs</code> å¯¹è±¡ä¸Šã€‚å¦‚æœåœ¨æ™®é€šçš„ DOM å…ƒç´ ä¸Šä½¿ç”¨ï¼Œå¼•ç”¨æŒ‡å‘çš„å°±æ˜¯ DOM å…ƒç´ ï¼›å¦‚æœç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œå¼•ç”¨å°±æŒ‡å‘ç»„ä»¶å®ä¾‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- `vm.$refs.p` will be the DOM node --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&quot;p&quot;</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- `vm.$refs.child` will be the child component instance --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">child-component</span> <span class="attr">ref</span>=<span class="string">&quot;child&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">child-component</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å½“ <code>v-for</code> ç”¨äºå…ƒç´ æˆ–ç»„ä»¶çš„æ—¶å€™ï¼Œå¼•ç”¨ä¿¡æ¯å°†æ˜¯åŒ…å« DOM èŠ‚ç‚¹æˆ–ç»„ä»¶å®ä¾‹çš„æ•°ç»„ã€‚</p>
<p>å…³äº ref æ³¨å†Œæ—¶é—´çš„é‡è¦è¯´æ˜ï¼šå› ä¸º ref æœ¬èº«æ˜¯ä½œä¸ºæ¸²æŸ“ç»“æœè¢«åˆ›å»ºçš„ï¼Œåœ¨åˆå§‹æ¸²æŸ“çš„æ—¶å€™ä½ ä¸èƒ½è®¿é—®å®ƒä»¬ - å®ƒä»¬è¿˜ä¸å­˜åœ¨ï¼<code>$refs</code> ä¹Ÿä¸æ˜¯å“åº”å¼çš„ï¼Œå› æ­¤ä½ ä¸åº”è¯¥è¯•å›¾ç”¨å®ƒåœ¨æ¨¡æ¿ä¸­åšæ•°æ®ç»‘å®šã€‚</p>
<p>æ‰€ä»¥ä¸€èˆ¬ç”¨æ³•æ˜¯é€šè¿‡ <code>this.$refs</code> è®¿é—®å­ç»„ä»¶å®ä¾‹å’Œå­å…ƒç´ å¹¶è¿›è¡Œæ“ä½œã€‚</p>
<p>åœ¨ React ä¸­ï¼Œæ•ˆæœæ˜¯å·®ä¸å¤šçš„ã€‚</p>
<blockquote>
<p><strong>Ref è½¬å‘æ˜¯ä¸€ä¸ªå¯é€‰ç‰¹æ€§ï¼Œå…¶å…è®¸æŸäº›ç»„ä»¶æ¥æ”¶ <code>ref</code>ï¼Œå¹¶å°†å…¶å‘ä¸‹ä¼ é€’ï¼ˆæ¢å¥è¯è¯´ï¼Œâ€œè½¬å‘â€å®ƒï¼‰ç»™å­ç»„ä»¶ã€‚</strong></p>
</blockquote>
<p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>FancyButton</code> ä½¿ç”¨ <code>React.forwardRef</code> æ¥è·å–ä¼ é€’ç»™å®ƒçš„ <code>ref</code>ï¼Œç„¶åè½¬å‘åˆ°å®ƒæ¸²æŸ“çš„ DOM <code>button</code>ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> FancyButton = React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> (  <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> <span class="attr">className</span>=<span class="string">&quot;FancyButton&quot;</span>&gt;</span>    &#123;props.children&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½ å¯ä»¥ç›´æ¥è·å– DOM button çš„ refï¼š</span></span><br><span class="line"><span class="keyword">const</span> ref = React.createRef();</span><br><span class="line">&lt;FancyButton ref=&#123;ref&#125;&gt;Click me!&lt;/FancyButton&gt;;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œä½¿ç”¨ <code>FancyButton</code> çš„ç»„ä»¶å¯ä»¥è·å–åº•å±‚ DOM èŠ‚ç‚¹ <code>button</code> çš„ ref ï¼Œå¹¶åœ¨å¿…è¦æ—¶è®¿é—®ï¼Œå°±åƒå…¶ç›´æ¥ä½¿ç”¨ DOM <code>button</code> ä¸€æ ·ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¯¹ä¸Šè¿°ç¤ºä¾‹å‘ç”Ÿæƒ…å†µçš„é€æ­¥è§£é‡Šï¼š</p>
<ol>
<li>æˆ‘ä»¬é€šè¿‡è°ƒç”¨ <code>React.createRef</code> åˆ›å»ºäº†ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html">React ref</a> å¹¶å°†å…¶èµ‹å€¼ç»™ <code>ref</code> å˜é‡ã€‚</li>
<li>æˆ‘ä»¬é€šè¿‡æŒ‡å®š <code>ref</code> ä¸º JSX å±æ€§ï¼Œå°†å…¶å‘ä¸‹ä¼ é€’ç»™ <code>&lt;FancyButton ref=&#123;ref&#125;&gt;</code>ã€‚</li>
<li>React ä¼ é€’ <code>ref</code> ç»™ <code>forwardRef</code> å†…å‡½æ•° <code>(props, ref) =&gt; ...</code>ï¼Œä½œä¸ºå…¶ç¬¬äºŒä¸ªå‚æ•°ã€‚</li>
<li>æˆ‘ä»¬å‘ä¸‹è½¬å‘è¯¥ <code>ref</code> å‚æ•°åˆ° <code>&lt;button ref=&#123;ref&#125;&gt;</code>ï¼Œå°†å…¶æŒ‡å®šä¸º JSX å±æ€§ã€‚</li>
<li>å½“ ref æŒ‚è½½å®Œæˆï¼Œ<code>ref.current</code> å°†æŒ‡å‘ <code>&lt;button&gt;</code> DOM èŠ‚ç‚¹ã€‚</li>
</ol>
<blockquote>
<p>æ³¨æ„</p>
<p>ç¬¬äºŒä¸ªå‚æ•° <code>ref</code> åªåœ¨ä½¿ç”¨ <code>React.forwardRef</code> å®šä¹‰ç»„ä»¶æ—¶å­˜åœ¨ã€‚å¸¸è§„å‡½æ•°å’Œ class ç»„ä»¶ä¸æ¥æ”¶ <code>ref</code> å‚æ•°ï¼Œä¸” props ä¸­ä¹Ÿä¸å­˜åœ¨ <code>ref</code>ã€‚</p>
<p>Ref è½¬å‘ä¸ä»…é™äº DOM ç»„ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥è½¬å‘ refs åˆ° class ç»„ä»¶å®ä¾‹ä¸­ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ Ref çš„å®é™…ç”¨æ³•å’Œ Vue ä¸­æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§æ¥è®¿é—®å­ç»„ä»¶å’Œå…ƒç´ ã€‚</p>
<h2 id="Fragments"><a href="#Fragments" class="headerlink" title="Fragments"></a>Fragments</h2><p>ä¹‹å‰æåˆ°è¿‡ï¼Œé€šè¿‡ <code>&lt;React.Fragment&gt;</code> æ ‡ç­¾åŒ…è£¹çš„ jsxï¼Œä¼šåœ¨è¿”å›çš„æ—¶å€™å»æ‰è¿™ä¸ªæ ‡ç­¾ï¼Œå°†å­åˆ—è¡¨å®Œæ•´è¿”å›ã€‚</p>
<p>ä¸€ç§å¸¸è§æ¨¡å¼æ˜¯ç»„ä»¶è¿”å›ä¸€ä¸ªå­å…ƒç´ åˆ—è¡¨ã€‚ä»¥æ­¤ React ä»£ç ç‰‡æ®µä¸ºä¾‹ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Table</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;table&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;Columns /&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/table&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>&lt;Columns /&gt;</code> éœ€è¦è¿”å›å¤šä¸ª <code>&lt;td&gt;</code> å…ƒç´ ä»¥ä½¿æ¸²æŸ“çš„ HTML æœ‰æ•ˆã€‚å¦‚æœåœ¨ <code>&lt;Columns /&gt;</code> çš„ <code>render()</code> ä¸­ä½¿ç”¨äº†çˆ¶ divï¼Œåˆ™ç”Ÿæˆçš„ HTML å°†æ— æ•ˆã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿å¯ä»¥ä½¿ç”¨ <code>&lt;&gt;</code> ç©ºæ ‡ç­¾ä½œä¸ºçŸ­å†™ã€‚</p>
<h2 id="é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰"><a href="#é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰" class="headerlink" title="é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰"></a>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰</h2><p><strong>é«˜é˜¶ç»„ä»¶æ˜¯å‚æ•°ä¸ºç»„ä»¶ï¼Œè¿”å›å€¼ä¸ºæ–°ç»„ä»¶çš„å‡½æ•°ã€‚</strong></p>
<p>åœ¨è¿™äº›â€é«˜çº§æŒ‡å¼•â€œä¸­ï¼Œè¿™äº›åŠŸèƒ½æˆ–å±æ€§éƒ½æ˜¯ä¸ºäº†è§£å†³ä¸€ä¸ªå®é™…æ“ä½œä¸­çš„ç—›ç‚¹æ¥è®¾è®¡å®ç°çš„ã€‚æ¯”å¦‚ä¹‹å‰çš„ <code>Fragment</code> æˆ– <code>Context</code> ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬ä¹‹å‰å»ºè®®ä½¿ç”¨ mixins ç”¨äºè§£å†³æ¨ªåˆ‡å…³æ³¨ç‚¹ç›¸å…³çš„é—®é¢˜ã€‚ä½†æˆ‘ä»¬å·²ç»æ„è¯†åˆ° mixins ä¼šäº§ç”Ÿæ›´å¤šéº»çƒ¦ã€‚<a target="_blank" rel="noopener" href="https://react.docschina.org/blog/2016/07/13/mixins-considered-harmful.html">é˜…è¯»æ›´å¤š</a> ä»¥äº†è§£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦æŠ›å¼ƒ mixins ä»¥åŠå¦‚ä½•è½¬æ¢ç°æœ‰ç»„ä»¶ã€‚</p>
</blockquote>
<p>åœ¨ react å®˜æ–¹æ–‡æ¡£ä¸­è¯´çš„æ˜¯â€ä½¿ç”¨ HOC è§£å†³æ¨ªåˆ‡å…³æ³¨ç‚¹é—®é¢˜â€œï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“ä»€ä¹ˆæ˜¯<strong>æ¨ªåˆ‡å…³æ³¨ç‚¹é—®é¢˜</strong>ã€‚</p>
<blockquote>
<p><strong>æ¨ªåˆ‡å…³æ³¨ç‚¹</strong>æŒ‡çš„æ˜¯ä¸€äº›å…·æœ‰æ¨ªè¶Šå¤šä¸ª<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%A8%A1%E5%9D%97">æ¨¡å—</a>çš„è¡Œä¸ºï¼Œä½¿ç”¨ä¼ ç»Ÿçš„<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E6%96%B9%E6%B3%95">è½¯ä»¶å¼€å‘æ–¹æ³•</a>ä¸èƒ½å¤Ÿè¾¾åˆ°æœ‰æ•ˆçš„æ¨¡å—åŒ–çš„ä¸€ç±»ç‰¹æ®Šå…³æ³¨ç‚¹ã€‚</p>
</blockquote>
<p>ç®€å•è¯´å°±æ˜¯æˆ‘ä»¬å¸Œæœ›æŸä¸€é¡¹åŠŸèƒ½æˆ–è€…å±æ€§æ˜¯å¯ä»¥ç»™å¤šä¸ªç»„ä»¶æ·»åŠ çš„ï¼Œåœ¨ä¸è€ƒè™‘ç»„ä»¶é—´çš„å…³ç³»çš„å‰æä¸‹ï¼Œä¼ ç»Ÿæ¨¡å¼æˆ‘ä»¬å°±åªèƒ½ä¸€ä¸ªä¸€ä¸ªå»å¤åˆ¶ç²˜è´´ï¼Œè¿™æ ·è¿èƒŒäº†æ¨¡å—åŒ–çš„è¦æ±‚ã€‚</p>
<p>åœ¨ Vue ä¸­æ‰€é‡‡ç”¨çš„ä¸€ç§æ–¹æ³•å°±æ˜¯ <code>mixins(æ··å…¥)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ··å…¥å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> myMixin = &#123;</span><br><span class="line">  created: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.hello();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    hello: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;hello from mixin!&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªä½¿ç”¨æ··å…¥å¯¹è±¡çš„ç»„ä»¶</span></span><br><span class="line"><span class="keyword">var</span> Component = Vue.extend(&#123;</span><br><span class="line">  mixins: [myMixin],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> component = <span class="keyword">new</span> Component(); <span class="comment">// =&gt; &quot;hello from mixin!&quot;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ Vue çš„ <code>mixins</code> ä¸­ï¼Œæˆ‘ä»¬èƒ½æ„Ÿè§‰åˆ°å¾ˆå¼ºçƒˆçš„ç»§æ‰¿çš„å‘³é“ã€‚æ–°çš„ç»„ä»¶ç»§æ‰¿äº† <code>myMixin</code> ç»„ä»¶ï¼Œè¿™é‡Œæ˜¯è¯´çš„ç»„ä»¶è€Œä¸æ˜¯ <code>mixins</code> ï¼Œå› ä¸ºä»–ç¡®å®å°±æ˜¯ä¸€ä¸ªæ™®é€šç»„ä»¶ï¼Œåªæ˜¯ç”¨ä½œ <code>mixins</code> è€Œå·²ã€‚æ–°çš„ç»„ä»¶ç»§æ‰¿äº†ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œæ™®é€šæ–¹æ³•ã€‚</p>
<p>æ›´åŠ è¯¦ç»†çš„å‚è€ƒ <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/mixins.html%EF%BC%8CVue2">https://cn.vuejs.org/v2/guide/mixins.htmlï¼ŒVue2</a> çš„æ–‡æ¡£ã€‚</p>
<p>å›åˆ° react ä¸­æ¥ï¼Œä»¥å‰æ˜¯ä¹Ÿç”¨è¿‡ <code>mixins</code> çš„ï¼Œä½†æ˜¯è€ƒè™‘åˆ°å®ƒæ‰€å¸¦æ¥çš„é—®é¢˜è¿˜æ˜¯æ”¾å¼ƒäº†ï¼Œæ”¹ç”¨ HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰ã€‚</p>
<blockquote>
<p>è¯·æ³¨æ„ï¼ŒHOC ä¸ä¼šä¿®æ”¹ä¼ å…¥çš„ç»„ä»¶ï¼Œä¹Ÿä¸ä¼šä½¿ç”¨ç»§æ‰¿æ¥å¤åˆ¶å…¶è¡Œä¸ºã€‚ç›¸åï¼ŒHOC é€šè¿‡å°†ç»„ä»¶<em>åŒ…è£…</em>åœ¨å®¹å™¨ç»„ä»¶ä¸­æ¥<em>ç»„æˆ</em>æ–°ç»„ä»¶ã€‚HOC æ˜¯çº¯å‡½æ•°ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ã€‚</p>
</blockquote>
<p>æ­£å¦‚æ–‡æ¡£æ‰€è¯´çš„ï¼ŒHOC å°±æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œå°†ä¼ å…¥çš„ç»„ä»¶é‡æ–°åŒ…è£…ï¼ŒåŠ å…¥æˆ‘ä»¬å¸Œæœ›çš„åŠŸèƒ½ï¼Œå†è¿”å›è¿™ä¸ªæ–°ç»„ä»¶ã€‚</p>
<p>HOC ä¸åº”è¯¥ä¿®æ”¹ä¼ å…¥ç»„ä»¶ï¼Œè€Œåº”è¯¥ä½¿ç”¨ç»„åˆçš„æ–¹å¼ï¼Œé€šè¿‡å°†ç»„ä»¶åŒ…è£…åœ¨å®¹å™¨ç»„ä»¶ä¸­å®ç°åŠŸèƒ½ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logProps</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">componentDidUpdate</span>(<span class="params">prevProps</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;Current props: &#x27;</span>, <span class="built_in">this</span>.props);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;Previous props: &#x27;</span>, prevProps);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="comment">// å°† input ç»„ä»¶åŒ…è£…åœ¨å®¹å™¨ä¸­ï¼Œè€Œä¸å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚Good!</span></span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨ HOC çš„è¿‡ç¨‹ä¸­éœ€è¦éµå®ˆä¸€äº›è§„å®šæ¥è®© HOC æ›´åŠ çš„çµæ´»å’Œä¸æ˜“å‡ºé”™ã€‚</p>
<ul>
<li><p>å°†ä¸ç›¸å…³çš„ props ä¼ é€’ç»™è¢«åŒ…è£¹çš„ç»„ä»¶</p>
</li>
<li><p>æœ€å¤§åŒ–å¯ç»„åˆæ€§</p>
</li>
<li><p>åŒ…è£…æ˜¾ç¤ºåç§°ä»¥ä¾¿è½»æ¾è°ƒè¯•</p>
</li>
<li><p>ä¸è¦åœ¨ render æ–¹æ³•ä¸­ä½¿ç”¨ HOC</p>
</li>
<li><p>Refs ä¸ä¼šè¢«ä¼ é€’</p>
</li>
</ul>
<h2 id="æ·±å…¥-JSX"><a href="#æ·±å…¥-JSX" class="headerlink" title="æ·±å…¥ JSX"></a>æ·±å…¥ JSX</h2><p>å®é™…ä¸Šï¼ŒJSX ä»…ä»…åªæ˜¯ <code>React.createElement(component, props, ...children)</code> å‡½æ•°çš„è¯­æ³•ç³–ã€‚å¦‚ä¸‹ JSX ä»£ç ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyButton color=<span class="string">&quot;blue&quot;</span> shadowSize=&#123;<span class="number">2</span>&#125;&gt;</span><br><span class="line">  Click Me</span><br><span class="line">&lt;/MyButton&gt;</span><br></pre></td></tr></table></figure>
<p>ä¼šç¼–è¯‘ä¸ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">React.createElement(MyButton, &#123; <span class="attr">color</span>: <span class="string">&quot;blue&quot;</span>, <span class="attr">shadowSize</span>: <span class="number">2</span> &#125;, <span class="string">&quot;Click Me&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢è¿™ä¸ªæ˜¯ js ä»£ç ï¼Œåœ¨è¿è¡Œçš„æ—¶å€™å›å»æ‰¾ MyButton è¿™ä¸ªå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„å‡½æ•°æˆ–è€…ç±»ï¼Œè¿™ä¸ªä»£ç éœ€è¦ç¬¦åˆä½œç”¨åŸŸè§„åˆ™ã€‚</p>
<h3 id="åœ¨-JSX-ç±»å‹ä¸­ä½¿ç”¨ç‚¹è¯­æ³•"><a href="#åœ¨-JSX-ç±»å‹ä¸­ä½¿ç”¨ç‚¹è¯­æ³•" class="headerlink" title="åœ¨ JSX ç±»å‹ä¸­ä½¿ç”¨ç‚¹è¯­æ³•"></a>åœ¨ JSX ç±»å‹ä¸­ä½¿ç”¨ç‚¹è¯­æ³•</h3><p>åœ¨ JSX ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç‚¹è¯­æ³•æ¥å¼•ç”¨ä¸€ä¸ª React ç»„ä»¶ã€‚å½“ä½ åœ¨ä¸€ä¸ªæ¨¡å—ä¸­å¯¼å‡ºè®¸å¤š React ç»„ä»¶æ—¶ï¼Œè¿™ä¼šéå¸¸æ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ <code>MyComponents.DatePicker</code> æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œä½ å¯ä»¥åœ¨ JSX ä¸­ç›´æ¥ä½¿ç”¨ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MyComponents = &#123;</span><br><span class="line">  DatePicker: <span class="function"><span class="keyword">function</span> <span class="title">DatePicker</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Imagine a &#123;props.color&#125; datepicker here.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BlueDatePicker</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">MyComponents.DatePicker</span> <span class="attr">color</span>=<span class="string">&quot;blue&quot;</span> /&gt;</span></span>;&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç”¨æˆ·å®šä¹‰çš„ç»„ä»¶å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´</strong></p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯æœ‰ä¸€äº› <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy">â€œfalsyâ€ å€¼</a>ï¼Œå¦‚æ•°å­— <code>0</code>ï¼Œä»ç„¶ä¼šè¢« React æ¸²æŸ“ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å¹¶ä¸ä¼šåƒä½ é¢„æœŸé‚£æ ·å·¥ä½œï¼Œå› ä¸ºå½“ <code>props.messages</code> æ˜¯ç©ºæ•°ç»„æ—¶ï¼Œ<code>0</code> ä»ç„¶ä¼šè¢«æ¸²æŸ“ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;props.messages.length &amp;&amp;</span><br><span class="line">        &lt;MessageList messages=&#123;props.messages&#125; /&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¡®ä¿ <code>&amp;&amp;</code> ä¹‹å‰çš„è¡¨è¾¾å¼æ€»æ˜¯å¸ƒå°”å€¼ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;props.messages.length &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">        &lt;MessageList messages=&#123;props.messages&#125; /&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>åä¹‹ï¼Œå¦‚æœä½ æƒ³æ¸²æŸ“ <code>false</code>ã€<code>true</code>ã€<code>null</code>ã€<code>undefined</code> ç­‰å€¼ï¼Œä½ éœ€è¦å…ˆå°†å®ƒä»¬<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#String_conversion">è½¬æ¢ä¸ºå­—ç¬¦ä¸²</a>ã€‚</p>
<h2 id="Protals"><a href="#Protals" class="headerlink" title="Protals"></a>Protals</h2><p>Portal æä¾›äº†ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„ä¼˜ç§€çš„æ–¹æ¡ˆã€‚é€šå¸¸æˆ‘ä»¬ä½¿ç”¨è¿™ç§æ–¹æ¡ˆæ¥åˆ›å»ºå¼¹çª—ã€å¯¹è¯æ¡†ç­‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.createPortal(child, container);</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ<code>child</code>ï¼‰æ˜¯ä»»ä½•<a target="_blank" rel="noopener" href="https://react.docschina.org/docs/react-component.html#render">å¯æ¸²æŸ“çš„ React å­å…ƒç´ </a>ï¼Œä¾‹å¦‚ä¸€ä¸ªå…ƒç´ ï¼Œå­—ç¬¦ä¸²æˆ– fragmentã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ<code>container</code>ï¼‰æ˜¯ä¸€ä¸ª DOM å…ƒç´ ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="comment">// React å¹¶*æ²¡æœ‰*åˆ›å»ºä¸€ä¸ªæ–°çš„ divã€‚å®ƒåªæ˜¯æŠŠå­å…ƒç´ æ¸²æŸ“åˆ° `domNode` ä¸­ã€‚</span></span><br><span class="line">  <span class="comment">// `domNode` æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•ä½ç½®çš„æœ‰æ•ˆ DOM èŠ‚ç‚¹ã€‚</span></span><br><span class="line">  <span class="keyword">return</span> ReactDOM.createPortal(</span><br><span class="line">    <span class="built_in">this</span>.props.children,</span><br><span class="line">    domNode  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶å†’æ³¡</h3><p>å°½ç®¡ portal å¯ä»¥è¢«æ”¾ç½®åœ¨ DOM æ ‘ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œä½†åœ¨ä»»ä½•å…¶ä»–æ–¹é¢ï¼Œå…¶è¡Œä¸ºå’Œæ™®é€šçš„ React å­èŠ‚ç‚¹è¡Œä¸ºä¸€è‡´ã€‚ç”±äº portal ä»å­˜åœ¨äº <em>React æ ‘_ï¼Œ ä¸”ä¸ _DOM æ ‘</em> ä¸­çš„ä½ç½®æ— å…³ï¼Œé‚£ä¹ˆæ— è®ºå…¶å­èŠ‚ç‚¹æ˜¯å¦æ˜¯ portalï¼Œåƒ context è¿™æ ·çš„åŠŸèƒ½ç‰¹æ€§éƒ½æ˜¯ä¸å˜çš„ã€‚</p>
<p>å®˜ç½‘å®ä¾‹ <a target="_blank" rel="noopener" href="https://codepen.io/gaearon/pen/jGBWpE">https://codepen.io/gaearon/pen/jGBWpE</a></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ DOM ä¸­æœ‰ä¸¤ä¸ªå®¹å™¨æ˜¯å…„å¼Ÿçº§ ï¼ˆsiblingsï¼‰</span></span><br><span class="line"><span class="keyword">const</span> appRoot = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;app-root&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> modalRoot = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;modal-root&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Modal</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.el = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// åœ¨ Modal çš„æ‰€æœ‰å­å…ƒç´ è¢«æŒ‚è½½åï¼Œ</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ª portal å…ƒç´ ä¼šè¢«åµŒå…¥åˆ° DOM æ ‘ä¸­ï¼Œ</span></span><br><span class="line">    <span class="comment">// è¿™æ„å‘³ç€å­å…ƒç´ å°†è¢«æŒ‚è½½åˆ°ä¸€ä¸ªåˆ†ç¦»çš„ DOM èŠ‚ç‚¹ä¸­ã€‚</span></span><br><span class="line">    <span class="comment">// å¦‚æœè¦æ±‚å­ç»„ä»¶åœ¨æŒ‚è½½æ—¶å¯ä»¥ç«‹åˆ»æ¥å…¥ DOM æ ‘ï¼Œ</span></span><br><span class="line">    <span class="comment">// ä¾‹å¦‚è¡¡é‡ä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œ</span></span><br><span class="line">    <span class="comment">// æˆ–è€…åœ¨åä»£èŠ‚ç‚¹ä¸­ä½¿ç”¨ â€˜autoFocusâ€™ï¼Œ</span></span><br><span class="line">    <span class="comment">// åˆ™éœ€æ·»åŠ  state åˆ° Modal ä¸­ï¼Œ</span></span><br><span class="line">    <span class="comment">// ä»…å½“ Modal è¢«æ’å…¥ DOM æ ‘ä¸­æ‰èƒ½æ¸²æŸ“å­å…ƒç´ ã€‚</span></span><br><span class="line">    modalRoot.appendChild(<span class="built_in">this</span>.el);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    modalRoot.removeChild(<span class="built_in">this</span>.el);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ReactDOM.createPortal(</span><br><span class="line">      <span class="built_in">this</span>.props.children,</span><br><span class="line">      <span class="built_in">this</span>.el</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;<span class="attr">clicks</span>: <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">this</span>.handleClick = <span class="built_in">this</span>.handleClick.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å½“å­å…ƒç´ é‡Œçš„æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œ</span></span><br><span class="line">    <span class="comment">// è¿™ä¸ªå°†ä¼šè¢«è§¦å‘æ›´æ–°çˆ¶å…ƒç´ çš„ stateï¼Œ</span></span><br><span class="line">    <span class="comment">// å³ä½¿è¿™ä¸ªæŒ‰é’®åœ¨ DOM ä¸­ä¸æ˜¯ç›´æ¥å…³è”çš„åä»£</span></span><br><span class="line">    <span class="built_in">this</span>.setState(<span class="function"><span class="params">state</span> =&gt;</span> (&#123;</span><br><span class="line">      clicks: state.clicks + <span class="number">1</span></span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div onClick=&#123;<span class="built_in">this</span>.handleClick&#125;&gt;</span><br><span class="line">        &lt;p&gt;<span class="built_in">Number</span> <span class="keyword">of</span> clicks: &#123;<span class="built_in">this</span>.state.clicks&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">          Open up the browser DevTools</span><br><span class="line">          to observe that the button</span><br><span class="line">          is not a child <span class="keyword">of</span> the div</span><br><span class="line">          <span class="keyword">with</span> the onClick handler.</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;Modal&gt;</span><br><span class="line">          &lt;Child /&gt;</span><br><span class="line">        &lt;/Modal&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è¿™ä¸ªæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ä¼šå†’æ³¡åˆ°çˆ¶å…ƒç´ </span></span><br><span class="line">  <span class="comment">// å› ä¸ºè¿™é‡Œæ²¡æœ‰å®šä¹‰ &#x27;onClick&#x27; å±æ€§</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">&quot;modal&quot;</span>&gt;</span><br><span class="line">      &lt;button&gt;Click&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Parent</span> /&gt;</span></span>, appRoot);</span><br></pre></td></tr></table></figure>
<p>åªçœ‹è¿™ä¸ªä»£ç ä¹Ÿè¡Œï¼Œåœ¨ Codepen ä¸­çš„å®ä¾‹éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ª button å¹¶ä¸æ˜¯å¼¹å‡ºæ¥çš„ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å±…ä¸­æŒ‰é’®ï¼Œé€šè¿‡è°ƒèŠ‚èƒŒæ™¯è‰²æ¥çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç‚¹ button ä»¥å¤–çš„åœ°æ–¹ä¾ç„¶ä¼š +1ã€‚</p>
<p>å¤§æ¦‚æœ€åæ¸²æŸ“å‡ºæ¥çš„ç»“æ„å°±æ˜¯</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app-root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&quot;&#123;this.handleClick&#125;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Number of clicks: &#123;this.state.clicks&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        Open up the browser DevTools to observe that the button is not a child</span><br><span class="line">        of the div with the onClick handler.</span><br><span class="line">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Modal</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">Modal</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;modal-root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;modal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>Click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå®ä¾‹æœ€å…³é”®çš„åœ°æ–¹åœ¨äºï¼ŒDOM ç»“æ„ä¸‹ï¼Œbutton çš„çˆ¶å…ƒç´ æ˜¯ <code>modal-root</code> ï¼Œä½†æ˜¯åœ¨ç‚¹å‡»æ—¶ä¼šå†’æ³¡åˆ° app-root ä¸­ã€‚</p>
<blockquote>
<p>åœ¨çˆ¶ç»„ä»¶é‡Œæ•è·ä¸€ä¸ªæ¥è‡ª portal å†’æ³¡ä¸Šæ¥çš„äº‹ä»¶ï¼Œä½¿ä¹‹èƒ½å¤Ÿåœ¨å¼€å‘æ—¶å…·æœ‰ä¸å®Œå…¨ä¾èµ–äº portal çš„æ›´ä¸ºçµæ´»çš„æŠ½è±¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨æ¸²æŸ“ä¸€ä¸ª <code>&lt;Modal /&gt;</code> ç»„ä»¶ï¼Œæ— è®ºå…¶æ˜¯å¦é‡‡ç”¨ portal å®ç°ï¼Œçˆ¶ç»„ä»¶éƒ½èƒ½å¤Ÿæ•è·å…¶äº‹ä»¶ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´çˆ¶ç»„ä»¶æ˜¯ä¸€å®šå¯ä»¥æ•è·åˆ°å­ç»„ä»¶çš„äº‹ä»¶çš„ã€‚æ‰€ä»¥åœ¨å¤„ç† protal çš„äº‹ä»¶çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨çˆ¶ç»„ä»¶ä¸­å¤„ç†å°±å¯ä»¥äº†ã€‚</p>
<h2 id="Profiler"><a href="#Profiler" class="headerlink" title="Profiler"></a><a target="_blank" rel="noopener" href="https://react.docschina.org/docs/profiler.html">Profiler</a></h2><p>è¿™ä¸ª API çš„ä¸»è¦åŠŸèƒ½æ˜¯æä¾›æ€§èƒ½æ£€æµ‹</p>
<blockquote>
<p><code>Profiler</code> æµ‹é‡æ¸²æŸ“ä¸€ä¸ª React åº”ç”¨å¤šä¹…æ¸²æŸ“ä¸€æ¬¡ä»¥åŠæ¸²æŸ“ä¸€æ¬¡çš„â€œä»£ä»·â€ã€‚ å®ƒçš„ç›®çš„æ˜¯è¯†åˆ«å‡ºåº”ç”¨ä¸­æ¸²æŸ“è¾ƒæ…¢çš„éƒ¨åˆ†ï¼Œæˆ–æ˜¯å¯ä»¥ä½¿ç”¨<a target="_blank" rel="noopener" href="https://react.docschina.org/docs/hooks-faq.html#how-to-memoize-calculations">ç±»ä¼¼ memoization ä¼˜åŒ–</a>çš„éƒ¨åˆ†ï¼Œå¹¶ä»ç›¸å…³ä¼˜åŒ–ä¸­è·ç›Šã€‚</p>
</blockquote>
<h2 id="ä¸ä½¿ç”¨-ES6"><a href="#ä¸ä½¿ç”¨-ES6" class="headerlink" title="ä¸ä½¿ç”¨ ES6"></a><a target="_blank" rel="noopener" href="https://react.docschina.org/docs/react-without-es6.html">ä¸ä½¿ç”¨ ES6</a></h2><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½¿ç”¨ ES6 æ˜¯æœ€å¥½çš„æ–¹å¼ï¼Œå¦‚æœæ¡ä»¶é™åˆ¶çš„è¯ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeting</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœä½ è¿˜æœªä½¿ç”¨è¿‡ ES6ï¼Œä½ å¯ä»¥ä½¿ç”¨ create-react-class æ¨¡å—ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> createReactClass = <span class="built_in">require</span>(<span class="string">&#x27;create-react-class&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> Greeting = createReactClass(&#123; <span class="comment">// è¿™é‡Œç”¨çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œé”®åæ˜¯renderï¼Œé”®å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</span></span><br><span class="line">  render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ES6 ä¸­çš„ class ä¸ createReactClass() æ–¹æ³•ååˆ†ç›¸ä¼¼ï¼Œä½†æœ‰ä»¥ä¸‹å‡ ä¸ªåŒºåˆ«å€¼å¾—æ³¨æ„ã€‚</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¸ä½¿ç”¨-JSX-çš„-React"><a href="#ä¸ä½¿ç”¨-JSX-çš„-React" class="headerlink" title="ä¸ä½¿ç”¨ JSX çš„ React"></a><a target="_blank" rel="noopener" href="https://react.docschina.org/docs/react-without-jsx.html">ä¸ä½¿ç”¨ JSX çš„ React</a></h2><p>jsx ç›¸å½“äºæ˜¯ React è®¾ç«‹çš„ä¸€ä¸ªè¯­æ³•ç³–ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª jsx å¯¹è±¡ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç”¨ JSX ç¼–å†™çš„ä»£ç ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello &#123;this.props.toWhat&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Hello toWhat=<span class="string">&quot;World&quot;</span> /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç¼–å†™ä¸ºä¸ä½¿ç”¨ JSX çš„ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> React.createElement(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="string">`Hello <span class="subst">$&#123;<span class="built_in">this</span>.props.toWhat&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  React.createElement(Hello, &#123; <span class="attr">toWhat</span>: <span class="string">&quot;World&quot;</span> &#125;, <span class="literal">null</span>),</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="Refs-and-the-DOM"><a href="#Refs-and-the-DOM" class="headerlink" title="Refs and the DOM"></a>Refs and the DOM</h2><p>åœ¨ Vue æ–‡æ¡£ä¸­æ˜¯è¿™ä¹ˆå®šä¹‰ Refs çš„</p>
<blockquote>
<p>å°½ç®¡å­˜åœ¨ prop å’Œäº‹ä»¶ï¼Œæœ‰çš„æ—¶å€™ä½ ä»å¯èƒ½éœ€è¦åœ¨ JavaScript é‡Œç›´æ¥è®¿é—®ä¸€ä¸ªå­ç»„ä»¶ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½ å¯ä»¥é€šè¿‡ <code>ref</code> è¿™ä¸ª attribute ä¸ºå­ç»„ä»¶èµ‹äºˆä¸€ä¸ª ID å¼•ç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">base-input</span> <span class="attr">ref</span>=<span class="string">&quot;usernameInput&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">base-input</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨åœ¨ä½ å·²ç»å®šä¹‰äº†è¿™ä¸ª <code>ref</code> çš„ç»„ä»¶é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$refs.usernameInput;</span><br></pre></td></tr></table></figure>

<p>æ¥è®¿é—®è¿™ä¸ª <code>&lt;base-input&gt;</code> å®ä¾‹ï¼Œä»¥ä¾¿ä¸æ—¶ä¹‹éœ€ã€‚</p>
</blockquote>
<p>ç®€å•è¯´å°±æ˜¯ç»™æŸä¸ªå­ç»„ä»¶æˆ–è€…å…ƒç´ æ·»åŠ ä¸€ä¸ªå…¨å±€ IDï¼Œå’Œæ™®é€šçš„ class id ä¸åŒï¼Œrefs çš„ä½œç”¨èŒƒå›´æ˜¯å…¨å±€çš„ï¼Œå¹¶ä¸æ˜¯ä»…åœ¨æŸä¸ªç»„ä»¶å†…ã€‚å¹¶ä¸”å¯ä»¥è·¨ç»„ä»¶å»è®¿é—®åˆ°ã€‚</p>
<p>åœ¨ React ä¸­ä¹Ÿæ˜¯ç±»ä¼¼çš„æ€æƒ³ã€‚åªæ˜¯æ–‡æ¡£è¯´çš„ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œæˆ‘å°±ä¸æŠ„è¿™æ®µäº†ã€‚</p>
<p>Refs æ˜¯ä½¿ç”¨ <code>React.createRef()</code> åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡ <code>ref</code> å±æ€§é™„åŠ åˆ° React å…ƒç´ ã€‚åœ¨æ„é€ ç»„ä»¶æ—¶ï¼Œé€šå¸¸å°† Refs åˆ†é…ç»™å®ä¾‹å±æ€§ï¼Œä»¥ä¾¿å¯ä»¥åœ¨æ•´ä¸ªç»„ä»¶ä¸­å¼•ç”¨å®ƒä»¬ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.myRef = React.createRef();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è®¿é—®-Refs"><a href="#è®¿é—®-Refs" class="headerlink" title="è®¿é—® Refs"></a>è®¿é—® Refs</h3><p>å½“ ref è¢«ä¼ é€’ç»™ <code>render</code> ä¸­çš„å…ƒç´ æ—¶ï¼Œå¯¹è¯¥èŠ‚ç‚¹çš„å¼•ç”¨å¯ä»¥åœ¨ ref çš„ <code>current</code> å±æ€§ä¸­è¢«è®¿é—®ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> node = <span class="built_in">this</span>.myRef.current;</span><br></pre></td></tr></table></figure>
<p>ref çš„å€¼æ ¹æ®èŠ‚ç‚¹çš„ç±»å‹è€Œæœ‰æ‰€ä¸åŒï¼š</p>
<ul>
<li>å½“ <code>ref</code> å±æ€§ç”¨äº HTML å…ƒç´ æ—¶ï¼Œæ„é€ å‡½æ•°ä¸­ä½¿ç”¨ <code>React.createRef()</code> åˆ›å»ºçš„ <code>ref</code> æ¥æ”¶åº•å±‚ DOM å…ƒç´ ä½œä¸ºå…¶ <code>current</code> å±æ€§ã€‚</li>
<li>å½“ <code>ref</code> å±æ€§ç”¨äºè‡ªå®šä¹‰ class ç»„ä»¶æ—¶ï¼Œ<code>ref</code> å¯¹è±¡æ¥æ”¶ç»„ä»¶çš„æŒ‚è½½å®ä¾‹ä½œä¸ºå…¶ <code>current</code> å±æ€§ã€‚</li>
<li><strong>ä½ ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ <code>ref</code> å±æ€§</strong>ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰å®ä¾‹ã€‚</li>
</ul>
<h2 id="Render-Props"><a href="#Render-Props" class="headerlink" title="Render Props"></a>Render Props</h2><p>å…·æœ‰ render prop çš„ç»„ä»¶æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ª React å…ƒç´ å¹¶è°ƒç”¨å®ƒè€Œä¸æ˜¯å®ç°è‡ªå·±çš„æ¸²æŸ“é€»è¾‘ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">DataProvider</span> <span class="attr">render</span>=<span class="string">&#123;data</span> =&gt;</span> (</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;data.target&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">)&#125;/&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> mouse = <span class="built_in">this</span>.props.mouse;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;img src=<span class="string">&quot;/cat.jpg&quot;</span> style=&#123;&#123; <span class="attr">position</span>: <span class="string">&#x27;absolute&#x27;</span>, <span class="attr">left</span>: mouse.x, <span class="attr">top</span>: mouse.y &#125;&#125; /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mouse</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.handleMouseMove = <span class="built_in">this</span>.handleMouseMove.bind(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">handleMouseMove</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      x: event.clientX,</span><br><span class="line">      y: event.clientY</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div style=&#123;&#123; <span class="attr">height</span>: <span class="string">&#x27;100vh&#x27;</span> &#125;&#125; onMouseMove=&#123;<span class="built_in">this</span>.handleMouseMove&#125;&gt;</span><br><span class="line"></span><br><span class="line">        &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">          Instead of providing a static representation of what &lt;Mouse&gt; renders,</span></span><br><span class="line"><span class="comment">          use the `render` prop to dynamically determine what to render.</span></span><br><span class="line"><span class="comment">        */</span>&#125;</span><br><span class="line">        &#123;<span class="built_in">this</span>.props.render(<span class="built_in">this</span>.state)&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MouseTracker</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;ç§»åŠ¨é¼ æ ‡!&lt;/h1&gt;</span><br><span class="line">        &lt;Mouse render=&#123;<span class="function"><span class="params">mouse</span> =&gt;</span> (</span><br><span class="line">          &lt;Cat mouse=&#123;mouse&#125; /&gt;</span><br><span class="line">        )&#125;/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://react.docschina.org/docs/render-props.html">æ–‡æ¡£</a> æŒºé•¿çš„ï¼Œä¸»è¦è¿˜æ˜¯ä¸Šé¢è¿™æ®µä»£ç ï¼Œä¹Ÿæ˜¯ Render Props çš„ä¸»è¦ç”¨æ³•ã€‚</p>
<p>å…ˆæ¥æ¢³ç†ä¸€ä¸‹ç»“æ„å…³ç³»ï¼Œå®é™…ä½¿ç”¨çš„ç»„ä»¶æ˜¯å·²å°è£…å¥½çš„ <code>MouseTracker</code> ç»„ä»¶ï¼ŒåŒ…å« <code>Mouse</code> å’Œ <code>Cat</code> ä¸¤ä¸ªå­ç»„ä»¶ï¼Œ<code>Cat</code> æ˜¯é€šè¿‡ <code>Mouse</code> ç»„ä»¶ä¸­çš„ <code>render=&#123;&#125;</code> å±æ€§è¿›è¡Œç»„åˆçš„ã€‚</p>
<p><code>Cat</code> ç»„ä»¶éœ€è¦ä½¿ç”¨ <code>mouse</code> å‚æ•°ï¼Œ<code>Mouse</code> ç»„ä»¶çš„ <code>render</code> å±æ€§æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå‚æ•°æ˜¯ <code>mouse</code>ã€‚åœ¨ <code>Mouse</code> ç»„ä»¶çš„ <code>render()</code> å‡½æ•°ä¸­æœ‰ä¸€ä¸ª <code>this.props.render(this.state)</code> ï¼Œä¹Ÿå°±æ˜¯æ›¿ä»£äº†åœ¨ <code>MouseTracker</code> ç»„ä»¶ä¸­çš„ <code>render</code> å±æ€§ã€‚å¹¶ä¸” <code>this.state</code> ä½œä¸ºå‚æ•°ã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹æ³•å¯ä»¥è®© <code>Mouse</code> ç»„ä»¶åŠ¨æ€å†³å®šæ¸²æŸ“å†…å®¹ã€‚</p>
<blockquote>
<p><strong>Render prop æ˜¯ä¸€ä¸ªç”¨äºå‘ŠçŸ¥ç»„ä»¶éœ€è¦æ¸²æŸ“ä»€ä¹ˆå†…å®¹çš„å‡½æ•° propã€‚</strong></p>
</blockquote>
<p>ä¸€ä¸ªå¾ˆé‡è¦çš„ç‚¹æ˜¯ï¼Œè¿™é‡Œçš„ <code>Render</code> å¹¶ä¸æ˜¯ç»„ä»¶å†…çš„ <code>render</code> å‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ª <code>prop</code> ï¼Œå±æ€§ï¼Œæ‰€ä»¥ç”¨å…¶ä»–çš„å‘½åä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Mouse children=&#123;<span class="function"><span class="params">mouse</span> =&gt;</span> (</span><br><span class="line">  &lt;p&gt;é¼ æ ‡çš„ä½ç½®æ˜¯ &#123;mouse.x&#125;ï¼Œ&#123;mouse.y&#125;&lt;/p&gt;</span><br><span class="line">)&#125;/&gt;</span><br></pre></td></tr></table></figure>
<p>è®°ä½ï¼Œ<code>children</code> prop å¹¶ä¸çœŸæ­£éœ€è¦æ·»åŠ åˆ° JSX å…ƒç´ çš„ â€œattributesâ€ åˆ—è¡¨ä¸­ã€‚ç›¸åï¼Œä½ å¯ä»¥ç›´æ¥æ”¾ç½®åˆ°å…ƒç´ çš„<em>å†…éƒ¨</em>ï¼</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Mouse&gt;</span><br><span class="line">  &#123;<span class="function"><span class="params">mouse</span> =&gt;</span> (</span><br><span class="line">    &lt;p&gt;é¼ æ ‡çš„ä½ç½®æ˜¯ &#123;mouse.x&#125;ï¼Œ&#123;mouse.y&#125;&lt;/p&gt;</span><br><span class="line">  )&#125;</span><br><span class="line">&lt;/Mouse&gt;</span><br></pre></td></tr></table></figure>
<h2 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>react çš„ api å‚è€ƒ<a target="_blank" rel="noopener" href="https://react.docschina.org/docs/react-api.html">https://react.docschina.org/docs/react-api.html</a></p>
<h1 id="é’©å­"><a href="#é’©å­" class="headerlink" title="é’©å­"></a>é’©å­</h1><p>ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘éƒ½è®¤ä¸ºé’©å­æ˜¯ä¸ªå¾ˆé«˜çº§çš„ä¸œè¥¿ï¼Œä½†æ˜¯å…¶å®æ²¡é‚£ä¹ˆé«˜çº§ï¼Œä½†æ˜¯ä»–ç¡®å®å¥½ç”¨ã€‚ä¸ç®¡æ˜¯ Vue è¿˜æ˜¯ Reactï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°éƒ½æ˜¯å±äºé’©å­çš„ä¸€ç§ã€‚ä½†æ˜¯ Vue å¹¶æ²¡æœ‰æä¾›å…¶ä»–çš„é’©å­å‡½æ•°ä»¥åŠè‡ªå®šä¹‰ Hookã€‚</p>
<blockquote>
<p><em>Hook</em> æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p>
<p>å·²æœ‰çš„é’©å­ API å‚è€ƒ <a target="_blank" rel="noopener" href="https://react.docschina.org/docs/hooks-reference.html">https://react.docschina.org/docs/hooks-reference.html</a></p>
</blockquote>
<p>åœ¨é’©å­ä¹‹å‰ï¼Œå¤ç”¨ç»„ä»¶çŠ¶æ€æ˜¯é€šè¿‡é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰å’Œ <code>RenderProps</code> å®Œæˆçš„ã€‚</p>
<h2 id="æå–è‡ªå®šä¹‰-Hook"><a href="#æå–è‡ªå®šä¹‰-Hook" class="headerlink" title="æå–è‡ªå®šä¹‰ Hook"></a>æå–è‡ªå®šä¹‰ Hook</h2><p>å½“æˆ‘ä»¬æƒ³åœ¨ä¸¤ä¸ªå‡½æ•°ä¹‹é—´å…±äº«é€»è¾‘æ—¶ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒæå–åˆ°ç¬¬ä¸‰ä¸ªå‡½æ•°ä¸­ã€‚è€Œç»„ä»¶å’Œ Hook éƒ½æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥ä¹ŸåŒæ ·é€‚ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<p><strong>è‡ªå®šä¹‰ Hook æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ â€œ<code>use</code>â€ å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–çš„ Hookã€‚</strong> ä¾‹å¦‚ï¼Œä¸‹é¢çš„ <code>useFriendStatus</code> æ˜¯æˆ‘ä»¬ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰çš„ Hook:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFriendStatus</span>(<span class="params">friendID</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [isOnline, setIsOnline] = useState(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleStatusChange</span>(<span class="params">status</span>) </span>&#123;</span><br><span class="line">      setIsOnline(status.isOnline);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> isOnline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚Hook ä¸èƒ½åœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨ â€”â€” è¿™ä½¿å¾—ä½ ä¸ä½¿ç”¨ class ä¹Ÿèƒ½ä½¿ç”¨ Reactã€‚</p>
</blockquote>
<h1 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h1><p>å¯ä»¥çœ‹è¿™ä¸ª <a target="_blank" rel="noopener" href="https://www.redux.org.cn/">https://www.redux.org.cn/</a></p>
<p>Redux æ˜¯ä¸€ä¸ª JavaScript çŠ¶æ€å®¹å™¨ï¼Œå®ƒçš„ç›®çš„å’Œ Vuex æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æä¾›ä¸€ä¸ªçŠ¶æ€ç®¡ç†ã€‚</p>
<p>åœ¨ç»†èŠ‚ä¸Šï¼Œå…ˆæ¥æ˜ç¡® Redux ä¸­çš„ä¸€äº›æ¦‚å¿µ</p>
<ul>
<li><p><code>state</code> <strong>æ•´ä¸ªåº”ç”¨çš„ <a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/Glossary.html#state">state</a> è¢«å‚¨å­˜åœ¨ä¸€æ£µ object tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/Glossary.html#store">store</a> ä¸­ã€‚</strong></p>
<blockquote>
<p>å’Œ React åº”ç”¨ä¸­çš„ state æ˜¯ä¸€ä¸ªæ„æ€ï¼Œéƒ½æ˜¯å­˜å‚¨æ•°æ®çš„ä¸€ä¸ªç©ºé—´ï¼Œåœ¨ä½¿ç”¨ Redux çš„æ—¶å€™ï¼ŒRedux çš„ state å’Œ React çš„ state æ˜¯ä¸¤ä¸ªï¼Œéœ€è¦æ³¨æ„åŒºåˆ†ã€‚</p>
</blockquote>
</li>
<li><p><code>store</code> å°±æ˜¯æŠŠåº”ç”¨è”ç³»åˆ°ä¸€èµ·çš„å¯¹è±¡ã€‚Store æœ‰ä»¥ä¸‹èŒè´£ï¼š</p>
<ul>
<li>ç»´æŒåº”ç”¨çš„ stateï¼›</li>
<li>æä¾› <a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/api/Store.html#getState"><code>getState()</code></a> æ–¹æ³•è·å– stateï¼›</li>
<li>æä¾› <a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/api/Store.html#dispatch"><code>dispatch(action)</code></a> æ–¹æ³•æ›´æ–° stateï¼›</li>
<li>é€šè¿‡ <a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/api/Store.html#subscribe"><code>subscribe(listener)</code></a> æ³¨å†Œç›‘å¬å™¨;</li>
<li>é€šè¿‡ <a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/api/Store.html#subscribe"><code>subscribe(listener)</code></a> è¿”å›çš„å‡½æ•°æ³¨é”€ç›‘å¬å™¨ã€‚</li>
</ul>
</li>
<li><p><code>Action</code> æ˜¯æŠŠæ•°æ®ä»åº”ç”¨ï¼ˆè¯‘è€…æ³¨ï¼šè¿™é‡Œä¹‹æ‰€ä»¥ä¸å« view æ˜¯å› ä¸ºè¿™äº›æ•°æ®æœ‰å¯èƒ½æ˜¯æœåŠ¡å™¨å“åº”ï¼Œç”¨æˆ·è¾“å…¥æˆ–å…¶å®ƒé view çš„æ•°æ® ï¼‰ä¼ åˆ° store çš„æœ‰æ•ˆè½½è·ã€‚å®ƒæ˜¯ store æ•°æ®çš„<strong>å”¯ä¸€</strong>æ¥æºã€‚ä¸€èˆ¬æ¥è¯´ä½ ä¼šé€šè¿‡ <a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/api/Store.html#dispatch"><code>store.dispatch()</code></a> å°† action ä¼ åˆ° storeã€‚</p>
<blockquote>
<p>åœ¨ Vuex ä¸­å¯¹åº”çš„æ˜¯ mutationï¼Œåœ¨ Vuex ä¸­ mutation ä¸èƒ½ä½¿ç”¨å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥æ¨å‡ºäº† Vuex-Actionï¼Œåœ¨ Redux ä¸­ï¼ŒAction æ˜¯ä¸æ”¯æŒå¼‚æ­¥æ“ä½œçš„ã€‚éœ€è¦ä½¿ç”¨å¯¹åº”çš„å·¥å…·åº“ã€‚</p>
</blockquote>
</li>
<li><p><code>Reducer</code> æŒ‡å®šäº†åº”ç”¨çŠ¶æ€çš„å˜åŒ–å¦‚ä½•å“åº” <a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/basics/Actions.html">actions</a> å¹¶å‘é€åˆ° store çš„ï¼Œè®°ä½ actions åªæ˜¯æè¿°äº†<em>æœ‰äº‹æƒ…å‘ç”Ÿäº†</em>è¿™ä¸€äº‹å®ï¼Œå¹¶æ²¡æœ‰æè¿°åº”ç”¨å¦‚ä½•æ›´æ–° stateã€‚</p>
<blockquote>
<p>Reducer ä¸€å®šæ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ¥æ”¶æ—§çš„ state å’Œ actionï¼Œè¿”å›æ–°çš„ stateã€‚</p>
<p><strong>æ°¸è¿œä¸è¦</strong>åœ¨ reducer é‡Œåšè¿™äº›æ“ä½œï¼š</p>
<ul>
<li>ä¿®æ”¹ä¼ å…¥å‚æ•°ï¼›</li>
<li>æ‰§è¡Œæœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œå¦‚ API è¯·æ±‚å’Œè·¯ç”±è·³è½¬ï¼›</li>
<li>è°ƒç”¨éçº¯å‡½æ•°ï¼Œå¦‚ <code>Date.now()</code> æˆ– <code>Math.random()</code>ã€‚</li>
</ul>
</blockquote>
</li>
</ul>
<p>åœ¨ <a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/basics/ExampleTodoList.html">https://www.redux.org.cn/docs/basics/ExampleTodoList.html</a> æœ‰ä¸€ä»½æºç æ•™ç¨‹ã€‚å¯ä»¥è¯•ç€å»ç†è§£ä¸€ä¸‹ä»£ç ã€‚</p>
<h2 id="å®ä¾‹ä»£ç ç†è§£"><a href="#å®ä¾‹ä»£ç ç†è§£" class="headerlink" title="å®ä¾‹ä»£ç ç†è§£"></a>å®ä¾‹ä»£ç ç†è§£</h2><h3 id="å…¥å£æ–‡ä»¶-index-js"><a href="#å…¥å£æ–‡ä»¶-index-js" class="headerlink" title="å…¥å£æ–‡ä»¶(index.js)"></a>å…¥å£æ–‡ä»¶(<code>index.js</code>)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> todoApp <span class="keyword">from</span> <span class="string">&quot;./reducers&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./components/App&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¦–å…ˆæ˜¯åœ¨ä¸»ç¨‹åºä¸­ç”Ÿæˆä¸€ä¸ª storeï¼Œä½œä¸º Redux çš„æ•°æ®æºã€‚ä½¿ç”¨äº† createStore() å‡½æ•°ï¼Œå‚æ•°æ˜¯ ./reducers ä¸­çš„ todoApp</span></span><br><span class="line"><span class="keyword">let</span> store = createStore(todoApp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ä½¿ç”¨ä¸­é€šè¿‡ Provider ç»„ä»¶å‘ App ä¸»ç»„ä»¶ä¼ é€’ store å¹¶ä¿è¯æ‰€æœ‰å­ç»„ä»¶éƒ½èƒ½è®¿é—®åˆ° store</span></span><br><span class="line">render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&quot;root&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»º-action-actions-index-js"><a href="#åˆ›å»º-action-actions-index-js" class="headerlink" title="åˆ›å»º action(actions/index.js)"></a>åˆ›å»º action(<code>actions/index.js</code>)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> nextTodoId = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addTodo = <span class="function">(<span class="params">text</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: <span class="string">&quot;ADD_TODO&quot;</span>,</span><br><span class="line">    id: nextTodoId++,</span><br><span class="line">    text,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setVisibilityFilter = <span class="function">(<span class="params">filter</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: <span class="string">&quot;SET_VISIBILITY_FILTER&quot;</span>,</span><br><span class="line">    filter,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> toggleTodo = <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    type: <span class="string">&quot;TOGGLE_TODO&quot;</span>,</span><br><span class="line">    id,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="Reducers"><a href="#Reducers" class="headerlink" title="Reducers"></a>Reducers</h3><h4 id="reducers-todos-js"><a href="#reducers-todos-js" class="headerlink" title="reducers/todos.js"></a><code>reducers/todos.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> todos = <span class="function">(<span class="params">state = [], action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;ADD_TODO&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> [</span><br><span class="line">        ...state,</span><br><span class="line">        &#123;</span><br><span class="line">          id: action.id,</span><br><span class="line">          text: action.text,</span><br><span class="line">          completed: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ];</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;TOGGLE_TODO&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> state.map(<span class="function">(<span class="params">todo</span>) =&gt;</span></span><br><span class="line">        todo.id === action.id ? &#123; ...todo, <span class="attr">completed</span>: !todo.completed &#125; : todo</span><br><span class="line">      );</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> todos;</span><br></pre></td></tr></table></figure>
<h4 id="reducers-visibilityFilter-js"><a href="#reducers-visibilityFilter-js" class="headerlink" title="reducers/visibilityFilter.js"></a><code>reducers/visibilityFilter.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> visibilityFilter = <span class="function">(<span class="params">state = <span class="string">&quot;SHOW_ALL&quot;</span>, action</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;SET_VISIBILITY_FILTER&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> action.filter;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> visibilityFilter;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/basics/Store.html">https://www.redux.org.cn/docs/basics/Store.html</a></p>
<p>åˆ†æˆä¸¤ä¸ªæ–‡ä»¶æ˜¯ç”±äºåŠŸèƒ½ä¸ä¸€æ ·ï¼Œtodos çš„åŠŸèƒ½ç›¸å¯¹æ¥è¯´æ›´åŠ åå‘è®¡ç®—ã€‚</p>
<h4 id="reducers-index-js"><a href="#reducers-index-js" class="headerlink" title="reducers/index.js"></a><code>reducers/index.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; combineReducers &#125; <span class="keyword">from</span> <span class="string">&quot;redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> todos <span class="keyword">from</span> <span class="string">&quot;./todos&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> visibilityFilter <span class="keyword">from</span> <span class="string">&quot;./visibilityFilter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todoApp = combineReducers(&#123;</span><br><span class="line">  todos,</span><br><span class="line">  visibilityFilter,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> todoApp;</span><br></pre></td></tr></table></figure>
<h3 id="Connect"><a href="#Connect" class="headerlink" title="Connect()"></a>Connect()</h3><p>Actionã€Stateã€Reducer çš„å…³ç³»ç›¸å¯¹æ¥è¯´è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œstate ä½œä¸ºæ•°æ®æºï¼ŒAction å®šä¹‰è¡Œä¸ºå’Œå‚æ•°ç»™ Reducer è¿”å›ä¸€ä¸ªæ–°çš„ stateã€‚ä½†æ˜¯å¦‚ä½•å»ä½¿ç”¨å°±æ²¡é‚£ä¹ˆç®€å•äº†ã€‚</p>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ Redux çš„ APIï¼Œåªæœ‰ä¸¤ä¸ªã€‚ä¸€ä¸ªæ˜¯ä¸ºç»„ä»¶æˆ–å…¨å±€æä¾›ä¸Šä¸‹æ–‡çš„ <code>&lt;Provider store&gt;</code>ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ <code>connect()</code> æ–¹æ³•ã€‚</p>
<p><code>connect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])</code></p>
<p>è¿æ¥ React ç»„ä»¶ä¸ Redux storeã€‚</p>
<p>è¿æ¥æ“ä½œä¸ä¼šæ”¹å˜åŸæ¥çš„ç»„ä»¶ç±»ã€‚<br>åè€Œ<strong>è¿”å›</strong>ä¸€ä¸ªæ–°çš„å·²ä¸ Redux store è¿æ¥çš„ç»„ä»¶ç±»ã€‚</p>
<p>å‚æ•°</p>
<ul>
<li><p>[<code>mapStateToProps(state, [ownProps]): stateProps</code>] (<em>Function</em>): å¦‚æœå®šä¹‰è¯¥å‚æ•°ï¼Œç»„ä»¶å°†ä¼šç›‘å¬ Redux store çš„å˜åŒ–ã€‚ä»»ä½•æ—¶å€™ï¼Œåªè¦ Redux store å‘ç”Ÿæ”¹å˜ï¼Œ<code>mapStateToProps</code> å‡½æ•°å°±ä¼šè¢«è°ƒç”¨ã€‚è¯¥å›è°ƒå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªçº¯å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šä¸ç»„ä»¶çš„ props åˆå¹¶ã€‚å¦‚æœä½ çœç•¥äº†è¿™ä¸ªå‚æ•°ï¼Œä½ çš„ç»„ä»¶å°†ä¸ä¼šç›‘å¬ Redux storeã€‚å¦‚æœæŒ‡å®šäº†è¯¥å›è°ƒå‡½æ•°ä¸­çš„ç¬¬äºŒä¸ªå‚æ•° <code>ownProps</code>ï¼Œåˆ™è¯¥å‚æ•°çš„å€¼ä¸ºä¼ é€’åˆ°ç»„ä»¶çš„ propsï¼Œè€Œä¸”åªè¦ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ propsï¼Œ<code>mapStateToProps</code> ä¹Ÿä¼šè¢«è°ƒç”¨ï¼ˆä¾‹å¦‚ï¼Œå½“ props æ¥æ”¶åˆ°æ¥è‡ªçˆ¶ç»„ä»¶ä¸€ä¸ªå°å°çš„æ”¹åŠ¨ï¼Œé‚£ä¹ˆä½ æ‰€ä½¿ç”¨çš„ ownProps å‚æ•°ï¼ŒmapStateToProps éƒ½ä¼šè¢«é‡æ–°è®¡ç®—ï¼‰ã€‚</p>
<blockquote>
<p>è®¾ç½®äº†è¿™ä¸ªå‚æ•°åï¼Œéœ€è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šä¸ç»„ä»¶çš„ props åˆå¹¶ã€‚å¹¶ä¸”æ˜¯ä¸€ä¸ªç›‘å¬ Redux.store çš„çŠ¶æ€ï¼Œå¦‚æœ store æœ‰æ‰€æ”¹å˜ï¼Œå°±ä¼šé‡æ–°è¿”å›å¯¹è±¡å¹¶æ›´æ–° propsã€‚å¦‚æœåŒæ—¶è®¾ç½®äº† ownPropsï¼ŒownProps ä¹Ÿä¼šä¸€èµ·è¿”å›ä½œä¸ºç»„ä»¶çš„ propsï¼Œç›‘å¬å¯¹è±¡æ”¹ä¸ºç»„ä»¶çš„ propsï¼Œå¦‚æœ props æ”¹å˜ï¼Œä¹Ÿä¼šè°ƒç”¨è¯¥å‡½æ•°è¿”å›æ–°çš„ propsã€‚</p>
</blockquote>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨é«˜çº§ç« èŠ‚ä¸­ï¼Œä½ éœ€è¦æ›´å¥½åœ°å»æ§åˆ¶æ¸²æŸ“çš„æ€§èƒ½ï¼Œæ‰€ç”¨åˆ°çš„ <code>mapStateToProps()</code> ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<strong>é‚£ä¸ª</strong>å‡½æ•°å°†è¢«ä½œä¸º <code>mapStateToProps()</code> åœ¨ç‹¬æœ‰çš„ç»„ä»¶å®ä¾‹ä¸­è°ƒç”¨ã€‚è¿™æ ·å°±å…è®¸ä½ åœ¨æ¯ä¸€ä¸ªå®ä¾‹ä¸­å»è®°å½•ã€‚ä½ å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://github.com/reactjs/react-redux/pull/279">#279</a> å»æµ‹è¯•å’Œäº†è§£å…¶ä¸­çš„è¯¦ç»†å†…å®¹ã€‚ä½†åœ¨ç»å¤§å¤šæ•°çš„åº”ç”¨ä¸­ä¸ä¼šç”¨åˆ°ã€‚</p>
</blockquote>
</li>
<li><p>[<code>mapDispatchToProps(dispatch, [ownProps]): dispatchProps</code>] (<em>Object</em> or <em>Function</em>): å¦‚æœä¼ é€’çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæ¯ä¸ªå®šä¹‰åœ¨è¯¥å¯¹è±¡çš„å‡½æ•°éƒ½å°†è¢«å½“ä½œ Redux action creatorï¼Œå¯¹è±¡æ‰€å®šä¹‰çš„æ–¹æ³•åå°†ä½œä¸ºå±æ€§åï¼›æ¯ä¸ªæ–¹æ³•å°†è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå‡½æ•°ä¸­<code>dispatch</code>æ–¹æ³•ä¼šå°† action creator çš„è¿”å›å€¼ä½œä¸ºå‚æ•°æ‰§è¡Œã€‚è¿™äº›å±æ€§ä¼šè¢«åˆå¹¶åˆ°ç»„ä»¶çš„ props ä¸­ã€‚</p>
<blockquote>
<p>mapDispatchToProps å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­åŒ…å«ä¸€äº›æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä¼šä½œä¸º Redux action creatorï¼Œæ­£å¸¸æ¥è¯´è¿™äº›æ–¹æ³•åªæ˜¯ä¸€ç§ <code>dispatch</code> çš„ å¿«æ·æ–¹å¼ï¼Œä¼šæ·»åŠ åˆ°ç»„ä»¶çš„ props ä¸­ã€‚</p>
</blockquote>
</li>
<li><p>[<code>mergeProps(stateProps, dispatchProps, ownProps): props</code>] (<em>Function</em>): å¦‚æœæŒ‡å®šäº†è¿™ä¸ªå‚æ•°ï¼Œ<code>mapStateToProps()</code> ä¸ <code>mapDispatchToProps()</code> çš„æ‰§è¡Œç»“æœå’Œç»„ä»¶è‡ªèº«çš„ <code>props</code> å°†ä¼ å…¥åˆ°è¿™ä¸ªå›è°ƒå‡½æ•°ä¸­ã€‚è¯¥å›è°ƒå‡½æ•°è¿”å›çš„å¯¹è±¡å°†ä½œä¸º props ä¼ é€’åˆ°è¢«åŒ…è£…çš„ç»„ä»¶ä¸­ã€‚ä½ ä¹Ÿè®¸å¯ä»¥ç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œæ ¹æ®ç»„ä»¶çš„ props æ¥ç­›é€‰éƒ¨åˆ†çš„ state æ•°æ®ï¼Œæˆ–è€…æŠŠ props ä¸­çš„æŸä¸ªç‰¹å®šå˜é‡ä¸ action creator ç»‘å®šåœ¨ä¸€èµ·ã€‚å¦‚æœä½ çœç•¥è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿”å› <code>Object.assign(&#123;&#125;, ownProps, stateProps, dispatchProps)</code> çš„ç»“æœã€‚</p>
<blockquote>
<p>ä½¿å¾—ä¸Šé¢ä¸¤ä¸ªå‡½æ•°ä¼ é€’çš„ props æ›´åŠ å¯æ§ã€‚</p>
</blockquote>
</li>
<li><p>[<code>options</code>] <em>(Object)</em> å¦‚æœæŒ‡å®šè¿™ä¸ªå‚æ•°ï¼Œå¯ä»¥å®šåˆ¶ connector çš„è¡Œä¸ºã€‚</p>
<ul>
<li>[<code>pure = true</code>] <em>(Boolean)</em>: å¦‚æœä¸º trueï¼Œconnector å°†æ‰§è¡Œ <code>shouldComponentUpdate</code> å¹¶ä¸”æµ…å¯¹æ¯” <code>mergeProps</code> çš„ç»“æœï¼Œé¿å…ä¸å¿…è¦çš„æ›´æ–°ï¼Œå‰ææ˜¯å½“å‰ç»„ä»¶æ˜¯ä¸€ä¸ªâ€œçº¯â€ç»„ä»¶ï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•çš„è¾“å…¥æˆ– state è€Œåªä¾èµ–äº props å’Œ Redux store çš„ stateã€‚<em>é»˜è®¤å€¼ä¸º <code>true</code>ã€‚</em></li>
<li>[<code>withRef = false</code>] <em>(Boolean)</em>: å¦‚æœä¸º trueï¼Œconnector ä¼šä¿å­˜ä¸€ä¸ªå¯¹è¢«åŒ…è£…ç»„ä»¶å®ä¾‹çš„å¼•ç”¨ï¼Œè¯¥å¼•ç”¨é€šè¿‡ <code>getWrappedInstance()</code> æ–¹æ³•è·å¾—ã€‚<em>é»˜è®¤å€¼ä¸º <code>false</code>ã€‚</em></li>
</ul>
</li>
</ul>
<p>æ›´åŠ è¯¦ç»†çš„å‚è€ƒ <a target="_blank" rel="noopener" href="https://www.redux.org.cn/docs/react-redux/api.html">https://www.redux.org.cn/docs/react-redux/api.html</a></p>
<h3 id="å®¹å™¨ç»„ä»¶"><a href="#å®¹å™¨ç»„ä»¶" class="headerlink" title="å®¹å™¨ç»„ä»¶"></a>å®¹å™¨ç»„ä»¶</h3><p>å®¹å™¨ç»„ä»¶æ˜¯å°†å±•ç¤ºç»„ä»¶ä½¿ç”¨ <code>connect()</code> æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªä¸ Redux.store è¿æ¥çš„ç»„ä»¶ç±»ï¼Œå¹¶ä¸”é€šè¿‡ <code>mapStateToProps</code> å‚æ•°ç»™ç»„ä»¶ç»‘å®š store ä¸­çš„æ•°æ®ï¼Œåœ¨ <code>dispatch</code> çš„è¿‡ç¨‹ä¸­ï¼Œå» <code>diff</code> åŸæ¥çš„ stateï¼Œæ›´æ–° state æ”¹å˜æ•°æ®çš„ç»„ä»¶ã€‚</p>
<h4 id="containers-VisibleTodoList-js"><a href="#containers-VisibleTodoList-js" class="headerlink" title="containers/VisibleTodoList.js"></a><code>containers/VisibleTodoList.js</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&quot;react-redux&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; toggleTodo &#125; <span class="keyword">from</span> <span class="string">&quot;../actions&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">&quot;../components/TodoList&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getVisibleTodos = <span class="function">(<span class="params">todos, filter</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span> (filter) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;SHOW_COMPLETED&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> todos.filter(<span class="function">(<span class="params">t</span>) =&gt;</span> t.completed);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;SHOW_ACTIVE&quot;</span>:</span><br><span class="line">      <span class="keyword">return</span> todos.filter(<span class="function">(<span class="params">t</span>) =&gt;</span> !t.completed);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;SHOW_ALL&quot;</span>:</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> todos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    todos: getVisibleTodos(state.todos, state.visibilityFilter),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    onTodoClick: <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">      dispatch(toggleTodo(id));</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> VisibleTodoList = connect(mapStateToProps, mapDispatchToProps)(TodoList);</span><br><span class="line"><span class="comment">// å°†mapStateToProps.todosä½œä¸ºç»„ä»¶çš„propsã€‚å°†mapDispatchToPropsä¸­çš„æ–¹æ³•ä¹Ÿä½œä¸ºç»„ä»¶çš„propsã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleTodoList;</span><br></pre></td></tr></table></figure>
<h2 id="å¼‚æ­¥-Action"><a href="#å¼‚æ­¥-Action" class="headerlink" title="å¼‚æ­¥ Action"></a>å¼‚æ­¥ Action</h2><h1 id="Router"><a href="#Router" class="headerlink" title="Router"></a>Router</h1><p>æ„Ÿè§‰çœ‹è¿™ä¸ªå°±å¤Ÿäº† <a target="_blank" rel="noopener" href="https://reactrouter.com/web/example/basic">https://reactrouter.com/web/example/basic</a> è¿™ç½‘ç«™åšçš„å¤ªå¥½äº†ï¼Œæˆ‘å“­äº†éƒ½ã€‚ä¸çŸ¥é“æ¯”é‚£äº›æŒ‡å—ä»€ä¹ˆçš„é«˜åˆ°å“ªé‡Œå»äº†ã€‚</p>
<p>ç¬¬ä¸€ï¼Œä»£ç å¾ˆæ¸…æ™°çš„å‘ˆç°ç»™ä½ å»ç ”ç©¶ã€‚</p>
<p>ç¬¬äºŒï¼Œå„å¼åŠŸèƒ½éƒ½ä»‹ç»äº†å¹¶ä¸”æœ‰ä»£ç ã€‚</p>
<p>ç¬¬ä¸‰ï¼Œæ³¨é‡Šå¾ˆå®Œæ•´ï¼Œçœ‹ä¸æ‡‚ä»£ç çš„è¯å¯ä»¥å…ˆçœ‹å¯¹åº”çš„æ³¨é‡Šäº†è§£ç»“æ„ã€‚</p>
<p>ä¸‹é¢çš„æ–‡ç« æ˜¯å¯¹ä»£ç çš„æ·±ä¸€æ­¥æ³¨é‡Šå’Œè§£è¯»</p>
<h2 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This site has 3 pages, all of which are rendered</span></span><br><span class="line"><span class="comment">// dynamically in the browser (not server rendered).</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Although the page does not ever refresh, notice how</span></span><br><span class="line"><span class="comment">// React Router keeps the URL up to date as you navigate</span></span><br><span class="line"><span class="comment">// through the site. This preserves the browser history,</span></span><br><span class="line"><span class="comment">// making sure things like the back button and bookmarks</span></span><br><span class="line"><span class="comment">// work properly.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">BasicExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/&quot;</span>&gt;Home&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/about&quot;</span>&gt;About&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/dashboard&quot;</span>&gt;Dashboard&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line">        &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">          A &lt;Switch&gt; looks through all its children &lt;Route&gt;</span></span><br><span class="line"><span class="comment">          elements and renders the first one whose path</span></span><br><span class="line"><span class="comment">          matches the current URL. Use a &lt;Switch&gt; any time</span></span><br><span class="line"><span class="comment">          you have multiple routes, but you want only one</span></span><br><span class="line"><span class="comment">          of them to render at a time</span></span><br><span class="line"><span class="comment">          é€šè¿‡ Switch ç»„ä»¶å»æ§åˆ¶ä¸åŒè·¯ç”±ä¸‹çš„å†…å®¹ã€‚</span></span><br><span class="line"><span class="comment">        */</span>&#125;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">            &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">              å¯ä»¥çœ‹å‡ºæ¯ä¸€ä¸ªè·¯ç”±çš„ç»“æ„æ˜¯ç”± Route ç»„ä»¶å’Œé¡µé¢æ‰€å¯¹åº”çš„ç»„ä»¶ç»„æˆçš„ã€‚</span></span><br><span class="line"><span class="comment">            */</span>&#125;</span><br><span class="line">          &lt;Route exact path=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">            &lt;Home /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/about&quot;</span>&gt;</span><br><span class="line">            &lt;About /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/dashboard&quot;</span>&gt;</span><br><span class="line">            &lt;Dashboard /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can think of these components as &quot;pages&quot;</span></span><br><span class="line"><span class="comment">// in your app.</span></span><br><span class="line"><span class="comment">// æ¯ä¸€ä¸ªç»„ä»¶éƒ½å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå•ç‹¬çš„é¡µé¢ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;Home&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">About</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;About&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dashboard</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;Dashboard&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå°±æ˜¯è¯´ä½ å¦‚æœéœ€è¦å†™å¦å¤–ä¸€ä¸ªé¡µé¢çš„è¯ï¼Œç›´æ¥å†™ä¸€ä¸ªç»„ä»¶å°±å¯ä»¥äº†ã€‚å¦‚æœä¸éœ€è¦å…¬å…±ç»„ä»¶æˆ–è€…è·³è½¬è¿æ¥çš„è¯å¯ä»¥ç›´æ¥åœ¨ App é‡Œé¢ç”¨ Switch å§ã€‚</p>
<h2 id="URL-Parameters"><a href="#URL-Parameters" class="headerlink" title="URL Parameters"></a>URL Parameters</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  useParams</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Params are placeholders in the URL that begin</span></span><br><span class="line"><span class="comment">// with a colon, like the `:id` param defined in</span></span><br><span class="line"><span class="comment">// the route in this example. A similar convention</span></span><br><span class="line"><span class="comment">// is used for matching dynamic segments in other</span></span><br><span class="line"><span class="comment">// popular web frameworks like Rails and Express.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">ParamsExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;Accounts&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/netflix&quot;</span>&gt;Netflix&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/zillow-group&quot;</span>&gt;Zillow Group&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/yahoo&quot;</span>&gt;Yahoo&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/modus-create&quot;</span>&gt;Modus Create&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">            &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">              åœ¨pathè·¯å¾„ä¸­é€šè¿‡ : + å˜é‡å çš„æ–¹å¼è®¾ç½®è·¯ç”±å˜é‡ã€‚è¿™ç§æ–¹å¼ä¼šè®©å‚æ•°åœ¨ URL ä¸­ä½“ç°ã€‚</span></span><br><span class="line"><span class="comment">              å¯ä»¥é€šè¿‡ children å±æ€§è€ŒéåµŒå¥—çš„æ–¹å¼è®¾ç½®è·¯ç”±æŒ‡å‘çš„ç»„ä»¶æˆ–é¡µé¢ã€‚</span></span><br><span class="line"><span class="comment">            */</span>&#125;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/:id&quot;</span> children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// We can use the `useParams` hook here to access</span></span><br><span class="line">  <span class="comment">// the dynamic pieces of the URL.</span></span><br><span class="line">  <span class="keyword">let</span> &#123; id &#125; = useParams();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h3&gt;ID: &#123;id&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ API ä»‹ç»ä¸­å¯ä»¥æ‰¾åˆ° <a target="_blank" rel="noopener" href="https://reactrouter.com/web/api/Route/children-func">https://reactrouter.com/web/api/Route/children-func</a></p>
<blockquote>
<p>Sometimes you need to render whether the path matches the location or not. In these cases, you can use the function <code>children</code> prop. It works exactly like <code>render</code> except that it gets called whether there is a match or not.</p>
<p>The <code>children</code> render prop receives all the same <a target="_blank" rel="noopener" href="https://reactrouter.com/react-router/web/api/Route/route-props">route props</a> as the <code>component</code> and <code>render</code> methods, except when a route fails to match the URL, then <code>match</code> is <code>null</code>. This allows you to dynamically adjust your UI based on whether or not the route matches. Here weâ€™re adding an <code>active</code> class if the route matches</p>
<p>æ­£å¸¸æƒ…å†µä¸‹æŒ‡å®šè·¯ç”±å¯¹åº”çš„ç»„ä»¶æ˜¯é€šè¿‡åµŒå¥—æˆ–è€… <code>component</code> å±æ€§</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route</span><br><span class="line">  path=&#123;to&#125;</span><br><span class="line">  children=&#123;<span class="function">(<span class="params">&#123; match &#125;</span>) =&gt;</span> (</span><br><span class="line">    &lt;li className=&#123;match ? <span class="string">&quot;active&quot;</span> : <span class="string">&quot;&quot;</span>&#125;&gt;</span><br><span class="line">      &lt;Link to=&#123;to&#125; &#123;...rest&#125; /&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  )&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯æŸäº›æ—¶å€™å¯ä»¥ä½¿ç”¨ <code>children</code> æ¥ä½¿å¾—ç»„ä»¶æ›´åŠ å¯æ§ï¼Œå›è°ƒå‡½æ•°ä¸­çš„ <code>match</code> æ˜¯ä¸€ä¸ª <code>Boolean</code> ä»£è¡¨ URL æ˜¯å¦åŒ¹é…</p>
</blockquote>
<h2 id="Nesting"><a href="#Nesting" class="headerlink" title="Nesting"></a>Nesting</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  useParams,</span><br><span class="line">  useRouteMatch,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Since routes are regular React components, they</span></span><br><span class="line"><span class="comment">// may be rendered anywhere in the app, including in</span></span><br><span class="line"><span class="comment">// child elements.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// This helps when it&#x27;s time to code-split your app</span></span><br><span class="line"><span class="comment">// into multiple bundles because code-splitting a</span></span><br><span class="line"><span class="comment">// React Router app is the same as code-splitting</span></span><br><span class="line"><span class="comment">// any other React app.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">NestingExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/&quot;</span>&gt;Home&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/topics&quot;</span>&gt;Topics&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &lt;Route exact path=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">            &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">                ä½¿ç”¨äº†ä¸€ä¸ªæ–°çš„å±æ€§ï¼Œå¦‚æœè®¾ç½® exact å±æ€§ï¼ŒåŒ¹é…çš„å°±ä¸æ˜¯ path è€Œæ˜¯ location.pathname</span></span><br><span class="line"><span class="comment">                ä¸€èˆ¬æ¥è¯´ / å¯ä»¥åŒ¹é… / ä¹Ÿå¯ä»¥åŒ¹é… /topicsï¼Œè€Œä¸”ç”±äºè¿™ä¸ªè·¯ç”±å†™çš„é å‰ï¼Œæ‰€ä»¥æ˜¯é»˜è®¤åŒ¹é… / </span></span><br><span class="line"><span class="comment">                æ‰€ä»¥åœ¨åµŒå¥—è·¯ç”±çš„ä½¿ç”¨ä¸­ï¼Œéœ€è¦åœ¨URLæœ‰é‡å¤éƒ¨åˆ†çš„è·¯ç”±çš„ç¬¬ä¸€ä¸ªæ ‡æ˜ exact å±æ€§ã€‚</span></span><br><span class="line"><span class="comment">              */</span>&#125;</span><br><span class="line">            &lt;Home /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/topics&quot;</span>&gt;</span><br><span class="line">            &lt;Topics /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;Home&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Topics</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// The `path` lets us build &lt;Route&gt; paths that are</span></span><br><span class="line">  <span class="comment">// relative to the parent route, while the `url` lets</span></span><br><span class="line">  <span class="comment">// us build relative links.</span></span><br><span class="line">  <span class="keyword">let</span> &#123; path, url &#125; = useRouteMatch();</span><br><span class="line">  <span class="comment">// è¿™ä¸¤ä¸ªä¸€èˆ¬æ¥è¯´å€¼æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æŒ‡ä¸Šä¸€å±‚çš„è·¯ç”±å€¼ã€‚</span></span><br><span class="line">  <span class="comment">// /topics</span></span><br><span class="line">  <span class="built_in">console</span>.log(path, url);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;Topics&lt;/h2&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;Link to=&#123;<span class="string">`<span class="subst">$&#123;url&#125;</span>/rendering`</span>&#125;&gt;Rendering <span class="keyword">with</span> React&lt;/Link&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;Link to=&#123;<span class="string">`<span class="subst">$&#123;url&#125;</span>/components`</span>&#125;&gt;Components&lt;/Link&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;Link to=&#123;<span class="string">`<span class="subst">$&#123;url&#125;</span>/props-v-state`</span>&#125;&gt;Props v. State&lt;/Link&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &lt;Route exact path=&#123;path&#125;&gt;</span><br><span class="line">          &lt;h3&gt;Please select a topic.&lt;/h3&gt;</span><br><span class="line">        &lt;/Route&gt;</span><br><span class="line">        &lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;path&#125;</span>/:topicId`</span>&#125;&gt;</span><br><span class="line">          &lt;Topic /&gt;</span><br><span class="line">        &lt;/Route&gt;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Topic</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// The &lt;Route&gt; that rendered this component has a</span></span><br><span class="line">  <span class="comment">// path of `/topics/:topicId`. The `:topicId` portion</span></span><br><span class="line">  <span class="comment">// of the URL indicates a placeholder that we can</span></span><br><span class="line">  <span class="comment">// get from `useParams()`.</span></span><br><span class="line">  <span class="keyword">let</span> &#123; topicId &#125; = useParams();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h3&gt;&#123;topicId&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Redirect-Auth"><a href="#Redirect-Auth" class="headerlink" title="Redirect(Auth)"></a>Redirect(Auth)</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  Redirect,</span><br><span class="line">  useHistory,</span><br><span class="line">  useLocation</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This example has 3 pages: a public page, a protected</span></span><br><span class="line"><span class="comment">// page, and a login screen. In order to see the protected</span></span><br><span class="line"><span class="comment">// page, you must first login. Pretty standard stuff.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// First, visit the public page. Then, visit the protected</span></span><br><span class="line"><span class="comment">// page. You&#x27;re not yet logged in, so you are redirected</span></span><br><span class="line"><span class="comment">// to the login page. After you login, you are redirected</span></span><br><span class="line"><span class="comment">// back to the protected page.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Notice the URL change each time. If you click the back</span></span><br><span class="line"><span class="comment">// button at this point, would you expect to go back to the</span></span><br><span class="line"><span class="comment">// login page? No! You&#x27;re already logged in. Try it out,</span></span><br><span class="line"><span class="comment">// and you&#x27;ll see you go back to the page you visited</span></span><br><span class="line"><span class="comment">// just *before* logging in, the public page.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">AuthExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;AuthButton /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/public&quot;</span>&gt;Public Page&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/protected&quot;</span>&gt;Protected Page&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/public&quot;</span>&gt;</span><br><span class="line">            &lt;PublicPage /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/login&quot;</span>&gt;</span><br><span class="line">            &lt;LoginPage /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;PrivateRoute path=<span class="string">&quot;/protected&quot;</span>&gt;</span><br><span class="line">            &lt;ProtectedPage /&gt;</span><br><span class="line">          &lt;/PrivateRoute&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fakeAuth = &#123;</span><br><span class="line">  isAuthenticated: <span class="literal">false</span>,</span><br><span class="line">  <span class="function"><span class="title">authenticate</span>(<span class="params">cb</span>)</span> &#123;</span><br><span class="line">    fakeAuth.isAuthenticated = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">setTimeout</span>(cb, <span class="number">100</span>); <span class="comment">// fake async</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">signout</span>(<span class="params">cb</span>)</span> &#123;</span><br><span class="line">    fakeAuth.isAuthenticated = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">setTimeout</span>(cb, <span class="number">100</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AuthButton</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> history = useHistory();</span><br><span class="line">  <span class="comment">// é€šè¿‡ä¸‰å…ƒæ“ä½œç¬¦é‰´å®šæƒé™</span></span><br><span class="line">  <span class="keyword">return</span> fakeAuth.isAuthenticated ? (</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      Welcome!&#123;<span class="string">&quot; &quot;</span>&#125;</span><br><span class="line">      &lt;button</span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          fakeAuth.signout(<span class="function">() =&gt;</span> history.push(<span class="string">&quot;/&quot;</span>));</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        Sign out</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">  ) : (</span><br><span class="line">    &lt;p&gt;You are not logged <span class="keyword">in</span>.&lt;/p&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A wrapper for &lt;Route&gt; that redirects to the login</span></span><br><span class="line"><span class="comment">// screen if you&#x27;re not yet authenticated.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PrivateRoute</span>(<span class="params">&#123; children, ...rest &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// children æ˜¯è·¯ç”±ç»„ä»¶ä¸‹çš„æ‰€æœ‰å­ç»„ä»¶ï¼Œrest æ˜¯è·¯ç”±ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">// rest Object &#123;path: &quot;/protected&quot;, location: Object, computedMatch: Object&#125;</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Route</span><br><span class="line">      &#123;...rest&#125;</span><br><span class="line">      render=&#123;<span class="function">(<span class="params">&#123; location &#125;</span>) =&gt;</span></span><br><span class="line">        fakeAuth.isAuthenticated ? (</span><br><span class="line">          children</span><br><span class="line">        ) : (</span><br><span class="line">           &lt;!--     å¦‚æœæ²¡æœ‰æƒé™ä¼šé‡å®šå‘åˆ° /login è·¯ç”±</span><br><span class="line">            æˆ‘æ€ä¹ˆçœ‹ä¸æ‡‚å‘¢ï¼Œæ€ä¹ˆå°±æ¸²æŸ“ LoginPage äº†å‘¢ --&gt;</span><br><span class="line">          &lt;Redirect</span><br><span class="line">            to=&#123;&#123;</span><br><span class="line">              pathname: <span class="string">&quot;/login&quot;</span>,</span><br><span class="line">              state: &#123; <span class="attr">from</span>: location &#125;</span><br><span class="line">            &#125;&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PublicPage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Public<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ProtectedPage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Protected<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LoginPage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> history = useHistory();</span><br><span class="line">  <span class="keyword">let</span> location = useLocation();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> &#123; <span class="keyword">from</span> &#125; = location.state || &#123; <span class="attr">from</span>: &#123; <span class="attr">pathname</span>: <span class="string">&quot;/&quot;</span> &#125; &#125;;</span><br><span class="line">  <span class="keyword">let</span> login = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    fakeAuth.authenticate(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      history.replace(<span class="keyword">from</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You must log <span class="keyword">in</span> to view the page at &#123;<span class="keyword">from</span>.pathname&#125;&lt;/p&gt;</span><br><span class="line">      &lt;button onClick=&#123;login&#125;&gt;Log <span class="keyword">in</span>&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Custom-Link"><a href="#Custom-Link" class="headerlink" title="Custom Link"></a>Custom Link</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  useRouteMatch</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This example show how you could create a custom</span></span><br><span class="line"><span class="comment">// &lt;Link&gt; that renders something special when the URL</span></span><br><span class="line"><span class="comment">// is the same as the one the &lt;Link&gt; points to.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">CustomLinkExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;OldSchoolMenuLink</span><br><span class="line">          activeOnlyWhenExact=&#123;<span class="literal">true</span>&#125;</span><br><span class="line">          to=<span class="string">&quot;/&quot;</span></span><br><span class="line">          label=<span class="string">&quot;Home&quot;</span></span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;OldSchoolMenuLink to=<span class="string">&quot;/about&quot;</span> label=<span class="string">&quot;About&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;hr /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &lt;Route exact path=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">            &lt;Home /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/about&quot;</span>&gt;</span><br><span class="line">            &lt;About /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰äºfunction()&#123;const &#123;label,to,activeOnlyWhenExact&#125;=props&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">OldSchoolMenuLink</span>(<span class="params">&#123; label, to, activeOnlyWhenExact &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// é€šè¿‡ useRouteMatch æ¥åˆ¤æ–­è·¯ç”±æ¡ä»¶æ˜¯å¦ç¬¦åˆï¼Œé€šè¿‡ä¼ å…¥çš„å‚æ•°ï¼Œç”Ÿæˆä¸åŒçš„æ•ˆæœã€‚</span></span><br><span class="line">  <span class="keyword">let</span> match = useRouteMatch(&#123;</span><br><span class="line">    path: to,</span><br><span class="line">    exact: activeOnlyWhenExact</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;match ? <span class="string">&quot;active&quot;</span> : <span class="string">&quot;&quot;</span>&#125;&gt;</span><br><span class="line">      &#123;match &amp;&amp; <span class="string">&quot;&gt; &quot;</span>&#125;</span><br><span class="line">      &lt;Link to=&#123;to&#125;&gt;&#123;label&#125;&lt;/Link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;Home&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">About</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;About&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Preventing-Transitions"><a href="#Preventing-Transitions" class="headerlink" title="Preventing Transitions"></a>Preventing Transitions</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  Prompt</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"><span class="comment">// è¿™é‡Œä½¿ç”¨äº† Prompt ç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªå¼¹çª—å¼çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å¹¶ä¸ä¼šæ˜¾å¼çš„æ˜¾ç¤ºå‡ºæ¥ï¼Œè€Œæ˜¯ä½œä¸ºè¡¨å•æäº¤å‰çš„ä¸€ä¸ªç¡®è®¤ï¼Œç¡®è®¤å³ä¼šæäº¤è¡¨å•ï¼Œå–æ¶ˆå°±ä¸ä¼šæäº¤è¡¨å•ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Sometimes you want to prevent the user from</span></span><br><span class="line"><span class="comment">// navigating away from a page. The most common</span></span><br><span class="line"><span class="comment">// use case is when they have entered some data</span></span><br><span class="line"><span class="comment">// into a form but haven&#x27;t submitted it yet, and</span></span><br><span class="line"><span class="comment">// you don&#x27;t want them to lose it.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">PreventingTransitionsExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;Link to=<span class="string">&quot;/&quot;</span>&gt;Form&lt;/Link&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;Link to=<span class="string">&quot;/one&quot;</span>&gt;One&lt;/Link&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;Link to=<span class="string">&quot;/two&quot;</span>&gt;Two&lt;/Link&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &lt;Route path=<span class="string">&quot;/&quot;</span> exact children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">BlockingForm</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">        &lt;Route path=<span class="string">&quot;/one&quot;</span> children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>One<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span>&#125; /&gt;</span><br><span class="line">        &lt;Route path=<span class="string">&quot;/two&quot;</span> children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Two<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span>&#125; /&gt;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BlockingForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [isBlocking, setIsBlocking] = useState(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;form</span><br><span class="line">      onSubmit=&#123;<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">        event.preventDefault();</span><br><span class="line">        event.target.reset();</span><br><span class="line">        setIsBlocking(<span class="literal">false</span>);</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;Prompt</span><br><span class="line">        when=&#123;isBlocking&#125;</span><br><span class="line">        message=&#123;<span class="function"><span class="params">location</span> =&gt;</span></span><br><span class="line">          <span class="string">`Are you sure you want to go to <span class="subst">$&#123;location.pathname&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line">      /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        Blocking?&#123;<span class="string">&quot; &quot;</span>&#125;</span><br><span class="line">        &#123;isBlocking ? <span class="string">&quot;Yes, click a link or the back button&quot;</span> : <span class="string">&quot;Nope&quot;</span>&#125;</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line"></span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        &lt;input</span><br><span class="line">          size=<span class="string">&quot;50&quot;</span></span><br><span class="line">          placeholder=<span class="string">&quot;type something to block transitions&quot;</span></span><br><span class="line">          onChange=&#123;<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">            setIsBlocking(event.target.value.length &gt; <span class="number">0</span>);</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line"></span><br><span class="line">      &lt;p&gt;</span><br><span class="line">        &lt;button&gt;Submit to stop blocking&lt;/button&gt;</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Not-Match-404"><a href="#Not-Match-404" class="headerlink" title="Not Match(404)"></a>Not Match(404)</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  Switch,</span><br><span class="line">  Redirect,</span><br><span class="line">  useLocation</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// You can use the last &lt;Route&gt; in a &lt;Switch&gt; as a kind of</span></span><br><span class="line"><span class="comment">// &quot;fallback&quot; route, to catch 404 errors.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// There are a few useful things to note about this example:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// - A &lt;Switch&gt; renders the first child &lt;Route&gt; that matches</span></span><br><span class="line"><span class="comment">// - A &lt;Redirect&gt; may be used to redirect old URLs to new ones</span></span><br><span class="line"><span class="comment">// - A &lt;Route path=&quot;*&gt; always matches</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">NoMatchExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/&quot;</span>&gt;Home&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/old-match&quot;</span>&gt;Old Match, to be redirected&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/will-match&quot;</span>&gt;Will Match&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/will-not-match&quot;</span>&gt;Will Not Match&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/also/will/not/match&quot;</span>&gt;Also Will Not Match&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &lt;Route exact path=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">            &lt;Home /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/old-match&quot;</span>&gt;</span><br><span class="line">            &lt;Redirect to=<span class="string">&quot;/will-match&quot;</span> /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;/will-match&quot;</span>&gt;</span><br><span class="line">            &lt;WillMatch /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">            &lt;!-- é€šè¿‡ * åŒ¹é…æ‰€æœ‰çš„è·¯å¾„ï¼Œç”±äºæ˜¯åœ¨æœ€åä¸€ä¸ªï¼Œæ‰€ä»¥ä¼šåŒ¹é…æ‰€æœ‰å€¼é’±æ²¡æœ‰åŒ¹é…çš„è·¯å¾„ã€‚   --&gt;</span><br><span class="line">          &lt;Route path=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">            &lt;NoMatch /&gt;</span><br><span class="line">          &lt;/Route&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">WillMatch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Matched!<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NoMatch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> location = useLocation();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h3&gt;</span><br><span class="line">        No match <span class="keyword">for</span> &lt;code&gt;&#123;location.pathname&#125;&lt;/code&gt;</span><br><span class="line">      &lt;/h3&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Recursive-Paths"><a href="#Recursive-Paths" class="headerlink" title="Recursive Paths"></a>Recursive Paths</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  Redirect,</span><br><span class="line">  useParams,</span><br><span class="line">  useRouteMatch</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Sometimes you don&#x27;t know all the possible routes</span></span><br><span class="line"><span class="comment">// for your application up front; for example, when</span></span><br><span class="line"><span class="comment">// building a file-system browsing UI or determining</span></span><br><span class="line"><span class="comment">// URLs dynamically based on data. In these situations,</span></span><br><span class="line"><span class="comment">// it helps to have a dynamic router that is able</span></span><br><span class="line"><span class="comment">// to generate routes as needed at runtime.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// This example lets you drill down into a friends</span></span><br><span class="line"><span class="comment">// list recursively, viewing each user&#x27;s friend list</span></span><br><span class="line"><span class="comment">// along the way. As you drill down, notice each segment</span></span><br><span class="line"><span class="comment">// being added to the URL. You can copy/paste this link</span></span><br><span class="line"><span class="comment">// to someone else and they will see the same UI.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Then click the back button and watch the last</span></span><br><span class="line"><span class="comment">// segment of the URL disappear along with the last</span></span><br><span class="line"><span class="comment">// friend list.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">RecursiveExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &lt;Route path=<span class="string">&quot;/:id&quot;</span>&gt;</span><br><span class="line">          &lt;Person /&gt;</span><br><span class="line">        &lt;/Route&gt;</span><br><span class="line">        &lt;Route path=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">          &lt;Redirect to=<span class="string">&quot;/0&quot;</span> /&gt;</span><br><span class="line">        &lt;/Route&gt;</span><br><span class="line">          &lt;!-- è¿™é‡Œç”±äº / çš„è·¯ç”±åœ¨ /:id ä¸‹é¢ï¼Œæ‰€ä»¥ä¼šä¼˜å…ˆåŒ¹é… /:id ï¼Œå½“ç„¶ä¹Ÿå°±ä¼šåŒ¹é… /:id/:id/:id è¿™ç§æƒ…å†µä¸‹å°±ä¼šå‡ºç°æ— é™çš„pathçš„æƒ…å†µ --&gt;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; url &#125; = useRouteMatch();</span><br><span class="line">  <span class="keyword">let</span> &#123; id &#125; = useParams();</span><br><span class="line">  <span class="keyword">let</span> person = find(<span class="built_in">parseInt</span>(id));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h3&gt;&#123;person.name&#125;â€™s Friends&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &#123;person.friends.map(<span class="function"><span class="params">id</span> =&gt;</span> (</span><br><span class="line">          &lt;li key=&#123;id&#125;&gt;</span><br><span class="line">            &lt;Link to=&#123;<span class="string">`<span class="subst">$&#123;url&#125;</span>/<span class="subst">$&#123;id&#125;</span>`</span>&#125;&gt;&#123;find(id).name&#125;&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &lt;Route path=&#123;<span class="string">`<span class="subst">$&#123;url&#125;</span>/:id`</span>&#125;&gt;</span><br><span class="line">          &lt;Person /&gt;</span><br><span class="line">        &lt;/Route&gt;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> PEEPS = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">name</span>: <span class="string">&quot;Michelle&quot;</span>, <span class="attr">friends</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;Sean&quot;</span>, <span class="attr">friends</span>: [<span class="number">0</span>, <span class="number">3</span>] &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;Kim&quot;</span>, <span class="attr">friends</span>: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>] &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&quot;David&quot;</span>, <span class="attr">friends</span>: [<span class="number">1</span>, <span class="number">2</span>] &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> PEEPS.find(<span class="function"><span class="params">p</span> =&gt;</span> p.id === id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="SideBar"><a href="#SideBar" class="headerlink" title="SideBar"></a>SideBar</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; BrowserRouter <span class="keyword">as</span> Router, Switch, Route, Link &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Each logical &quot;route&quot; has two components, one for</span></span><br><span class="line"><span class="comment">// the sidebar and one for the main area. We want to</span></span><br><span class="line"><span class="comment">// render both of them in different places when the</span></span><br><span class="line"><span class="comment">// path matches the current URL.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// We are going to use this route config in 2</span></span><br><span class="line"><span class="comment">// spots: once for the sidebar and once in the main</span></span><br><span class="line"><span class="comment">// content section. All routes are in the same</span></span><br><span class="line"><span class="comment">// order they would appear in a &lt;Switch&gt;.</span></span><br><span class="line"><span class="comment">// è¿™ç§å†™æ³•å¯ä»¥æ›´åŠ ç›´è§‚çš„çœ‹åˆ°æœ¬é¡µçš„ä¸€ä¸ªè·¯ç”±æƒ…å†µã€‚</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    exact: <span class="literal">true</span>,</span><br><span class="line">    sidebar: <span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>home!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">    main: <span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&quot;/bubblegum&quot;</span>,</span><br><span class="line">    sidebar: <span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>bubblegum!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">    main: <span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Bubblegum<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&quot;/shoelaces&quot;</span>,</span><br><span class="line">    sidebar: <span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>shoelaces!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,</span><br><span class="line">    main: <span class="function">() =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Shoelaces<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">SidebarExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;div style=&#123;&#123; <span class="attr">display</span>: <span class="string">&quot;flex&quot;</span> &#125;&#125;&gt;</span><br><span class="line">        &lt;div</span><br><span class="line">          style=&#123;&#123;</span><br><span class="line">            padding: <span class="string">&quot;10px&quot;</span>,</span><br><span class="line">            width: <span class="string">&quot;40%&quot;</span>,</span><br><span class="line">            background: <span class="string">&quot;#f0f0f0&quot;</span>,</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;ul style=&#123;&#123; <span class="attr">listStyleType</span>: <span class="string">&quot;none&quot;</span>, <span class="attr">padding</span>: <span class="number">0</span> &#125;&#125;&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">              &lt;Link to=<span class="string">&quot;/&quot;</span>&gt;Home&lt;/Link&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">              &lt;Link to=<span class="string">&quot;/bubblegum&quot;</span>&gt;Bubblegum&lt;/Link&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">            &lt;li&gt;</span><br><span class="line">              &lt;Link to=<span class="string">&quot;/shoelaces&quot;</span>&gt;Shoelaces&lt;/Link&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">          &lt;Switch&gt;</span><br><span class="line">            &#123;routes.map(<span class="function">(<span class="params">route, index</span>) =&gt;</span> (</span><br><span class="line">              <span class="comment">// You can render a &lt;Route&gt; in as many places</span></span><br><span class="line">              <span class="comment">// as you want in your app. It will render along</span></span><br><span class="line">              <span class="comment">// with any other &lt;Route&gt;s that also match the URL.</span></span><br><span class="line">              <span class="comment">// So, a sidebar or breadcrumbs or anything else</span></span><br><span class="line">              <span class="comment">// that requires you to render multiple things</span></span><br><span class="line">              <span class="comment">// in multiple places at the same URL is nothing</span></span><br><span class="line">              <span class="comment">// more than multiple &lt;Route&gt;s.</span></span><br><span class="line">              &lt;Route</span><br><span class="line">                key=&#123;index&#125;</span><br><span class="line">                path=&#123;route.path&#125;</span><br><span class="line">                exact=&#123;route.exact&#125;</span><br><span class="line">                children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">route.sidebar</span> /&gt;</span></span>&#125;</span><br><span class="line">              /&gt;</span><br><span class="line">            ))&#125;</span><br><span class="line">          &lt;/Switch&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div style=&#123;&#123; <span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">padding</span>: <span class="string">&quot;10px&quot;</span> &#125;&#125;&gt;</span><br><span class="line">          &lt;Switch&gt;</span><br><span class="line">            &#123;routes.map(<span class="function">(<span class="params">route, index</span>) =&gt;</span> (</span><br><span class="line">              <span class="comment">// Render more &lt;Route&gt;s with the same paths as</span></span><br><span class="line">              <span class="comment">// above, but different components this time.</span></span><br><span class="line">              &lt;Route</span><br><span class="line">                key=&#123;index&#125;</span><br><span class="line">                path=&#123;route.path&#125;</span><br><span class="line">                exact=&#123;route.exact&#125;</span><br><span class="line">                children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">route.main</span> /&gt;</span></span>&#125;</span><br><span class="line">              /&gt;</span><br><span class="line">            ))&#125;</span><br><span class="line">          &lt;/Switch&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ„Ÿè§‰è¿™ä¸ª SideBar çš„ç¤ºä¾‹æ²¡ä»€ä¹ˆæ„ä¹‰å•Šï¼Œå°±æ˜¯åŠ äº† style è€Œå·²ã€‚åªæ˜¯æä¾›ä¸€ä¸ªæ¯”è¾ƒç›´è§‚çš„è·¯ç”±çš„æ–¹å¼ã€‚</p>
<h2 id="Animated-Transitions"><a href="#Animated-Transitions" class="headerlink" title="Animated Transitions"></a>Animated Transitions</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./packages/react-router-dom/examples/Animation/styles.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; TransitionGroup, CSSTransition &#125; <span class="keyword">from</span> <span class="string">&quot;react-transition-group&quot;</span>;</span><br><span class="line"><span class="comment">// è¿™ä¸¤ä¸ªç»„ä»¶æ˜¯reactçš„è¿‡æ¸¡ç»„ä»¶ï¼Œè¯¦æƒ…æŸ¥çœ‹ https://reactcommunity.org/react-transition-group/ å¯ä»¥æä¾›é»˜è®¤çš„åŠ¨ç”»æ•ˆæœã€‚</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  Redirect,</span><br><span class="line">  useLocation,</span><br><span class="line">  useParams,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">AnimationExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &lt;Route exact path=<span class="string">&quot;/&quot;</span>&gt;</span><br><span class="line">          &lt;Redirect to=<span class="string">&quot;/hsl/10/90/50&quot;</span> /&gt;</span><br><span class="line">        &lt;/Route&gt;</span><br><span class="line">        &lt;Route path=<span class="string">&quot;*&quot;</span>&gt;</span><br><span class="line">          &lt;AnimationApp /&gt;</span><br><span class="line">        &lt;/Route&gt;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AnimationApp</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> location = useLocation();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div style=&#123;styles.fill&#125;&gt;</span><br><span class="line">      &lt;ul style=&#123;styles.nav&#125;&gt;</span><br><span class="line">        &lt;NavLink to=<span class="string">&quot;/hsl/10/90/50&quot;</span>&gt;Red&lt;/NavLink&gt;</span><br><span class="line">        &lt;NavLink to=<span class="string">&quot;/hsl/120/100/40&quot;</span>&gt;Green&lt;/NavLink&gt;</span><br><span class="line">        &lt;NavLink to=<span class="string">&quot;/rgb/33/150/243&quot;</span>&gt;Blue&lt;/NavLink&gt;</span><br><span class="line">        &lt;NavLink to=<span class="string">&quot;/rgb/240/98/146&quot;</span>&gt;Pink&lt;/NavLink&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div style=&#123;styles.content&#125;&gt;</span><br><span class="line">        &lt;TransitionGroup&gt;</span><br><span class="line">          &#123;<span class="comment">/*</span></span><br><span class="line"><span class="comment">            This is no different than other usage of</span></span><br><span class="line"><span class="comment">            &lt;CSSTransition&gt;, just make sure to pass</span></span><br><span class="line"><span class="comment">            `location` to `Switch` so it can match</span></span><br><span class="line"><span class="comment">            the old location as it animates out.</span></span><br><span class="line"><span class="comment">          */</span>&#125;</span><br><span class="line">          &lt;CSSTransition key=&#123;location.key&#125; classNames=<span class="string">&quot;fade&quot;</span> timeout=&#123;<span class="number">300</span>&#125;&gt;</span><br><span class="line">            &lt;Switch location=&#123;location&#125;&gt;</span><br><span class="line">              &lt;Route path=<span class="string">&quot;/hsl/:h/:s/:l&quot;</span> children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">HSL</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">              &lt;Route path=<span class="string">&quot;/rgb/:r/:g/:b&quot;</span> children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">RGB</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">            &lt;/Switch&gt;</span><br><span class="line">          &lt;/CSSTransition&gt;</span><br><span class="line">        &lt;/TransitionGroup&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NavLink</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;li style=&#123;styles.navItem&#125;&gt;</span><br><span class="line">      &lt;Link &#123;...props&#125; style=&#123;&#123; <span class="attr">color</span>: <span class="string">&quot;inherit&quot;</span> &#125;&#125; /&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HSL</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; h, s, l &#125; = useParams();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div</span><br><span class="line">      style=&#123;&#123;</span><br><span class="line">        ...styles.fill,</span><br><span class="line">        ...styles.hsl,</span><br><span class="line">        background: <span class="string">`hsl(<span class="subst">$&#123;h&#125;</span>, <span class="subst">$&#123;s&#125;</span>%, <span class="subst">$&#123;l&#125;</span>%)`</span>,</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      hsl(&#123;h&#125;, &#123;s&#125;%, &#123;l&#125;%)</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">RGB</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; r, g, b &#125; = useParams();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div</span><br><span class="line">      style=&#123;&#123;</span><br><span class="line">        ...styles.fill,</span><br><span class="line">        ...styles.rgb,</span><br><span class="line">        background: <span class="string">`rgb(<span class="subst">$&#123;r&#125;</span>, <span class="subst">$&#123;g&#125;</span>, <span class="subst">$&#123;b&#125;</span>)`</span>,</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      rgb(&#123;r&#125;, &#123;g&#125;, &#123;b&#125;)</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">styles.fill = &#123;</span><br><span class="line">  position: <span class="string">&quot;absolute&quot;</span>,</span><br><span class="line">  left: <span class="number">0</span>,</span><br><span class="line">  right: <span class="number">0</span>,</span><br><span class="line">  top: <span class="number">0</span>,</span><br><span class="line">  bottom: <span class="number">0</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">styles.content = &#123;</span><br><span class="line">  ...styles.fill,</span><br><span class="line">  top: <span class="string">&quot;40px&quot;</span>,</span><br><span class="line">  textAlign: <span class="string">&quot;center&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">styles.nav = &#123;</span><br><span class="line">  padding: <span class="number">0</span>,</span><br><span class="line">  margin: <span class="number">0</span>,</span><br><span class="line">  position: <span class="string">&quot;absolute&quot;</span>,</span><br><span class="line">  top: <span class="number">0</span>,</span><br><span class="line">  height: <span class="string">&quot;40px&quot;</span>,</span><br><span class="line">  width: <span class="string">&quot;100%&quot;</span>,</span><br><span class="line">  display: <span class="string">&quot;flex&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">styles.navItem = &#123;</span><br><span class="line">  textAlign: <span class="string">&quot;center&quot;</span>,</span><br><span class="line">  flex: <span class="number">1</span>,</span><br><span class="line">  listStyleType: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">  padding: <span class="string">&quot;10px&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">styles.hsl = &#123;</span><br><span class="line">  ...styles.fill,</span><br><span class="line">  color: <span class="string">&quot;white&quot;</span>,</span><br><span class="line">  paddingTop: <span class="string">&quot;20px&quot;</span>,</span><br><span class="line">  fontSize: <span class="string">&quot;30px&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">styles.rgb = &#123;</span><br><span class="line">  ...styles.fill,</span><br><span class="line">  color: <span class="string">&quot;white&quot;</span>,</span><br><span class="line">  paddingTop: <span class="string">&quot;20px&quot;</span>,</span><br><span class="line">  fontSize: <span class="string">&quot;30px&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç»„ä»¶é€šè¿‡å¯¹è±¡çš„æ–¹å¼è®¾ç½® css</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">style=&#123;&#123; ...styles.fill, ...styles.hsl, background: `hsl($&#123;h&#125;, $&#123;s&#125;%, $&#123;l&#125;%)` &#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Route-Config"><a href="#Route-Config" class="headerlink" title="Route Config"></a>Route Config</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Some folks find value in a centralized route config.</span></span><br><span class="line"><span class="comment">// A route config is just data. React is great at mapping</span></span><br><span class="line"><span class="comment">// data into components, and &lt;Route&gt; is a component.</span></span><br><span class="line"><span class="comment">// ç¿»è¯‘ä¸€ä¸‹å¥½äº†ï¼Œæ„æ€å¤§æ¦‚å°±æ˜¯è·¯ç”±é…ç½®åªæ˜¯ data è€Œå·²ï¼Œé€šè¿‡ map å‡½æ•°ç”Ÿæˆè·¯ç”±ã€‚</span></span><br><span class="line"><span class="comment">// Our route config is just an array of logical &quot;routes&quot;</span></span><br><span class="line"><span class="comment">// with `path` and `component` props, ordered the same</span></span><br><span class="line"><span class="comment">// way you&#x27;d do inside a `&lt;Switch&gt;`.</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&quot;/sandwiches&quot;</span>,</span><br><span class="line">    component: Sandwiches</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&quot;/tacos&quot;</span>,</span><br><span class="line">    component: Tacos,</span><br><span class="line">    routes: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">&quot;/tacos/bus&quot;</span>,</span><br><span class="line">        component: Bus</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">&quot;/tacos/cart&quot;</span>,</span><br><span class="line">        component: Cart</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">RouteConfigExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/tacos&quot;</span>&gt;Tacos&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/sandwiches&quot;</span>&gt;Sandwiches&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &#123;routes.map(<span class="function">(<span class="params">route, i</span>) =&gt;</span> (</span><br><span class="line">            &lt;!-- ...route å‡ºæ¥å°±æ˜¯ path: <span class="string">&quot;/sandwiches&quot;</span> component: Sandwiches</span><br><span class="line"> 			å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ path=&#123;route.path&#125; component=&#123;route.component&#125; è¿™æ ·å†™ï¼Œä¸è¿‡ä¸å¤ªæ¸…é™¤é‡Œé¢çš„æ€§èƒ½å·®å¼‚ --&gt;</span><br><span class="line">            &lt;RouteWithSubRoutes key=&#123;i&#125; &#123;...route&#125; /&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A special wrapper for &lt;Route&gt; that knows how to</span></span><br><span class="line"><span class="comment">// handle &quot;sub&quot;-routes by passing them in a `routes`</span></span><br><span class="line"><span class="comment">// prop to the component it renders.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">RouteWithSubRoutes</span>(<span class="params">route</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Route</span><br><span class="line">      path=&#123;route.path&#125;</span><br><span class="line">      render=&#123;<span class="function"><span class="params">props</span> =&gt;</span> (</span><br><span class="line">        <span class="comment">// pass the sub-routes down to keep nesting</span></span><br><span class="line">        &lt;route.component &#123;...props&#125; routes=&#123;route.routes&#125; /&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sandwiches</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Sandwiches<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Tacos</span>(<span class="params">&#123; routes &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;Tacos&lt;/h2&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;Link to=<span class="string">&quot;/tacos/bus&quot;</span>&gt;Bus&lt;/Link&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;Link to=<span class="string">&quot;/tacos/cart&quot;</span>&gt;Cart&lt;/Link&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &#123;routes.map(<span class="function">(<span class="params">route, i</span>) =&gt;</span> (</span><br><span class="line">          &lt;RouteWithSubRoutes key=&#123;i&#125; &#123;...route&#125; /&gt;</span><br><span class="line">        ))&#125;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bus</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Bus<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cart</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Cart<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Modal-Gallery"><a href="#Modal-Gallery" class="headerlink" title="Modal Gallery"></a>Modal Gallery</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  BrowserRouter <span class="keyword">as</span> Router,</span><br><span class="line">  Switch,</span><br><span class="line">  Route,</span><br><span class="line">  Link,</span><br><span class="line">  useHistory,</span><br><span class="line">  useLocation,</span><br><span class="line">  useParams,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This example shows how to render two different screens</span></span><br><span class="line"><span class="comment">// (or the same screen in a different context) at the same URL,</span></span><br><span class="line"><span class="comment">// depending on how you got there.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Click the &quot;featured images&quot; and see them full screen. Then</span></span><br><span class="line"><span class="comment">// &quot;visit the gallery&quot; and click on the colors. Note the URL and</span></span><br><span class="line"><span class="comment">// the component are the same as before but now we see them</span></span><br><span class="line"><span class="comment">// inside a modal on top of the gallery screen.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">ModalGalleryExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;ModalSwitch /&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ModalSwitch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> location = useLocation();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// This piece of state is set when one of the</span></span><br><span class="line">  <span class="comment">// gallery links is clicked. The `background` state</span></span><br><span class="line">  <span class="comment">// is the location that we were at when one of</span></span><br><span class="line">  <span class="comment">// the gallery links was clicked. If it&#x27;s there,</span></span><br><span class="line">  <span class="comment">// use it as the location for the &lt;Switch&gt; so</span></span><br><span class="line">  <span class="comment">// we show the gallery in the background, behind</span></span><br><span class="line">  <span class="comment">// the modal.</span></span><br><span class="line">  <span class="keyword">let</span> background = location.state &amp;&amp; location.state.background;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Switch location=&#123;background || location&#125;&gt;</span><br><span class="line">        &lt;Route exact path=<span class="string">&quot;/&quot;</span> children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Home</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">        &lt;Route path=<span class="string">&quot;/gallery&quot;</span> children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">Gallery</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">        &lt;Route path=<span class="string">&quot;/img/:id&quot;</span> children=&#123;<span class="xml"><span class="tag">&lt;<span class="name">ImageView</span> /&gt;</span></span>&#125; /&gt;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line"></span><br><span class="line">      &#123;<span class="comment">/* Show the modal when a background page is set */</span>&#125;</span><br><span class="line">      &#123;background &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/img/:id&quot;</span> <span class="attr">children</span>=<span class="string">&#123;</span>&lt;<span class="attr">Modal</span> /&gt;</span>&#125; /&gt;</span>&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> IMAGES = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">title</span>: <span class="string">&quot;Dark Orchid&quot;</span>, <span class="attr">color</span>: <span class="string">&quot;DarkOrchid&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&quot;Lime Green&quot;</span>, <span class="attr">color</span>: <span class="string">&quot;LimeGreen&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&quot;Tomato&quot;</span>, <span class="attr">color</span>: <span class="string">&quot;Tomato&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">title</span>: <span class="string">&quot;Seven Ate Nine&quot;</span>, <span class="attr">color</span>: <span class="string">&quot;#789&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">title</span>: <span class="string">&quot;Crimson&quot;</span>, <span class="attr">color</span>: <span class="string">&quot;Crimson&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Thumbnail</span>(<span class="params">&#123; color &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div</span><br><span class="line">      style=&#123;&#123;</span><br><span class="line">        width: <span class="number">50</span>,</span><br><span class="line">        height: <span class="number">50</span>,</span><br><span class="line">        background: color,</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Image</span>(<span class="params">&#123; color &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div</span><br><span class="line">      style=&#123;&#123;</span><br><span class="line">        width: <span class="string">&quot;100%&quot;</span>,</span><br><span class="line">        height: <span class="number">400</span>,</span><br><span class="line">        background: color,</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Link to=<span class="string">&quot;/gallery&quot;</span>&gt;Visit the Gallery&lt;/Link&gt;</span><br><span class="line">      &lt;h2&gt;Featured Images&lt;/h2&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;Link to=<span class="string">&quot;/img/2&quot;</span>&gt;Tomato&lt;/Link&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;Link to=<span class="string">&quot;/img/4&quot;</span>&gt;Crimson&lt;/Link&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Gallery</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> location = useLocation();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;IMAGES.map(<span class="function">(<span class="params">i</span>) =&gt;</span> (</span><br><span class="line">        &lt;Link</span><br><span class="line">          key=&#123;i.id&#125;</span><br><span class="line">          to=&#123;&#123;</span><br><span class="line">            pathname: <span class="string">`/img/<span class="subst">$&#123;i.id&#125;</span>`</span>,</span><br><span class="line">            <span class="comment">// This is the trick! This link sets</span></span><br><span class="line">            <span class="comment">// the `background` in location state.</span></span><br><span class="line">            state: &#123; <span class="attr">background</span>: location &#125;,</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Thumbnail color=&#123;i.color&#125; /&gt;</span><br><span class="line">          &lt;p&gt;&#123;i.title&#125;&lt;/p&gt;</span><br><span class="line">        &lt;/Link&gt;</span><br><span class="line">      ))&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ImageView</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; id &#125; = useParams();</span><br><span class="line">  <span class="keyword">let</span> image = IMAGES[<span class="built_in">parseInt</span>(id, <span class="number">10</span>)];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!image) <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Image not found<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;&#123;image.title&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;Image color=&#123;image.color&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Modal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> history = useHistory();</span><br><span class="line">  <span class="keyword">let</span> &#123; id &#125; = useParams();</span><br><span class="line">  <span class="keyword">let</span> image = IMAGES[<span class="built_in">parseInt</span>(id, <span class="number">10</span>)];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!image) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> back = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.stopPropagation();</span><br><span class="line">    history.goBack();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div</span><br><span class="line">      onClick=&#123;back&#125;</span><br><span class="line">      style=&#123;&#123;</span><br><span class="line">        position: <span class="string">&quot;absolute&quot;</span>,</span><br><span class="line">        top: <span class="number">0</span>,</span><br><span class="line">        left: <span class="number">0</span>,</span><br><span class="line">        bottom: <span class="number">0</span>,</span><br><span class="line">        right: <span class="number">0</span>,</span><br><span class="line">        background: <span class="string">&quot;rgba(0, 0, 0, 0.15)&quot;</span>,</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        className=<span class="string">&quot;modal&quot;</span></span><br><span class="line">        style=&#123;&#123;</span><br><span class="line">          position: <span class="string">&quot;absolute&quot;</span>,</span><br><span class="line">          background: <span class="string">&quot;#fff&quot;</span>,</span><br><span class="line">          top: <span class="number">25</span>,</span><br><span class="line">          left: <span class="string">&quot;10%&quot;</span>,</span><br><span class="line">          right: <span class="string">&quot;10%&quot;</span>,</span><br><span class="line">          padding: <span class="number">15</span>,</span><br><span class="line">          border: <span class="string">&quot;2px solid #444&quot;</span>,</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;h1&gt;&#123;image.title&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;Image color=&#123;image.color&#125; /&gt;</span><br><span class="line">        &lt;button type=<span class="string">&quot;button&quot;</span> onClick=&#123;back&#125;&gt;</span><br><span class="line">          Close</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Link</span><br><span class="line">  key=&#123;i.id&#125;</span><br><span class="line">  to=&#123;&#123;</span><br><span class="line">      pathname: <span class="string">`/img/<span class="subst">$&#123;i.id&#125;</span>`</span>,</span><br><span class="line">      <span class="comment">// This is the trick! This link sets</span></span><br><span class="line">      <span class="comment">// the `background` in location state.</span></span><br><span class="line">      state: &#123; <span class="attr">background</span>: location &#125;</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<p><code>&lt;link&gt;</code> æ ‡ç­¾çš„ to å±æ€§æ¥å—å¤šç§ç±»å‹ï¼Œå¦‚ stringã€objectã€function</p>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œé€šè¿‡è®¾ç½® state æ¥å®ç°ä¸€ä¸ªå¼¹çª—çš„æ•ˆæœã€‚</p>
<blockquote>
<p>An object that can have any of the following properties:</p>
<ul>
<li><code>pathname</code>: A string representing the path to link to.</li>
<li><code>search</code>: A string representation of query parameters.</li>
<li><code>hash</code>: A hash to put in the URL, e.g. <code>#a-hash</code>.</li>
<li><code>state</code>: State to persist to the <code>location</code>.</li>
</ul>
</blockquote>
<p>state æ˜¯è®¾ç½®åˆ° <code>location.state</code>ï¼Œæ·»åŠ  <code>&#123;background: location&#125;</code>ï¼Œ<code>&lt;ModalSwitch&gt;</code> ç»„ä»¶è·å–è¯¥å€¼ï¼Œå¹¶åŠ¨æ€æ¸²æŸ“</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  background &amp;&amp; <span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/img/:id&quot;</span> <span class="attr">children</span>=<span class="string">&#123;</span>&lt;<span class="attr">Modal</span> /&gt;</span>&#125; /&gt;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch location=&#123;background || location&#125;&gt;</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ <code>Switch</code> æ ‡ç­¾ä¸­è®¾ç½® <code>location</code> å±æ€§</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://reactrouter.com/react-router/web/api/Switch/location-object">location: object</a></p>
<p>A <a target="_blank" rel="noopener" href="https://reactrouter.com/react-router/web/api/location"><code>location</code></a> object to be used for matching children elements instead of the current history location (usually the current browser URL).</p>
<p>ä¹Ÿå°±æ˜¯è¯´å¯ä»¥é€šè¿‡ <code>location</code> å±æ€§æ¥è®¾ç½®åŒ¹é…çš„ URLã€‚è¿™é‡Œçš„ä»£ç åªæ˜¯ç”¨è¿™ä¸ªæ–¹å¼æ¥è®¾ç½®ä¸€ä¸ªèƒŒæ™¯ï¼Œå› ä¸ºåœ¨ <code>&lt;ModalSwitch&gt;</code> ä¸­ <code>&lt;Modal&gt;</code> ç»„ä»¶æ˜¯åœ¨æ¸²æŸ“ä¹‹å¤–çš„ï¼Œä»–å’Œ <code>&lt;ModalSwitch&gt;</code> ç»„ä»¶ä¸­çš„ <code>path</code> æœ‰é‡å çš„åœ°æ–¹ï¼Œä¹Ÿå°±ä¼šåŒæ—¶æ¸²æŸ“ï¼Œå¦‚æœä¸è®¾ç½®çš„è¯ï¼ŒèƒŒæ™¯å°±ä¼šå˜æˆå¯¹åº”çš„è·¯å¾„çš„é¡µé¢ã€‚</p>
</blockquote>
<p>è¿™æ ·å°±å¯ä»¥é€šè¿‡ <code>background</code> æ¥ä¸º <code>&lt;ModalSwitch&gt;</code> ç»„ä»¶ç”ŸæˆèƒŒæ™¯ã€‚<code>&lt;ModalSwitch&gt;</code> ç»„ä»¶ä¸­é€šè¿‡ <code>rgba</code> è®¾ç½®é€æ˜åº¦å‘ˆç°å¼¹çª—çš„æ•ˆæœã€‚</p>
<p>ä½†æ˜¯è¿™ä¸ªå†™æ³•æ€»æ„Ÿè§‰æ€ªæ€ªçš„ï¼Œä¸€èˆ¬æ¥è¯´ä½¿ç”¨ å¼‚æˆ–æ“ä½œç¬¦ è¿”å›çš„åº”è¯¥æ˜¯ä¸€ä¸ª <code>Boolean</code></p>
<h2 id="Query-Parameters"><a href="#Query-Parameters" class="headerlink" title="Query Parameters"></a>Query Parameters</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; BrowserRouter <span class="keyword">as</span> Router, Link, useLocation &#125; <span class="keyword">from</span> <span class="string">&quot;react-router-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// React Router does not have any opinions about</span></span><br><span class="line"><span class="comment">// how you should parse URL query strings.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// If you use simple key=value query strings and</span></span><br><span class="line"><span class="comment">// you do not need to support IE 11, you can use</span></span><br><span class="line"><span class="comment">// the browser&#x27;s built-in URLSearchParams API.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// If your query strings contain array or object</span></span><br><span class="line"><span class="comment">// syntax, you&#x27;ll probably need to bring your own</span></span><br><span class="line"><span class="comment">// query parsing function.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">QueryParamsExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Router&gt;</span><br><span class="line">      &lt;QueryParamsDemo /&gt;</span><br><span class="line">    &lt;/Router&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A custom hook that builds on useLocation to parse</span></span><br><span class="line"><span class="comment">// the query string for you.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useQuery</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> URLSearchParams(useLocation().search);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">QueryParamsDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> query = useQuery();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;Accounts&lt;/h2&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/account?name=netflix&quot;</span>&gt;Netflix&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/account?name=zillow-group&quot;</span>&gt;Zillow Group&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/account?name=yahoo&quot;</span>&gt;Yahoo&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;Link to=<span class="string">&quot;/account?name=modus-create&quot;</span>&gt;Modus Create&lt;/Link&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">        &lt;Child name=&#123;query.get(<span class="string">&quot;name&quot;</span>)&#125; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">&#123; name &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;name ? (</span><br><span class="line">        &lt;h3&gt;</span><br><span class="line">          The &lt;code&gt;name&lt;/code&gt; <span class="keyword">in</span> the query string is &amp;quot;&#123;name&#125;</span><br><span class="line">          &amp;quot;</span><br><span class="line">        &lt;/h3&gt;</span><br><span class="line">      ) : (</span><br><span class="line">        &lt;h3&gt;There is no name <span class="keyword">in</span> the query string&lt;/h3&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>URLSearchParams()</code> æ¥å£æ˜¯ä¸€ä¸ªåŸç”Ÿçš„ Web API å‚è€ƒ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams">https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams</a></p>
<p><code>useLocation()</code> è¿”å›çš„æ˜¯å½“å‰çš„ URL å¯¹è±¡ï¼Œsearch æ˜¯å‚æ•°éƒ¨åˆ†ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Object &#123;pathname: &quot;/account&quot;, search: &quot;?name=zillow-group&quot;, hash: &quot;&quot;, state: undefined&#125;</span><br><span class="line">    pathname: &quot;/account&quot;</span><br><span class="line">    search: &quot;?name=zillow-group&quot;</span><br><span class="line">    hash: &quot;&quot;</span><br><span class="line">    state: undefined</span><br></pre></td></tr></table></figure>
<h1 id="Jest"><a href="#Jest" class="headerlink" title="Jest"></a>Jest</h1>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E5%89%8D%E7%AB%AF/" rel="tag"># å­¦ä¹ å‰ç«¯</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/05/28/Gulp%E8%87%AA%E5%8A%A8%E5%8C%96%E5%B7%A5%E5%85%B7%E5%AD%A6%E4%B9%A0/" rel="prev" title="Gulpè‡ªåŠ¨åŒ–å·¥å…·å­¦ä¹ ">
      <i class="fa fa-chevron-left"></i> Gulpè‡ªåŠ¨åŒ–å·¥å…·å­¦ä¹ 
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/06/19/JQuery%E4%B8%80%E8%A7%88/" rel="next" title="JQueryä¸€è§ˆ">
      JQueryä¸€è§ˆ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#React-%E5%AD%A6%E4%B9%A0"><span class="nav-number">1.</span> <span class="nav-text">React å­¦ä¹ </span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JSX"><span class="nav-number">1.1.</span> <span class="nav-text">JSX</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6"><span class="nav-number">1.2.</span> <span class="nav-text">ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="nav-number">1.2.1.</span> <span class="nav-text">è‡ªå®šä¹‰ç»„ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Props-%E5%8F%AA%E8%AF%BB"><span class="nav-number">1.2.2.</span> <span class="nav-text">Props åªè¯»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E5%92%8C%E7%B1%BB%E7%BB%84%E4%BB%B6"><span class="nav-number">1.2.3.</span> <span class="nav-text">å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#State"><span class="nav-number">1.2.4.</span> <span class="nav-text">State</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B"><span class="nav-number">1.2.5.</span> <span class="nav-text">æ•°æ®è‡ªé¡¶å‘ä¸‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">1.2.6.</span> <span class="nav-text">ç”Ÿå‘½å‘¨æœŸ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="nav-number">1.3.</span> <span class="nav-text">äº‹ä»¶å¤„ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%A0%E5%8F%82"><span class="nav-number">1.3.1.</span> <span class="nav-text">ä¼ å‚</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="nav-number">1.4.</span> <span class="nav-text">æ¡ä»¶æ¸²æŸ“</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%BB%E6%AD%A2%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="nav-number">1.4.1.</span> <span class="nav-text">é˜»æ­¢ç»„ä»¶æ¸²æŸ“</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%97%E8%A1%A8"><span class="nav-number">1.5.</span> <span class="nav-text">åˆ—è¡¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A8%E5%8D%95"><span class="nav-number">1.6.</span> <span class="nav-text">è¡¨å•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6"><span class="nav-number">1.6.1.</span> <span class="nav-text">å—æ§ç»„ä»¶</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8A%B6%E6%80%81%E6%8F%90%E5%8D%87"><span class="nav-number">1.7.</span> <span class="nav-text">çŠ¶æ€æå‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E4%B8%8E%E7%BB%A7%E6%89%BF"><span class="nav-number">1.8.</span> <span class="nav-text">ç»„åˆä¸ç»§æ‰¿</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E5%90%88"><span class="nav-number">1.8.1.</span> <span class="nav-text">ç»„åˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%A7%E6%89%BF"><span class="nav-number">1.8.2.</span> <span class="nav-text">ç»§æ‰¿</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="nav-number">1.8.2.1.</span> <span class="nav-text">å°ç»“</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E4%B8%80%E7%82%B9%E7%9A%84-React-%E6%96%87%E6%A1%A3"><span class="nav-number">2.</span> <span class="nav-text">é«˜çº§ä¸€ç‚¹çš„ React æ–‡æ¡£</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A0%E9%9A%9C%E7%A2%8D"><span class="nav-number">2.1.</span> <span class="nav-text">æ— éšœç¢</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E5%88%86%E9%9A%94"><span class="nav-number">2.2.</span> <span class="nav-text">ä»£ç åˆ†éš”</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#React-lazy"><span class="nav-number">2.2.1.</span> <span class="nav-text">React.lazy()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E8%B7%AF%E7%94%B1%E7%9A%84%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2"><span class="nav-number">2.2.2.</span> <span class="nav-text">åŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E5%AF%BC%E5%87%BA%EF%BC%88Named-Exports%EF%BC%89"><span class="nav-number">2.2.3.</span> <span class="nav-text">å‘½åå¯¼å‡ºï¼ˆNamed Exportsï¼‰</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Context"><span class="nav-number">2.3.</span> <span class="nav-text">Context</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Context-Provider"><span class="nav-number">2.3.1.</span> <span class="nav-text">Context.Provider</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E8%BE%B9%E7%95%8C"><span class="nav-number">2.4.</span> <span class="nav-text">é”™è¯¯è¾¹ç•Œ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Refs-%E8%BD%AC%E5%8F%91"><span class="nav-number">2.5.</span> <span class="nav-text">Refs è½¬å‘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fragments"><span class="nav-number">2.6.</span> <span class="nav-text">Fragments</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6%EF%BC%88HOC%EF%BC%89"><span class="nav-number">2.7.</span> <span class="nav-text">é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%B1%E5%85%A5-JSX"><span class="nav-number">2.8.</span> <span class="nav-text">æ·±å…¥ JSX</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8-JSX-%E7%B1%BB%E5%9E%8B%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%82%B9%E8%AF%AD%E6%B3%95"><span class="nav-number">2.8.1.</span> <span class="nav-text">åœ¨ JSX ç±»å‹ä¸­ä½¿ç”¨ç‚¹è¯­æ³•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Protals"><span class="nav-number">2.9.</span> <span class="nav-text">Protals</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E5%86%92%E6%B3%A1"><span class="nav-number">2.9.1.</span> <span class="nav-text">äº‹ä»¶å†’æ³¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Profiler"><span class="nav-number">2.10.</span> <span class="nav-text">Profiler</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8D%E4%BD%BF%E7%94%A8-ES6"><span class="nav-number">2.11.</span> <span class="nav-text">ä¸ä½¿ç”¨ ES6</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8D%E4%BD%BF%E7%94%A8-JSX-%E7%9A%84-React"><span class="nav-number">2.12.</span> <span class="nav-text">ä¸ä½¿ç”¨ JSX çš„ React</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Refs-and-the-DOM"><span class="nav-number">2.13.</span> <span class="nav-text">Refs and the DOM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE-Refs"><span class="nav-number">2.13.1.</span> <span class="nav-text">è®¿é—® Refs</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Render-Props"><span class="nav-number">2.14.</span> <span class="nav-text">Render Props</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93-1"><span class="nav-number">2.15.</span> <span class="nav-text">å°ç»“</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%92%A9%E5%AD%90"><span class="nav-number">3.</span> <span class="nav-text">é’©å­</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%90%E5%8F%96%E8%87%AA%E5%AE%9A%E4%B9%89-Hook"><span class="nav-number">3.1.</span> <span class="nav-text">æå–è‡ªå®šä¹‰ Hook</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redux"><span class="nav-number">4.</span> <span class="nav-text">Redux</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B%E4%BB%A3%E7%A0%81%E7%90%86%E8%A7%A3"><span class="nav-number">4.1.</span> <span class="nav-text">å®ä¾‹ä»£ç ç†è§£</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6-index-js"><span class="nav-number">4.1.1.</span> <span class="nav-text">å…¥å£æ–‡ä»¶(index.js)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-action-actions-index-js"><span class="nav-number">4.1.2.</span> <span class="nav-text">åˆ›å»º action(actions&#x2F;index.js)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Reducers"><span class="nav-number">4.1.3.</span> <span class="nav-text">Reducers</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#reducers-todos-js"><span class="nav-number">4.1.3.1.</span> <span class="nav-text">reducers&#x2F;todos.js</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reducers-visibilityFilter-js"><span class="nav-number">4.1.3.2.</span> <span class="nav-text">reducers&#x2F;visibilityFilter.js</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reducers-index-js"><span class="nav-number">4.1.3.3.</span> <span class="nav-text">reducers&#x2F;index.js</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Connect"><span class="nav-number">4.1.4.</span> <span class="nav-text">Connect()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E7%BB%84%E4%BB%B6"><span class="nav-number">4.1.5.</span> <span class="nav-text">å®¹å™¨ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#containers-VisibleTodoList-js"><span class="nav-number">4.1.5.1.</span> <span class="nav-text">containers&#x2F;VisibleTodoList.js</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5-Action"><span class="nav-number">4.2.</span> <span class="nav-text">å¼‚æ­¥ Action</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Router"><span class="nav-number">5.</span> <span class="nav-text">Router</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Basic"><span class="nav-number">5.1.</span> <span class="nav-text">Basic</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#URL-Parameters"><span class="nav-number">5.2.</span> <span class="nav-text">URL Parameters</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Nesting"><span class="nav-number">5.3.</span> <span class="nav-text">Nesting</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redirect-Auth"><span class="nav-number">5.4.</span> <span class="nav-text">Redirect(Auth)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Custom-Link"><span class="nav-number">5.5.</span> <span class="nav-text">Custom Link</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Preventing-Transitions"><span class="nav-number">5.6.</span> <span class="nav-text">Preventing Transitions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Not-Match-404"><span class="nav-number">5.7.</span> <span class="nav-text">Not Match(404)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Recursive-Paths"><span class="nav-number">5.8.</span> <span class="nav-text">Recursive Paths</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SideBar"><span class="nav-number">5.9.</span> <span class="nav-text">SideBar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Animated-Transitions"><span class="nav-number">5.10.</span> <span class="nav-text">Animated Transitions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Route-Config"><span class="nav-number">5.11.</span> <span class="nav-text">Route Config</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Modal-Gallery"><span class="nav-number">5.12.</span> <span class="nav-text">Modal Gallery</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Query-Parameters"><span class="nav-number">5.13.</span> <span class="nav-text">Query Parameters</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Jest"><span class="nav-number">6.</span> <span class="nav-text">Jest</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Pisho"
      src="/images/icon.jpg">
  <p class="site-author-name" itemprop="name">Pisho</p>
  <div class="site-description" itemprop="description">æœ¬ç«™çœ‹è¿æ°”è®¿é—®è¿›æ¥,ä¸»è¦æ˜¯æœ¬äººçš„ä¸€äº›å­¦ä¹ ç¬”è®°,ä¸€èˆ¬æ²¡æœ‰ä»€ä¹ˆå¹²è´§ã€‚ä¸è¿‡è¿˜æ˜¯å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©ä½ å­¦ä¹ åˆ°ä»€ä¹ˆã€‚ç”±äºåŸŸååˆ°æœŸï¼Œæ‰€ä»¥æ¢æˆäº† MOE äºŒæ¬¡å…ƒåŸŸåã€‚ğŸ˜„</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/PishoLu" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;PishoLu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:luhongyu.hi@qq.com" title="E-Mail â†’ mailto:luhongyu.hi@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://pisho.me/images/wechatfriend.png" title="Wechat â†’ https:&#x2F;&#x2F;pisho.me&#x2F;images&#x2F;wechatfriend.png" rel="noopener" target="_blank"><i class="fab fa-weixin fa-fw"></i>Wechat</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://steamcommunity.com/profiles/76561198212983353/" title="Steam â†’ https:&#x2F;&#x2F;steamcommunity.com&#x2F;profiles&#x2F;76561198212983353&#x2F;" rel="noopener" target="_blank"><i class="fab fa-steam fa-fw"></i>Steam</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Pisho</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
